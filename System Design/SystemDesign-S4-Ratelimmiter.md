<!-- language: rtl -->
<div dir="rtl" align="right" >

#  **Ø·Ø±Ø§Ø­ÛŒ ÛŒÚ© Rate Limiter (Ù…Ø­Ø¯ÙˆØ¯Ú©Ù†Ù†Ø¯Ù‡ Ù†Ø±Ø®)**

Ø¯Ø± ÛŒÚ© Ø³ÛŒØ³ØªÙ… Ø´Ø¨Ú©Ù‡â€ŒØ§ÛŒØŒ *Rate Limiter* (Ù…Ø­Ø¯ÙˆØ¯Ú©Ù†Ù†Ø¯Ù‡ Ù†Ø±Ø®) Ø¨Ø±Ø§ÛŒ Ú©Ù†ØªØ±Ù„ Ù†Ø±Ø® ØªØ±Ø§ÙÛŒÚ©ÛŒ Ú©Ù‡ ØªÙˆØ³Ø· ÛŒÚ© Ú©Ø§Ø±Ø¨Ø± ÛŒØ§ ÛŒÚ© Ø³Ø±ÙˆÛŒØ³ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø¯. Ø¯Ø± Ø¯Ù†ÛŒØ§ÛŒ HTTPØŒ ÛŒÚ© Rate Limiter ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ ÛŒÚ© Ú©Ù„Ø§ÛŒÙ†Øª Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¯Ø± ÛŒÚ© Ø¨Ø§Ø²Ù‡ Ø²Ù…Ø§Ù†ÛŒ Ù…Ø´Ø®Øµ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†Ø¯ Ø±Ø§ Ù…Ø­Ø¯ÙˆØ¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø§Ú¯Ø± ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ API Ø§Ø² Ø¢Ø³ØªØ§Ù†Ù‡ ØªØ¹ÛŒÛŒÙ†â€ŒØ´Ø¯Ù‡ ØªÙˆØ³Ø· Rate Limiter ÙØ±Ø§ØªØ± Ø±ÙˆØ¯ØŒ ØªÙ…Ø§Ù… ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ Ù…Ø³Ø¯ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.

![](./Pictures/rate-limiter-sys-design-3.jpeg)

### Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§ÛŒÛŒ Ø§Ø² Ú©Ø§Ø±Ø¨Ø±Ø¯ Ù…Ø­Ø¯ÙˆØ¯Ú©Ù†Ù†Ø¯Ù‡ Ù†Ø±Ø®:

* ÛŒÚ© Ú©Ø§Ø±Ø¨Ø± Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¨ÛŒØ´ Ø§Ø² **Û² Ù¾Ø³Øª Ø¯Ø± Ù‡Ø± Ø«Ø§Ù†ÛŒÙ‡** Ø§Ø±Ø³Ø§Ù„ Ú©Ù†Ø¯.
* Ø§Ø² ÛŒÚ© Ø¢Ø¯Ø±Ø³ IP Ù…Ø´Ø®ØµØŒ ØªÙ†Ù‡Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù† **Ø­Ø¯Ø§Ú©Ø«Ø± Û±Û° Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¯Ø± ÛŒÚ© Ø±ÙˆØ²** Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø±Ø¯.
* Ø§Ø² ÛŒÚ© Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø®Ø§ØµØŒ **ÙÙ‚Ø· Ûµ Ø¨Ø§Ø± Ø¯Ø± Ù‡ÙØªÙ‡** Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ù¾Ø§Ø¯Ø§Ø´ Ø¯Ø±ÛŒØ§ÙØª Ú©Ø±Ø¯.

Ø¯Ø± Ø§ÛŒÙ† ÙØµÙ„ØŒ Ø§Ø² Ø´Ù…Ø§ Ø®ÙˆØ§Ø³ØªÙ‡ Ø´Ø¯Ù‡ ØªØ§ ÛŒÚ© Ø³ÛŒØ³ØªÙ… Rate Limiter Ø·Ø±Ø§Ø­ÛŒ Ú©Ù†ÛŒØ¯. Ù¾ÛŒØ´ Ø§Ø² Ø´Ø±ÙˆØ¹ Ø·Ø±Ø§Ø­ÛŒØŒ Ø§Ø¨ØªØ¯Ø§ Ø¨Ù‡ Ù…Ø²Ø§ÛŒØ§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Rate Limiter Ø¯Ø± APIÙ‡Ø§ Ù…ÛŒâ€ŒÙ¾Ø±Ø¯Ø§Ø²ÛŒÙ…:

---

### Ù…Ø²Ø§ÛŒØ§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Rate Limiter:

#### Û±. **Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Starvation Ù…Ù†Ø§Ø¨Ø¹ Ù†Ø§Ø´ÛŒ Ø§Ø² Ø­Ù…Ù„Ø§Øª DoS (Denial of Service - Ø­Ù…Ù„Ù‡ Ø§Ù†Ú©Ø§Ø± Ø³Ø±ÙˆÛŒØ³)**

ØªÙ‚Ø±ÛŒØ¨Ø§Ù‹ ØªÙ…Ø§Ù…ÛŒ APIÙ‡Ø§ÛŒ Ù…Ù†ØªØ´Ø± Ø´Ø¯Ù‡ ØªÙˆØ³Ø· Ø´Ø±Ú©Øªâ€ŒÙ‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯ ÙÙ†Ø§ÙˆØ±ÛŒØŒ Ù†ÙˆØ¹ÛŒ Ø§Ø² Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ù†Ø±Ø® Ø±Ø§ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯. Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ù…Ø«Ø§Ù„:

* **ØªÙˆÛŒÛŒØªØ±** Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø§Ø±Ø³Ø§Ù„ ØªÙˆÛŒÛŒØª Ø±Ø§ Ø¨Ù‡ **Û³Û°Û° ØªÙˆÛŒÛŒØª Ø¯Ø± Ù‡Ø± Û³ Ø³Ø§Ø¹Øª** Ù…Ø­Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù‡ Ø§Ø³Øª \[2].
* APIÙ‡Ø§ÛŒ **Google Docs** Ø¨Ù‡ Ø·ÙˆØ± Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø¯Ø§Ø±Ø§ÛŒ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª **Û³Û°Û° Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø®ÙˆØ§Ù†Ø¯Ù† Ø¯Ø± Ù‡Ø± Û¶Û° Ø«Ø§Ù†ÛŒÙ‡ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ú©Ø§Ø±Ø¨Ø±** Ù‡Ø³ØªÙ†Ø¯ \[3].

Ù…Ø­Ø¯ÙˆØ¯Ú©Ù†Ù†Ø¯Ù‡ Ù†Ø±Ø® Ø§Ø² Ø¨Ø±ÙˆØ² Ø­Ù…Ù„Ø§Øª DoS - Ú†Ù‡ Ø¹Ù…Ø¯ÛŒ Ùˆ Ú†Ù‡ ØºÛŒØ±Ø¹Ù…Ø¯ÛŒ - Ø¨Ø§ Ù…Ø³Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù† Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

ðŸ“Œ **Ù…Ù†Ø¨Ø¹:**

* \[1] OWASP: Rate Limiting â€“ [https://owasp.org/www-community/Rate\_Limiting](https://owasp.org/www-community/Rate_Limiting)
* \[2] Twitter Rate Limits â€“ [https://developer.twitter.com/en/docs/twitter-api/rate-limits](https://developer.twitter.com/en/docs/twitter-api/rate-limits)
* \[3] Google Docs API Usage Limits â€“ [https://developers.google.com/docs/api/limits](https://developers.google.com/docs/api/limits)

---

#### Û². **Ú©Ø§Ù‡Ø´ Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§**

Ù…Ø­Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù† Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ Ø¨Ø§Ø¹Ø« Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ø¨Ù‡ ØªØ¹Ø¯Ø§Ø¯ Ú©Ù…ØªØ±ÛŒ Ø³Ø±ÙˆØ± Ù†ÛŒØ§Ø² Ø¨Ø§Ø´Ø¯ Ùˆ Ù…Ù†Ø§Ø¨Ø¹ Ø¨ÛŒØ´ØªØ± Ø¨Ù‡ APIÙ‡Ø§ÛŒ Ø¨Ø§ Ø§ÙˆÙ„ÙˆÛŒØª Ø¨Ø§Ù„Ø§ ØªØ®ØµÛŒØµ ÛŒØ§Ø¨Ù†Ø¯. Rate Limiting Ø¯Ø± Ø´Ø±Ú©Øªâ€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø§Ø² APIÙ‡Ø§ÛŒ Ø®Ø§Ø±Ø¬ÛŒ Ù¾ÙˆÙ„ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯ØŒ Ø§Ù‡Ù…ÛŒØª ÙÙˆÙ‚â€ŒØ§Ù„Ø¹Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø¯Ø§Ø±Ø¯.

Ø¨Ø±Ø§ÛŒ Ù…Ø«Ø§Ù„ØŒ Ø¯Ø± Ù…ÙˆØ§Ø±Ø¯ Ø²ÛŒØ± Ø´Ù…Ø§ Ø¨Ù‡ Ø§Ø²Ø§ÛŒ Ù‡Ø± ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ Ù‡Ø²ÛŒÙ†Ù‡ Ù¾Ø±Ø¯Ø§Ø®Øª Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯:

* Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø¹ØªØ¨Ø§Ø± Ù…Ø´ØªØ±ÛŒ
* Ø§Ù†Ø¬Ø§Ù… Ù¾Ø±Ø¯Ø§Ø®Øª Ø¨Ø§Ù†Ú©ÛŒ
* Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø³ÙˆØ§Ø¨Ù‚ Ø³Ù„Ø§Ù…Øª Ú©Ø§Ø±Ø¨Ø±

Ù…Ø­Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù† ØªØ¹Ø¯Ø§Ø¯ ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒâ€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù‡Ø´ Ù‡Ø²ÛŒÙ†Ù‡ Ø¶Ø±ÙˆØ±ÛŒ Ø§Ø³Øª.

---

#### Û³. **Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Overload Ø´Ø¯Ù† Ø³Ø±ÙˆØ±Ù‡Ø§**

Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù‡Ø´ Ø¨Ø§Ø± Ø³Ø±ÙˆØ±Ù‡Ø§ØŒ Rate Limiter Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ Ù†Ø§Ø´ÛŒ Ø§Ø² Ø±ÙØªØ§Ø± Ù†Ø§Ù‡Ù†Ø¬Ø§Ø± Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ÛŒØ§ Ø±Ø¨Ø§Øªâ€ŒÙ‡Ø§ Ø±Ø§ ÙÛŒÙ„ØªØ± Ú©Ù†Ø¯. Ø§ÛŒÙ† Ú©Ø§Ø± Ø¨Ø§Ø¹Ø« Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ø³ÛŒØ³ØªÙ… Ø¯Ø± Ø´Ø±Ø§ÛŒØ· Ø¨Ø§Ø± Ø¨Ø§Ù„Ø§ Ù†ÛŒØ² Ù¾Ø§ÛŒØ¯Ø§Ø± Ø¨Ø§Ù‚ÛŒ Ø¨Ù…Ø§Ù†Ø¯.

---

ðŸ“Œ **Ù†Ú©ØªÙ‡ ØªÚ©Ù…ÛŒÙ„ÛŒ (Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù‡ Ø¨Ø§ Ø±ÙØ±Ù†Ø³):**
Ø¯Ø± Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Ù…ÛŒÚ©Ø±ÙˆØ³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ØŒ Ù…Ø­Ø¯ÙˆØ¯Ú©Ù†Ù†Ø¯Ù‡ Ù†Ø±Ø® Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¯Ø± Ù„Ø§ÛŒÙ‡â€ŒÛŒ *API Gateway* ÛŒØ§ Ø¨Ù‡â€ŒØ¹Ù†ÙˆØ§Ù† ÛŒÚ© *middleware* Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´ÙˆØ¯. Ø¯Ø± Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒÛŒ Ù…Ø§Ù†Ù†Ø¯ Amazon API Gateway ÛŒØ§ KongØŒ Ù‚Ø§Ø¨Ù„ÛŒØª *rate limiting* Ø¨Ù‡ ØµÙˆØ±Øª ØªÙˆÚ©Ø§Ø± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯ (Ù…Ù†Ø¨Ø¹: *Designing Distributed Systems - Brendan Burns, Oâ€™Reilly*).

---
# Ú¯Ø§Ù… Ø§ÙˆÙ„ â€“ Ø¯Ø±Ú© Ù…Ø³Ø¦Ù„Ù‡ Ùˆ ØªØ¹ÛŒÛŒÙ† Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ø·Ø±Ø§Ø­ÛŒ

Ù…Ø­Ø¯ÙˆØ¯Ú©Ù†Ù†Ø¯Ù‡ Ù†Ø±Ø® (Rate Limiter) Ø±Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„ÙÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ú©Ø±Ø¯ Ú©Ù‡ Ù‡Ø±Ú©Ø¯Ø§Ù… Ù…Ø²Ø§ÛŒØ§ Ùˆ Ù…Ø¹Ø§ÛŒØ¨ Ø®ÙˆØ¯ Ø±Ø§ Ø¯Ø§Ø±Ù†Ø¯. ØªØ¹Ø§Ù…Ù„ Ø¨ÛŒÙ† Ù…ØµØ§Ø­Ø¨Ù‡â€ŒÚ¯Ø± Ùˆ Ù…ØµØ§Ø­Ø¨Ù‡â€ŒØ´ÙˆÙ†Ø¯Ù‡ Ø¨Ù‡ Ø±ÙˆØ´Ù† Ø´Ø¯Ù† Ù†ÙˆØ¹ Rate Limiter Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ú©Ù…Ú© Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

---

#### ðŸ’¬ Ù…Ú©Ø§Ù„Ù…Ù‡ Ù†Ù…ÙˆÙ†Ù‡ Ø¨ÛŒÙ† Ú©Ø§Ù†Ø¯ÛŒØ¯Ø§ Ùˆ Ù…ØµØ§Ø­Ø¨Ù‡â€ŒÚ¯Ø±:

**Ú©Ø§Ù†Ø¯ÛŒØ¯Ø§:** Ù‚Ø±Ø§Ø± Ø§Ø³Øª Ú†Ù‡ Ù†ÙˆØ¹ Ù…Ø­Ø¯ÙˆØ¯Ú©Ù†Ù†Ø¯Ù‡ Ù†Ø±Ø®ÛŒ Ø·Ø±Ø§Ø­ÛŒ Ú©Ù†ÛŒÙ…ØŸ Ø§Ø² Ù†ÙˆØ¹ Ú©Ù„Ø§ÛŒÙ†Øª-Ø³Ø§ÛŒØ¯ Ø§Ø³Øª ÛŒØ§ API Ø³Ù…Øª Ø³Ø±ÙˆØ±ØŸ

**Ù…ØµØ§Ø­Ø¨Ù‡â€ŒÚ¯Ø±:** Ø³ÙˆØ§Ù„ Ø®ÙˆØ¨ÛŒ Ø§Ø³Øª. ØªÙ…Ø±Ú©Ø² Ù…Ø§ Ø±ÙˆÛŒ Ù…Ø­Ø¯ÙˆØ¯Ú©Ù†Ù†Ø¯Ù‡ Ù†Ø±Ø® Ø³Ù…Øª Ø³Ø±ÙˆØ± (Server-side API Rate Limiter) Ø§Ø³Øª.

**Ú©Ø§Ù†Ø¯ÛŒØ¯Ø§:** Ø¢ÛŒØ§ Ø§ÛŒÙ† Rate Limiter Ø¨Ø§ÛŒØ¯ Ø¨Ø± Ø§Ø³Ø§Ø³ IP ÛŒØ§ Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø± (User ID) ÛŒØ§ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¯ÛŒÚ¯Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø±Ø§ Ù…Ø­Ø¯ÙˆØ¯ Ú©Ù†Ø¯ØŸ

**Ù…ØµØ§Ø­Ø¨Ù‡â€ŒÚ¯Ø±:** Ø§ÛŒÙ† Ù…Ø­Ø¯ÙˆØ¯Ú©Ù†Ù†Ø¯Ù‡ Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ Ø§Ù†Ø¯Ø§Ø²Ù‡ Ú©Ø§ÙÛŒ Ø§Ù†Ø¹Ø·Ø§Ùâ€ŒÙ¾Ø°ÛŒØ± Ø¨Ø§Ø´Ø¯ ØªØ§ Ø¨ØªÙˆØ§Ù†Ø¯ Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒØ§ÛŒ Ø§Ø² Ù‚ÙˆØ§Ù†ÛŒÙ† Ù…Ø®ØªÙ„Ù Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø§Ø¹Ù…Ø§Ù„ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ú©Ù†Ø¯.

**Ú©Ø§Ù†Ø¯ÛŒØ¯Ø§:** Ù…Ù‚ÛŒØ§Ø³ Ø³ÛŒØ³ØªÙ… Ú†Ù‚Ø¯Ø± Ø§Ø³ØªØŸ Ø¨Ø±Ø§ÛŒ ÛŒÚ© Ø§Ø³ØªØ§Ø±ØªØ§Ù¾ Ú©ÙˆÚ†Ú© Ø§Ø³Øª ÛŒØ§ Ø¨Ø±Ø§ÛŒ ÛŒÚ© Ø´Ø±Ú©Øª Ø¨Ø²Ø±Ú¯ Ø¨Ø§ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø²ÛŒØ§Ø¯ØŸ

**Ù…ØµØ§Ø­Ø¨Ù‡â€ŒÚ¯Ø±:** Ø³ÛŒØ³ØªÙ… Ø¨Ø§ÛŒØ¯ ØªÙˆØ§Ù†Ø§ÛŒÛŒ Ù¾Ø§Ø³Ø®Ú¯ÙˆÛŒÛŒ Ø¨Ù‡ ØªØ¹Ø¯Ø§Ø¯ Ø¨Ø³ÛŒØ§Ø± Ø²ÛŒØ§Ø¯ÛŒ Ø§Ø² Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø±Ø§ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯.

**Ú©Ø§Ù†Ø¯ÛŒØ¯Ø§:** Ø¢ÛŒØ§ Ø§ÛŒÙ† Ø³ÛŒØ³ØªÙ… Ø¨Ø§ÛŒØ¯ Ø¯Ø± ÛŒÚ© Ù…Ø­ÛŒØ· ØªÙˆØ²ÛŒØ¹â€ŒØ´Ø¯Ù‡ (Distributed Environment) Ú©Ø§Ø± Ú©Ù†Ø¯ØŸ

**Ù…ØµØ§Ø­Ø¨Ù‡â€ŒÚ¯Ø±:** Ø¨Ù„Ù‡.

**Ú©Ø§Ù†Ø¯ÛŒØ¯Ø§:** Ø¢ÛŒØ§ Rate Limiter Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ ØµÙˆØ±Øª ÛŒÚ© Ø³Ø±ÙˆÛŒØ³ Ù…Ø³ØªÙ‚Ù„ Ø·Ø±Ø§Ø­ÛŒ Ø´ÙˆØ¯ ÛŒØ§ Ø¯Ø± Ú©Ø¯ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ù‚Ø±Ø§Ø± Ú¯ÛŒØ±Ø¯ØŸ

**Ù…ØµØ§Ø­Ø¨Ù‡â€ŒÚ¯Ø±:** Ø§ÛŒÙ† ÛŒÚ© ØªØµÙ…ÛŒÙ… Ø·Ø±Ø§Ø­ÛŒ Ø§Ø³Øª Ú©Ù‡ Ø¨Ø± Ø¹Ù‡Ø¯Ù‡ Ø´Ù…Ø§Ø³Øª.

**Ú©Ø§Ù†Ø¯ÛŒØ¯Ø§:** Ø¢ÛŒØ§ Ø¨Ø§ÛŒØ¯ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù…Ø­Ø¯ÙˆØ¯Ø´Ø¯Ù‡ (Throttled Users) Ø±Ø§ Ø§Ø² ÙˆØ¶Ø¹ÛŒØªØ´Ø§Ù† Ø¢Ú¯Ø§Ù‡ Ú©Ù†ÛŒÙ…ØŸ

**Ù…ØµØ§Ø­Ø¨Ù‡â€ŒÚ¯Ø±:** Ø¨Ù„Ù‡.

---

### ðŸ§¾ Ø¬Ù…Ø¹â€ŒØ¨Ù†Ø¯ÛŒ Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ (Requirements)

Ø¨Ø± Ø§Ø³Ø§Ø³ Ú¯ÙØªâ€ŒÙˆÚ¯ÙˆÙ‡Ø§ÛŒ Ø¨Ø§Ù„Ø§ØŒ Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø·Ø±Ø§Ø­ÛŒ Ø³ÛŒØ³ØªÙ… Ù…Ø­Ø¯ÙˆØ¯Ú©Ù†Ù†Ø¯Ù‡ Ù†Ø±Ø® Ø¨Ù‡ Ø´Ø±Ø­ Ø²ÛŒØ± Ø§Ø³Øª:

1. **Ù…Ø­Ø¯ÙˆØ¯Ø³Ø§Ø²ÛŒ Ø¯Ù‚ÛŒÙ‚ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¨ÛŒØ´â€ŒØ§Ø²â€ŒØ­Ø¯:**
   Ø³ÛŒØ³ØªÙ… Ø¨Ø§ÛŒØ¯ Ø¨ØªÙˆØ§Ù†Ø¯ Ø¨Ù‡â€ŒØ¯Ø±Ø³ØªÛŒ Ø§Ø² Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø®Ø§Ø±Ø¬ Ø§Ø² Ø­Ø¯ Ù…Ø¬Ø§Ø² Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ú©Ù†Ø¯.

2. **ØªØ§Ø®ÛŒØ± Ù¾Ø§ÛŒÛŒÙ† (Low Latency):**
   Ù…Ø­Ø¯ÙˆØ¯Ú©Ù†Ù†Ø¯Ù‡ Ù†Ø±Ø® Ù†Ø¨Ø§ÛŒØ¯ Ø¨Ø§Ø¹Ø« Ø§ÙØ²Ø§ÛŒØ´ Ø²Ù…Ø§Ù† Ù¾Ø§Ø³Ø® HTTP Ø´ÙˆØ¯.

3. **Ø­Ø¯Ø§Ù‚Ù„ Ù…ØµØ±Ù Ø­Ø§ÙØ¸Ù‡ (Memory Efficient):**
   Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¨Ù‡ÛŒÙ†Ù‡ Ø§Ø² Ø­Ø§ÙØ¸Ù‡ Ø¯Ø± Ø·Ø±Ø§Ø­ÛŒ Ø¨Ø³ÛŒØ§Ø± Ù…Ù‡Ù… Ø§Ø³Øª.

4. **Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² ØªÙˆØ²ÛŒØ¹â€ŒÙ¾Ø°ÛŒØ±ÛŒ (Distributed Rate Limiting):**
   Ù…Ø­Ø¯ÙˆØ¯Ú©Ù†Ù†Ø¯Ù‡ Ù†Ø±Ø® Ø¨Ø§ÛŒØ¯ Ø¨ØªÙˆØ§Ù†Ø¯ Ø¨Ù‡â€ŒØµÙˆØ±Øª Ù…Ø´ØªØ±Ú© Ø¨ÛŒÙ† Ú†Ù†Ø¯ Ø³Ø±ÙˆØ± ÛŒØ§ ÙØ±Ø¢ÛŒÙ†Ø¯ Ø§Ø¬Ø±Ø§ Ø´ÙˆØ¯.

5. **Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø³ØªØ«Ù†Ø§Ù‡Ø§ (Exception Handling):**
   Ù‡Ù†Ú¯Ø§Ù… Ø¨Ù„ÙˆÚ©Ù‡ Ø´Ø¯Ù† Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ØŒ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ ÙˆØ§Ø¶Ø­ Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´ÙˆØ¯ (Ù…Ø§Ù†Ù†Ø¯ HTTP 429 Too Many Requests).

6. **ØªØ­Ù…Ù„â€ŒÙ¾Ø°ÛŒØ±ÛŒ Ø¨Ø§Ù„Ø§ Ø¯Ø± Ø¨Ø±Ø§Ø¨Ø± Ø®Ø·Ø§ (High Fault Tolerance):**
   Ø§Ú¯Ø± Ù…Ø´Ú©Ù„ÛŒ Ø¯Ø± ÛŒÚ©ÛŒ Ø§Ø² Ø§Ø¬Ø²Ø§ÛŒ Rate Limiter (Ù…Ø«Ù„Ø§Ù‹ Ú©Ø´ Redis) Ù¾ÛŒØ´ Ø¢Ù…Ø¯ØŒ Ù†Ø¨Ø§ÛŒØ¯ Ú©Ù„ Ø³ÛŒØ³ØªÙ… ØªØ­Øª ØªØ£Ø«ÛŒØ± Ù‚Ø±Ø§Ø± Ú¯ÛŒØ±Ø¯.

---

ðŸ“Œ **Ù†Ú©ØªÙ‡ ØªÚ©Ù…ÛŒÙ„ÛŒ (Ø§Ø¶Ø§ÙÙ‡â€ŒØ´Ø¯Ù‡ Ø§Ø² Ù…Ù†Ø¨Ø¹ Ù…Ø¹ØªØ¨Ø±):**
Ø¯Ø± Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ ØªÙˆØ²ÛŒØ¹â€ŒØ´Ø¯Ù‡â€ŒØ§ÛŒ Ú©Ù‡ Ø¨ÛŒÙ† Ú†Ù†Ø¯ÛŒÙ† Ù†ÙˆØ¯ Rate Limiting Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Redis ÛŒØ§ Memcached Ø¨Ø§ TTL Ùˆ atomic counter Ø¨Ù‡ Ù‡Ù…Ø±Ø§Ù‡ fallback Ù…Ú©Ø§Ù†ÛŒØ²Ù…â€ŒÙ‡Ø§ Ù…Ø§Ù†Ù†Ø¯ local in-memory cache ØªÙˆØµÛŒÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ (Ù…Ù†Ø¨Ø¹: *Designing Data-Intensive Applications â€“ Martin Kleppmann*).

---
# Ú¯Ø§Ù… Ø¯ÙˆÙ… â€“ Ø·Ø±Ø§Ø­ÛŒ Ø³Ø·Ø­ Ø¨Ø§Ù„Ø§ Ùˆ Ø¬Ù„Ø¨ Ù†Ø¸Ø± Ù…ØµØ§Ø­Ø¨Ù‡â€ŒÚ¯Ø±

Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø¯Ù‡ Ù†Ú¯Ù‡â€ŒØ¯Ø§Ø´ØªÙ† Ø·Ø±Ø­ØŒ Ø§Ø¨ØªØ¯Ø§ ÛŒÚ© Ù…Ø¯Ù„ Ø³Ø§Ø¯Ù‡ Ø§Ø±ØªØ¨Ø§Ø· Ø¨ÛŒÙ† **Client Ùˆ Server** Ø±Ø§ Ø¯Ø± Ù†Ø¸Ø± Ù…ÛŒâ€ŒÚ¯ÛŒØ±ÛŒÙ…. Ø³Ù¾Ø³ØŒ Ø¨Ù‡ Ø§ÛŒÙ† Ø³ÙˆØ§Ù„ Ú©Ù„ÛŒØ¯ÛŒ Ù…ÛŒâ€ŒÙ¾Ø±Ø¯Ø§Ø²ÛŒÙ…:

---

### ðŸ“Œ Ú©Ø¬Ø§ Ø¨Ø§ÛŒØ¯ Rate Limiter Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´ÙˆØ¯ØŸ

Ø¯Ø± Ù†Ú¯Ø§Ù‡ Ø§ÙˆÙ„ØŒ Rate Limiter Ø±Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø¯Ø± ÛŒÚ©ÛŒ Ø§Ø² Ø¯Ùˆ Ø¬Ø§ÛŒÚ¯Ø§Ù‡ Ø²ÛŒØ± Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ú©Ø±Ø¯:

#### Û±. Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø± Ø³Ù…Øª Ú©Ù„Ø§ÛŒÙ†Øª (Client-side)

* Ø¨Ù‡ Ø·ÙˆØ± Ú©Ù„ÛŒØŒ **Ø³Ù…Øª Ú©Ù„Ø§ÛŒÙ†Øª Ù…Ú©Ø§Ù† Ù‚Ø§Ø¨Ù„ Ø§Ø¹ØªÙ…Ø§Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ø¬Ø±Ø§ÛŒ Ù…Ø­Ø¯ÙˆØ¯Ú©Ù†Ù†Ø¯Ù‡ Ù†Ø±Ø® Ù†ÛŒØ³Øª**ØŒ Ø²ÛŒØ±Ø§:

  * Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø§Ø² Ø³Ù…Øª Ú©Ù„Ø§ÛŒÙ†Øª Ø¨Ù‡â€ŒØ±Ø§Ø­ØªÛŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ ØªÙˆØ³Ø· Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù…Ø®Ø±Ø¨ (malicious users) Ø¬Ø¹Ù„ Ø´ÙˆÙ†Ø¯.
  * Ù…Ù…Ú©Ù† Ø§Ø³Øª Ú©Ù†ØªØ±Ù„ Ú©Ø§Ù…Ù„ÛŒ Ø¨Ø± Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ú©Ù„Ø§ÛŒÙ†Øª Ù†Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒÙ… (Ù…Ø§Ù†Ù†Ø¯ Ø§Ù¾â€ŒÙ‡Ø§ÛŒ Ø´Ø®Øµ Ø«Ø§Ù„Ø«).

#### Û². Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø± Ø³Ù…Øª Ø³Ø±ÙˆØ± (Server-side)

* Ø¯Ø± Ø§ÛŒÙ† Ø­Ø§Ù„ØªØŒ Rate Limiter Ø¯Ø± Ù…Ø³ÛŒØ± Ø±Ø³ÛŒØ¯Ù† Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ù‡ API Ø³Ø±ÙˆØ± Ù‚Ø±Ø§Ø± Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯.

![](./Pictures/4-1.png)

#### Û³. Ø±Ø§Ù‡Ú©Ø§Ø± Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†: Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ù‡â€ŒØ¹Ù†ÙˆØ§Ù† Middleware

* Ø¨Ù‡â€ŒØ¬Ø§ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…Ø³ØªÙ‚ÛŒÙ… Ø¯Ø± Ø³Ø±ÙˆØ±Ù‡Ø§ÛŒ APIØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø§Ø² ÛŒÚ© **Middleware** Ø¨Ø±Ø§ÛŒ Ú©Ù†ØªØ±Ù„ Ù†Ø±Ø® Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ø±Ø¯.
* Ø§ÛŒÙ† Ù…Ø¹Ù…Ø§Ø±ÛŒ Ø¨Ù‡ Ø´Ú©Ù„ Ø²ÛŒØ± Ø¹Ù…Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯:

  * Ú©Ù„Ø§ÛŒÙ†Øªâ€ŒÙ‡Ø§ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù‡ Middleware Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯.
  * Middleware Ù†Ù‚Ø´ ÙˆØ§Ø³Ø· Ø±Ø§ Ø§ÛŒÙØ§ Ú©Ø±Ø¯Ù‡ Ùˆ Ù‚Ø¨Ù„ Ø§Ø² Ø±Ø³ÛŒØ¯Ù† Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ù‡ Ø³Ø±ÙˆØ± APIØŒ Ø¢Ù† Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
  * Ø§Ú¯Ø± ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø§Ø² Ø­Ø¯ Ù…Ø¬Ø§Ø² Ø¹Ø¨ÙˆØ± Ú©Ø±Ø¯Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ù¾Ø§Ø³Ø® `HTTP 429 Too Many Requests` Ø¨Ø§Ø²Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø¯.


![](./Pictures/4-2.png)

---

### ðŸŽ¯ Ù…Ø«Ø§Ù„ Ø¹Ù…Ù„Ú©Ø±Ø¯ÛŒ Ø§Ø² Ù…Ø­Ø¯ÙˆØ¯Ú©Ù†Ù†Ø¯Ù‡ Ù†Ø±Ø®

Ø¨Ø±Ø§ÛŒ Ø¯Ø±Ú© Ø¨Ù‡ØªØ±ØŒ Ø¨Ù‡ Ù…Ø«Ø§Ù„ÛŒ Ø§Ø² **Ù†Ù…ÙˆØ¯Ø§Ø± Figure 4-3** ØªÙˆØ¬Ù‡ Ú©Ù†ÛŒØ¯:

ÙØ±Ø¶ Ú©Ù†ÛŒÙ… Ø¯Ø± Ø·Ø±Ø§Ø­ÛŒ Ù…Ø§ØŒ Ù‡Ø± Ú©Ø§Ø±Ø¨Ø± ÙÙ‚Ø· **Û² Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø± Ø«Ø§Ù†ÛŒÙ‡** Ù…Ø¬Ø§Ø² Ø§Ø³Øª. Ø­Ø§Ù„ØŒ Ú©Ù„Ø§ÛŒÙ†ØªÛŒ Ø¯Ø± Ø¹Ø±Ø¶ ÛŒÚ© Ø«Ø§Ù†ÛŒÙ‡ **Û³ Ø¯Ø±Ø®ÙˆØ§Ø³Øª** Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯:

* Ø¯Ùˆ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø§ÙˆÙ„ ØªÙˆØ³Ø· Middleware Ù…Ø¬Ø§Ø² Ø¯Ø§Ù†Ø³ØªÙ‡ Ø´Ø¯Ù‡ Ùˆ Ø¨Ù‡ API Server Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.
* Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø³ÙˆÙ… Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ Ù†Ù‚Ø¶ Ù…Ø­Ø¯ÙˆØ¯ÛŒØªØŒ ØªÙˆØ³Ø· Middleware Ø±Ø¯ Ø´Ø¯Ù‡ Ùˆ Ú©Ø¯ HTTP 429 Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.


![](./Pictures/4-3.png)
---

### ðŸ’¡ Ù…Ø¹Ù…Ø§Ø±ÛŒâ€ŒÙ‡Ø§ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ: Rate Limiting Ø¯Ø± API Gateway

Ø¯Ø± Ù…Ø¹Ù…Ø§Ø±ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ø¯Ø±Ù† Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± **microservice**ØŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² **API Gateway** Ø¨Ù‡â€ŒØ´Ø¯Øª Ø±Ø§ÛŒØ¬ Ø§Ø³Øª. Ø§ÛŒÙ† Gateway Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ± Ø±Ø§ ÙØ±Ø§Ù‡Ù… Ù…ÛŒâ€ŒÚ©Ù†Ø¯:

* Rate Limiting
* SSL Termination
* Authentication
* IP Whitelisting
* Ø³Ø±ÙˆÛŒØ³â€ŒØ¯Ù‡ÛŒ Ø¨Ù‡ Ù…Ø­ØªÙˆØ§ÛŒ Ø§ÛŒØ³ØªØ§ (Static Content)

Ø¨Ù‡â€ŒØ¹Ù†ÙˆØ§Ù† Ù†Ù…ÙˆÙ†Ù‡ØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø¨Ù‡ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ± Ø§Ø´Ø§Ø±Ù‡ Ú©Ø±Ø¯ Ú©Ù‡ Ø¨Ù‡â€ŒØµÙˆØ±Øª Ù…Ø¯ÛŒØ±ÛŒØªâ€ŒØ´Ø¯Ù‡ API Gateway Ø§Ø±Ø§Ø¦Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ù†Ø¯:

* **AWS API Gateway**
* **Kong API Gateway**
* **NGINX Gateway with Lua scripting**
* **Google Cloud Endpoints**

ðŸ“š *(Ù…Ù†Ø¨Ø¹: \[4] Cloud Microservices Architecture, Martin Fowler â€“ martinfowler.com)*

---

### âš–ï¸ ØªØµÙ…ÛŒÙ…â€ŒÚ¯ÛŒØ±ÛŒ Ø¯Ø± Ù…ÙˆØ±Ø¯ Ù…Ø­Ù„ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Rate Limiter

Ù‡ÛŒÚ† Ù¾Ø§Ø³Ø® Ù‚Ø·Ø¹ÛŒ Ø¨Ø±Ø§ÛŒ Ù…Ø­Ù„ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Rate Limiter ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯. Ø§Ù…Ø§ Ù†Ú©Ø§Øª Ø²ÛŒØ± Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø®ÙˆØ¨ÛŒ Ù‡Ø³ØªÙ†Ø¯:

| Ù†Ú©ØªÙ‡ Ø·Ø±Ø§Ø­ÛŒ                    | ØªÙˆØ¶ÛŒØ­                                                                                                                          |
| ----------------------------- | ------------------------------------------------------------------------------------------------------------------------------ |
| **ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒ Ù…ÙˆØ¬ÙˆØ¯**            | Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ Ú©Ù‡ Ø²Ø¨Ø§Ù† Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ†ÙˆÛŒØ³ÛŒ Ùˆ Ú©Ø´ ÙØ¹Ù„ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡ Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Rate Limiter Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø§Ø´Ø¯ (Ù…Ø«Ù„Ø§Ù‹ Redis + Python ÛŒØ§ Golang).      |
| **Ø§Ù†Ø¹Ø·Ø§Ù Ø¯Ø± Ø§Ù†ØªØ®Ø§Ø¨ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…** | Ø§Ú¯Ø± Ø§Ø² GatewayÙ‡Ø§ÛŒ Ø´Ø®Øµ Ø«Ø§Ù„Ø« Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ØŒ Ù…Ù…Ú©Ù† Ø§Ø³Øª ÙÙ‚Ø· Ø¨Ø±Ø®ÛŒ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ Ù‚Ø§Ø¨Ù„ ØªÙ†Ø¸ÛŒÙ… Ø¨Ø§Ø´Ù†Ø¯. ÙˆÙ„ÛŒ Ø¯Ø± Ø³Ù…Øª Ø³Ø±ÙˆØ±ØŒ Ú©Ù†ØªØ±Ù„ Ú©Ø§Ù…Ù„ Ø¯Ø§Ø±ÛŒØ¯. |
| **Ù…Ø¹Ù…Ø§Ø±ÛŒ ÙØ¹Ù„ÛŒ**               | Ø§Ú¯Ø± Ù…Ø¹Ù…Ø§Ø±ÛŒ Ø´Ù…Ø§ Ù‡Ù…â€ŒØ§Ú©Ù†ÙˆÙ† API Gateway Ø¯Ø§Ø±Ø¯ØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ù‡â€ŒØ±Ø§Ø­ØªÛŒ Rate Limiting Ø±Ø§ Ø¨Ù‡ Ø¢Ù† Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯.                                |
| **Ù…Ù†Ø§Ø¨Ø¹ Ù…Ù‡Ù†Ø¯Ø³ÛŒ**              | Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Rate Limiter Ø³ÙØ§Ø±Ø´ÛŒ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø²Ù…Ø§Ù† Ùˆ Ù†ÛŒØ±Ùˆ Ø¯Ø§Ø±Ø¯. Ø¯Ø± Ù†Ø¨ÙˆØ¯ Ù…Ù†Ø§Ø¨Ø¹ Ú©Ø§ÙÛŒØŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² API Gateway Ø¢Ù…Ø§Ø¯Ù‡ ØªÙˆØµÛŒÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.        |

---

# Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ù…Ø­Ø¯ÙˆØ¯Ø³Ø§Ø²ÛŒ Ù†Ø±Ø® (Rate Limiting Algorithms)

Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Rate Limiting Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø§Ø² Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„ÙÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ø±Ø¯ Ú©Ù‡ Ù‡Ø± ÛŒÚ© **Ù…Ø²Ø§ÛŒØ§ Ùˆ Ù…Ø¹Ø§ÛŒØ¨ Ø®Ø§Øµ Ø®ÙˆØ¯** Ø±Ø§ Ø¯Ø§Ø±Ù†Ø¯. Ø§Ú¯Ø±Ú†Ù‡ ØªÙ…Ø±Ú©Ø² Ø§ÛŒÙ† ÙØµÙ„ Ø¨Ø± Ø±ÙˆÛŒ Ø¬Ø²Ø¦ÛŒØ§Øª Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ Ù†ÛŒØ³ØªØŒ Ø§Ù…Ø§ Ø¯Ø±Ú© Ù…ÙØ§Ù‡ÛŒÙ… Ø³Ø·Ø­ Ø¨Ø§Ù„Ø§ÛŒ Ø¢Ù†â€ŒÙ‡Ø§ Ø¨Ù‡ Ù…Ø§ Ú©Ù…Ú© Ù…ÛŒâ€ŒÚ©Ù†Ø¯ ØªØ§ Ø¨Ø³ØªÙ‡ Ø¨Ù‡ **Ù…ÙˆØ§Ø±Ø¯ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ (use case)** Ù…Ù†Ø§Ø³Ø¨â€ŒØªØ±ÛŒÙ† Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… ÛŒØ§ ØªØ±Ú©ÛŒØ¨ÛŒ Ø§Ø² Ø¢Ù†â€ŒÙ‡Ø§ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒÙ….

---

### âœ… ÙÙ‡Ø±Ø³Øª Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ø±Ø§ÛŒØ¬:

---

#### 1. **Token Bucket (Ø³Ø·Ù„ ØªÙˆÚ©Ù†)**

* **Ù…ÙÙ‡ÙˆÙ…**: ÛŒÚ© Ø³Ø·Ù„ Ø­Ø§ÙˆÛŒ ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ Ø¯Ø§Ø±ÛŒÙ… Ú©Ù‡ Ø¨Ø§ Ø³Ø±Ø¹Øª Ø«Ø§Ø¨ØªÛŒ Ù¾Ø± Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ù‡Ø± Ø¨Ø§Ø± Ú©Ù‡ ÛŒÚ© Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…ÛŒâ€ŒØ±Ø³Ø¯ØŒ ÛŒÚ© ØªÙˆÚ©Ù† Ù…ØµØ±Ù Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ø§Ú¯Ø± ØªÙˆÚ©Ù† ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ØŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø±Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
* **Ù…Ø²Ø§ÛŒØ§**:

  * Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Ø§Ù†ÙØ¬Ø§Ø±Ù‡Ø§ÛŒ Ú©ÙˆØªØ§Ù‡ (burst)
  * Ú©Ù†ØªØ±Ù„ Ù†Ø±Ø® Ù…ØªÙˆØ³Ø· Ùˆ Ø§Ø¬Ø§Ø²Ù‡ Ø¨Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ù†Ø§Ú¯Ù‡Ø§Ù†ÛŒ Ø¯Ø± Ø¨Ø§Ø²Ù‡ Ú©ÙˆØªØ§Ù‡
* **Ú©Ø§Ø±Ø¨Ø±Ø¯ Ø±Ø§ÛŒØ¬**: Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ø§ÛŒ APIÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø§Ù…Ú©Ø§Ù† Ø§ÙØ²Ø§ÛŒØ´ Ù†Ø§Ú¯Ù‡Ø§Ù†ÛŒ ØªØ±Ø§ÙÛŒÚ© Ø¯Ø§Ø±Ù†Ø¯.
* ðŸ“š *Ù…Ù†Ø¨Ø¹: RFC 2697 (A Single Rate Three Color Marker)*

---

#### 2. **Leaky Bucket (Ø³Ø·Ù„ Ú†Ú©Ù‡â€ŒØ§ÛŒ)**

* **Ù…ÙÙ‡ÙˆÙ…**: Ù…Ø´Ø§Ø¨Ù‡ Ø³Ø·Ù„ Ø¢Ø¨ Ø§Ø³Øª Ú©Ù‡ Ø¨Ø§ Ù†Ø±Ø® Ø«Ø§Ø¨ØªÛŒ Ù†Ø´Øª Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø§Ú¯Ø± ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø¨ÛŒØ´ Ø§Ø² Ø¸Ø±ÙÛŒØª Ø³Ø·Ù„ Ø¨Ø§Ø´Ø¯ØŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ Ø­Ø°Ù Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.
* **Ù…Ø²Ø§ÛŒØ§**:

  * ÛŒÚ©Ù†ÙˆØ§Ø®Øªâ€ŒØ³Ø§Ø²ÛŒ Ø¨Ø§Ø± ØªØ±Ø§ÙÛŒÚ©ÛŒ (smoothing traffic)
  * Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø§Ù†ÙØ¬Ø§Ø±Ù‡Ø§ÛŒ Ù†Ø§Ú¯Ù‡Ø§Ù†ÛŒ
* **Ù…Ø¹Ø§ÛŒØ¨**:

  * Ø¨Ù‡ Ø§Ù†Ø¯Ø§Ø²Ù‡ Token Bucket Ø§Ù†Ø¹Ø·Ø§Ùâ€ŒÙ¾Ø°ÛŒØ± Ù†ÛŒØ³Øª.
* **Ú©Ø§Ø±Ø¨Ø±Ø¯ Ø±Ø§ÛŒØ¬**: Ú©Ù†ØªØ±Ù„ ØªØ±Ø§ÙÛŒÚ© Ø¯Ø± Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ù†Ú©ÛŒ ÛŒØ§ Ø«Ø¨Øª Ù„Ø§Ú¯ Ù¾Ø§ÛŒØ¯Ø§Ø±.

---

#### 3. **Fixed Window Counter (Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø¨Ø§ Ù¾Ù†Ø¬Ø±Ù‡ Ø²Ù…Ø§Ù†ÛŒ Ø«Ø§Ø¨Øª)**

* **Ù…ÙÙ‡ÙˆÙ…**: Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø¯Ø± Ø¨Ø§Ø²Ù‡â€ŒÙ‡Ø§ÛŒ Ø²Ù…Ø§Ù†ÛŒ Ø«Ø§Ø¨Øª (Ù…Ø«Ù„Ø§Ù‹ Ù‡Ø± Ø¯Ù‚ÛŒÙ‚Ù‡) Ø´Ù…Ø§Ø±Ø´ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯. Ø§Ú¯Ø± ØªØ¹Ø¯Ø§Ø¯ Ø¢Ù†â€ŒÙ‡Ø§ Ø§Ø² Ø¢Ø³ØªØ§Ù†Ù‡ Ø¨ÛŒØ´ØªØ± Ø´ÙˆØ¯ØŒ Ø±Ø¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.
* **Ù…Ø²Ø§ÛŒØ§**:

  * Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø³Ø§Ø¯Ù‡
* **Ù…Ø¹Ø§ÛŒØ¨**:

  * Ø§Ù…Ú©Ø§Ù† Ø­Ù…Ù„Ù‡ Ø§Ù†ÙØ¬Ø§Ø±ÛŒ Ø¯Ø± Ù…Ø±Ø² Ù¾Ù†Ø¬Ø±Ù‡â€ŒÙ‡Ø§ (Request Burst at boundary)
* **Ú©Ø§Ø±Ø¨Ø±Ø¯ Ø±Ø§ÛŒØ¬**: Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ø§ÛŒ Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø¯Ù‡ Ø¨Ø± Ø§Ø³Ø§Ø³ IP ÛŒØ§ User ID.

---

#### 4. **Sliding Window Log (Ù„Ø§Ú¯ Ø¨Ø§ Ù¾Ù†Ø¬Ø±Ù‡ Ù„ØºØ²Ø§Ù†)**

* **Ù…ÙÙ‡ÙˆÙ…**: Ø²Ù…Ø§Ù† Ù‡Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø± ÛŒÚ© Ù„ÛŒØ³Øª Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ø¯Ø± Ù‡Ø± Ø¨Ø§Ø± Ø¨Ø±Ø±Ø³ÛŒØŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø¯Ø± Ø¨Ø§Ø²Ù‡ Ù„ØºØ²Ø§Ù† (Ù…Ø«Ù„Ø§Ù‹ 60 Ø«Ø§Ù†ÛŒÙ‡ Ø§Ø®ÛŒØ±) Ù‡Ø³ØªÙ†Ø¯ Ø´Ù…Ø§Ø±Ø´ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.
* **Ù…Ø²Ø§ÛŒØ§**:

  * Ø¯Ù‚Øª Ø¨Ø§Ù„Ø§
* **Ù…Ø¹Ø§ÛŒØ¨**:

  * Ù…ØµØ±Ù Ø¨Ø§Ù„Ø§ÛŒ Ø­Ø§ÙØ¸Ù‡ (Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ timestamps)
* **Ú©Ø§Ø±Ø¨Ø±Ø¯ Ø±Ø§ÛŒØ¬**: Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒÛŒ Ø¨Ø§ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ú©Ù†ØªØ±Ù„ Ø¯Ù‚ÛŒÙ‚ Ù†Ø±Ø® Ø¨Ø± Ø§Ø³Ø§Ø³ Ø²Ù…Ø§Ù†.

---

#### 5. **Sliding Window Counter (Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø¨Ø§ Ù¾Ù†Ø¬Ø±Ù‡ Ù„ØºØ²Ø§Ù†)**

* **Ù…ÙÙ‡ÙˆÙ…**: Ø´Ø¨ÛŒÙ‡ Ø¨Ù‡ Fixed WindowØŒ ÙˆÙ„ÛŒ Ø¯Ùˆ Ù¾Ù†Ø¬Ø±Ù‡ Ø²Ù…Ø§Ù†ÛŒ Ù…Ø¬Ø§ÙˆØ± Ø±Ø§ Ø¯Ø± Ù†Ø¸Ø± Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯ Ùˆ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† ÙˆØ²Ù†â€ŒØ¯Ø§Ø±ØŒ ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø±Ø§ Ù…ÛŒâ€ŒØ³Ù†Ø¬Ø¯.
* **Ù…Ø²Ø§ÛŒØ§**:

  * Ø¯Ù‚Øª Ø¨ÛŒØ´ØªØ± Ù†Ø³Ø¨Øª Ø¨Ù‡ Fixed Window
  * Ù…ØµØ±Ù Ø­Ø§ÙØ¸Ù‡ Ú©Ù…ØªØ± Ø§Ø² Sliding Log
* **Ú©Ø§Ø±Ø¨Ø±Ø¯ Ø±Ø§ÛŒØ¬**: Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒÛŒ Ø¨Ø§ Ù†ÛŒØ§Ø² Ø¨Ù‡ ØªØ¹Ø§Ø¯Ù„ Ø¨ÛŒÙ† Ø¯Ù‚Øª Ùˆ Ø¹Ù…Ù„Ú©Ø±Ø¯.

---

### ðŸŽ¯ Ù†ØªÛŒØ¬Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ù…Ù†Ø§Ø³Ø¨

| Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…        | Ø¯Ù‚Øª           | Ù…ØµØ±Ù Ø­Ø§ÙØ¸Ù‡ | Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Burst | Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ø§ÛŒ                 |
| --------------- | ------------- | ---------- | ----------------- | -------------------------- |
| Token Bucket    | Ù…ØªÙˆØ³Ø·         | Ú©Ù…         | Ø¨Ù„Ù‡               | APIÙ‡Ø§ÛŒ Ø¹Ù…ÙˆÙ…ÛŒ               |
| Leaky Bucket    | Ù…ØªÙˆØ³Ø·         | Ú©Ù…         | Ø®ÛŒØ±               | Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù¾Ø§ÛŒØ¯Ø§Ø±              |
| Fixed Window    | Ù¾Ø§ÛŒÛŒÙ†         | Ø¨Ø³ÛŒØ§Ø± Ú©Ù…   | Ø®ÛŒØ±               | Ù…ÙˆØ§Ø±Ø¯ Ø³Ø§Ø¯Ù‡                 |
| Sliding Log     | Ø¨Ø§Ù„Ø§          | Ø¨Ø§Ù„Ø§       | Ø¨Ù„Ù‡               | Ø§Ù…Ù†ÛŒØª Ùˆ Ú©Ù†ØªØ±Ù„ Ø¯Ù‚ÛŒÙ‚         |
| Sliding Counter | Ù…ØªÙˆØ³Ø· Ø¨Ù‡ Ø¨Ø§Ù„Ø§ | Ù…ØªÙˆØ³Ø·      | Ø¨Ù„Ù‡               | Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¹Ù…ÙˆÙ…ÛŒ Ø¨Ø§ Ø¯Ù‚Øª Ù…ØªÙˆØ³Ø· |

---

ðŸ“š Ù…Ù†Ø§Ø¨Ø¹:

* [Rate Limiting Algorithms â€“ Cloudflare Blog](https://blog.cloudflare.com/rate-limiting-algorithms/)
* [High Scalability â€“ Design Patterns for Rate Limiting](http://highscalability.com/blog/2016/4/20/design-patterns-for-rate-limiting.html)
* [AWS Rate Limiting Techniques â€“ AWS Architecture Blog](https://aws.amazon.com/architecture)

---
### Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Token Bucket (Ø³Ø·Ù„ ØªÙˆÚ©Ù†)

![](./Pictures/The-Token-Bucket-Algorithm.png)



Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… **Token Bucket** ÛŒÚ©ÛŒ Ø§Ø² Ù¾Ø±Ú©Ø§Ø±Ø¨Ø±Ø¯ØªØ±ÛŒÙ† Ùˆ Ø³Ø§Ø¯Ù‡â€ŒØªØ±ÛŒÙ† Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ **Rate Limiting** Ø§Ø³Øª. Ø§ÛŒÙ† Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ø¨Ù‡â€ŒØ·ÙˆØ± Ú¯Ø³ØªØ±Ø¯Ù‡ Ø¯Ø± Ø´Ø±Ú©Øªâ€ŒÙ‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯ Ø§ÛŒÙ†ØªØ±Ù†ØªÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ù…Ø«Ø§Ù„ØŒ Ø´Ø±Ú©Øªâ€ŒÙ‡Ø§ÛŒ **Amazon** \[Ù…Ù†Ø¨Ø¹: Amazon API Gateway Throttling \[5]] Ùˆ **Stripe** \[Ù…Ù†Ø¨Ø¹: Stripe API Rate Limits \[6]] Ø§Ø² Ø§ÛŒÙ† Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ø¨Ø±Ø§ÛŒ Ú©Ù†ØªØ±Ù„ Ù†Ø±Ø® Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ API Ø®ÙˆØ¯ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯.

---

## ðŸ‘ˆ Ù†Ø­ÙˆÙ‡ Ú©Ø§Ø± Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Token Bucket:

* ÛŒÚ© **Ø³Ø·Ù„ ØªÙˆÚ©Ù† (Token Bucket)**ØŒ Ø¯Ø± ÙˆØ§Ù‚Ø¹ ÛŒÚ© Ø¸Ø±Ù Ø¨Ø§ Ø¸Ø±ÙÛŒØª Ø§Ø² Ù¾ÛŒØ´ ØªØ¹ÛŒÛŒÙ†â€ŒØ´Ø¯Ù‡ Ø§Ø³Øª.
* Ø§ÛŒÙ† Ø³Ø·Ù„ Ø¨Ù‡â€ŒØµÙˆØ±Øª **Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ (periodically)** Ø¨Ø§ **ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ÛŒÛŒ** Ú©Ù‡ Ù†Ù…Ø§ÛŒÙ†Ø¯Ù‡ Ù…Ø¬ÙˆØ² Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù‡Ø³ØªÙ†Ø¯ØŒ **Ù¾Ø± Ù…ÛŒâ€ŒØ´ÙˆØ¯**.
* Ø§Ú¯Ø± Ø³Ø·Ù„ Ù¾Ø± Ø´ÙˆØ¯ØŒ ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ **Ø¯ÙˆØ± Ø±ÛŒØ®ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ (overflow)** Ùˆ ÙˆØ§Ø±Ø¯ Ø³Ø·Ù„ Ù†Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.
![](./Pictures/4-4.png)
* Ù‡Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øª HTTPØŒ **ÛŒÚ© ØªÙˆÚ©Ù† Ù…ØµØ±Ù Ù…ÛŒâ€ŒÚ©Ù†Ø¯**.
* Ø§Ú¯Ø± **ØªÙˆÚ©Ù† Ú©Ø§ÙÛŒ** Ø¯Ø± Ø³Ø·Ù„ Ø¨Ø§Ø´Ø¯ØŒ ØªÙˆÚ©Ù† Ú©Ù… Ø´Ø¯Ù‡ Ùˆ Ø¯Ø±Ø®ÙˆØ§Ø³Øª **Ø§Ø¬Ø§Ø²Ù‡ Ø¹Ø¨ÙˆØ± Ù¾ÛŒØ¯Ø§ Ù…ÛŒâ€ŒÚ©Ù†Ø¯**.
* Ø§Ú¯Ø± **ØªÙˆÚ©Ù† Ú©Ø§ÙÛŒ Ù†Ø¨Ø§Ø´Ø¯**ØŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øª **Ø±Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯** (Throttle/Drop).

![](./Pictures/4-5.png)
---

### ðŸ”¢ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…:

1. **Bucket Size (Ø¸Ø±ÙÛŒØª Ø³Ø·Ù„)**
   Ø¨ÛŒØ´ØªØ±ÛŒÙ† ØªØ¹Ø¯Ø§Ø¯ ØªÙˆÚ©Ù†ÛŒ Ú©Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¯Ø± Ø³Ø·Ù„ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ø´ÙˆØ¯.

2. **Refill Rate (Ù†Ø±Ø® Ù¾Ø±Ø´Ø¯Ù†)**
   Ù†Ø±Ø®ÛŒ Ú©Ù‡ Ø¯Ø± Ø¢Ù† ØªÙˆÚ©Ù†â€ŒÙ‡Ø§ Ø¨Ù‡â€ŒØµÙˆØ±Øª Ø«Ø§Ø¨Øª ÙˆØ§Ø±Ø¯ Ø³Ø·Ù„ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ØŒ Ù…Ø«Ù„Ø§Ù‹ 4 ØªÙˆÚ©Ù† Ø¯Ø± Ù‡Ø± Ø¯Ù‚ÛŒÙ‚Ù‡.

---

### ðŸŽ¯ Ù…Ø«Ø§Ù„ Ø§Ø² Ø¹Ù…Ù„Ú©Ø±Ø¯:

ÙØ±Ø¶ Ú©Ù†ÛŒÙ…:

* Ø¸Ø±ÙÛŒØª Ø³Ø·Ù„ = 4 ØªÙˆÚ©Ù†
* Ù†Ø±Ø® Ù¾Ø± Ø´Ø¯Ù† = 2 ØªÙˆÚ©Ù† Ø¯Ø± Ù‡Ø± Ø«Ø§Ù†ÛŒÙ‡

Ø¯Ø± Ø§ÛŒÙ† ØµÙˆØ±ØªØŒ Ù‡Ø± Ø«Ø§Ù†ÛŒÙ‡ Ø¯Ùˆ ØªÙˆÚ©Ù† Ø¨Ù‡ Ø³Ø·Ù„ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ ØªØ§ Ø²Ù…Ø§Ù†ÛŒ Ú©Ù‡ Ø³Ø·Ù„ Ø¨Ù‡ Ø¸Ø±ÙÛŒØª Û´ Ø¨Ø±Ø³Ø¯. Ø­Ø§Ù„ Ø§Ú¯Ø± Ø¯Ø± ÛŒÚ© Ø«Ø§Ù†ÛŒÙ‡ 3 Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø±Ø³Ø¯:

* 2 Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø§ÙˆÙ„ ØªÙˆÚ©Ù† Ø¯Ø±ÛŒØ§ÙØª Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯ Ùˆ Ø¹Ø¨ÙˆØ± Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯.
* Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø³ÙˆÙ… Ú†ÙˆÙ† ØªÙˆÚ©Ù† Ù†ÛŒØ³ØªØŒ **Ø±Ø¯ Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯ (HTTP 429)**.

![](./Pictures/4-6.png)

---

### ðŸ§® Ù…Ø­Ø§Ø³Ø¨Ù‡ ØªØ¹Ø¯Ø§Ø¯ Ø³Ø·Ù„â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø²:

ØªØ¹Ø¯Ø§Ø¯ Ø³Ø·Ù„â€ŒÙ‡Ø§ Ø¨Ø³ØªÚ¯ÛŒ Ø¨Ù‡ **Ø³ÛŒØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ø­Ø¯ÙˆØ¯Ø³Ø§Ø²ÛŒ Ù†Ø±Ø®** Ø¯Ø§Ø±Ø¯:

* Ø§Ú¯Ø± Ø¨Ø±Ø§ÛŒ Ù‡Ø± endpoint Ù†Ø±Ø® Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ ØªØ¹Ø±ÛŒÙ Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ø¨Ø±Ø§ÛŒ Ù‡Ø± **user Ùˆ endpoint** Ø¨Ø§ÛŒØ¯ **ÛŒÚ© Ø³Ø·Ù„ Ù…Ø¬Ø²Ø§** Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒÙ….
  Ù…Ø«Ø§Ù„:

  * Ù¾Ø³Øª Ú¯Ø°Ø§Ø´ØªÙ†: 1 Ø¨Ø§Ø± Ø¯Ø± Ø«Ø§Ù†ÛŒÙ‡
  * Ø§ÙØ²ÙˆØ¯Ù† Ø¯ÙˆØ³Øª: 150 Ø¨Ø§Ø± Ø¯Ø± Ø±ÙˆØ²
  * Ù„Ø§ÛŒÚ© Ú©Ø±Ø¯Ù†: 5 Ø¨Ø§Ø± Ø¯Ø± Ø«Ø§Ù†ÛŒÙ‡
    Ù†ØªÛŒØ¬Ù‡ â†’ Û³ Ø³Ø·Ù„ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ú©Ø§Ø±Ø¨Ø±

* Ø§Ú¯Ø± Ù…Ø­Ø¯ÙˆØ¯Ø³Ø§Ø²ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ IP Ø¨Ø§Ø´Ø¯ØŒ Ø¨Ø±Ø§ÛŒ **Ù‡Ø± Ø¢Ø¯Ø±Ø³ IP ÛŒÚ© Ø³Ø·Ù„** Ù„Ø§Ø²Ù… Ø§Ø³Øª.

* Ø§Ú¯Ø± ÛŒÚ© Ø³Ù‚Ù Ú©Ù„ÛŒ Ø¨Ø±Ø§ÛŒ Ú©Ù„ Ø³ÛŒØ³ØªÙ… Ø¯Ø± Ù†Ø¸Ø± Ú¯Ø±ÙØªÙ‡ Ø´ÙˆØ¯ (Ù…Ø«Ù„Ø§Ù‹ 10,000 Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø± Ø«Ø§Ù†ÛŒÙ‡)ØŒ ÛŒÚ© **Ø³Ø·Ù„ Ø¬Ù‡Ø§Ù†ÛŒ (global bucket)** Ù…Ø´ØªØ±Ú© Ø¨ÛŒÙ† Ù‡Ù…Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ú©Ø§ÙÛŒ Ø§Ø³Øª.

---

### âœ… Ù…Ø²Ø§ÛŒØ§ (Pros):

* **Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø³Ø§Ø¯Ù‡**
* **Ù…ØµØ±Ù Ú©Ù… Ø­Ø§ÙØ¸Ù‡**
* **Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² ØªØ±Ø§ÙÛŒÚ© Ø§Ù†ÙØ¬Ø§Ø±ÛŒ (Burst Traffic)** Ø¨Ø±Ø§ÛŒ Ù…Ø¯Øª Ú©ÙˆØªØ§Ù‡
  (ØªØ§ ÙˆÙ‚ØªÛŒ ØªÙˆÚ©Ù† Ø¨Ø§Ø´Ø¯ØŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…Ø¬Ø§Ø² Ø§Ø³Øª Ø­ØªÛŒ Ø§Ú¯Ø± ÙØ±Ø§ØªØ± Ø§Ø² Ù†Ø±Ø® Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ Ø¨Ø§Ø´Ø¯.)

---

### âŒ Ù…Ø¹Ø§ÛŒØ¨ (Cons):

* Ù†ÛŒØ§Ø² Ø¨Ù‡ **ØªÙ†Ø¸ÛŒÙ… Ø¨Ù‡ÛŒÙ†Ù‡ Ø¯Ùˆ Ù¾Ø§Ø±Ø§Ù…ØªØ±**:

  * Ø¸Ø±ÙÛŒØª Ø³Ø·Ù„ (bucket size)
  * Ù†Ø±Ø® Ù¾Ø± Ø´Ø¯Ù† (refill rate)

  Ø§Ú¯Ø± Ø§ÛŒÙ† Ù…Ù‚Ø§Ø¯ÛŒØ± Ø¨Ù‡â€ŒØ¯Ø±Ø³ØªÛŒ ØªÙ†Ø¸ÛŒÙ… Ù†Ø´ÙˆÙ†Ø¯ØŒ ÛŒØ§ Ø¨ÛŒØ´â€ŒØ§Ø²Ø­Ø¯ Ø³Ø®ØªÚ¯ÛŒØ±Ø§Ù†Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ ÛŒØ§ Ø¨ÛŒØ´â€ŒØ§Ø²Ø­Ø¯ Ú¯Ø´Ø§Ø¯Ù‡â€ŒØ¯Ø³ØªØŒ Ú©Ù‡ Ù‡Ø± Ø¯Ùˆ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ ØªØ¬Ø±Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø±Ø§ ØªØ­Øª ØªØ£Ø«ÛŒØ± Ù‚Ø±Ø§Ø± Ø¯Ù‡Ù†Ø¯.

---

ðŸ“š **Ù…Ù†Ø§Ø¨Ø¹:**

* \[5] Amazon API Gateway â€“ Throttle API Requests: [https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-request-throttling.html](https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-request-throttling.html)
* \[6] Stripe API Rate Limiting: [https://stripe.com/docs/rate-limits](https://stripe.com/docs/rate-limits)
* [Designing a Scalable Rate Limiter â€“ High Scalability Blog](http://highscalability.com/blog/2016/4/20/design-patterns-for-rate-limiting.html)
* [Google API Quotas](https://developers.google.com/docs/api/limits)

---

ðŸ” **Ù†Ú©ØªÙ‡ ØªÚ©Ù…ÛŒÙ„ÛŒ**: Ø¯Ø± Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø¨Ø§ Ø³Ø§ÛŒØ± Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ØŒ Token Bucket Ø¨ÛŒØ´ØªØ± Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø¯Ù‡Ø§ÛŒÛŒ Ù…Ù†Ø§Ø³Ø¨ Ø§Ø³Øª Ú©Ù‡ **ØªØ±Ø§ÙÛŒÚ© Ù†Ø§Ú¯Ù‡Ø§Ù†ÛŒ Ùˆ Ø§Ù†ÙØ¬Ø§Ø±ÛŒ** Ø¯Ø§Ø´ØªÙ‡ Ùˆ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ú©Ù†ØªØ±Ù„ Ø¢Ù† ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯ ÙˆÙ„ÛŒ Ø¯Ø± Ø¹ÛŒÙ† Ø­Ø§Ù„ Ù†Ø¨Ø§ÛŒØ¯ Ù…Ø§Ù†Ø¹ Ø§Ø² Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ù†Ø·Ù‚ÛŒ Ùˆ Ù…Ø¬Ø§Ø² Ø´ÙˆØ¯.

## Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Leaking Bucket (Ø³Ø·Ù„ Ù†Ø´Øªâ€ŒÙ¾Ø°ÛŒØ±)

Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… **Leaking Bucket** (Ø³Ø·Ù„ Ù†Ø´Øªâ€ŒÙ¾Ø°ÛŒØ±) Ø§Ø² Ù†Ø¸Ø± Ù…ÙÙ‡ÙˆÙ…ÛŒ Ø´Ø¨ÛŒÙ‡ Ø¨Ù‡ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… **Token Bucket** Ø§Ø³ØªØŒ Ø¨Ø§ Ø§ÛŒÙ† ØªÙØ§ÙˆØª Ú©Ù‡ Ø¯Ø± Ø§ÛŒÙ† Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… **Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø¨Ø§ Ù†Ø±Ø® Ø«Ø§Ø¨Øª Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯**. Ø§ÛŒÙ† ÙˆÛŒÚ˜Ú¯ÛŒ Ø¨Ø§Ø¹Ø« Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ú©Ù‡ Leaking Bucket Ø¨Ø±Ø§ÛŒ Ø³Ù†Ø§Ø±ÛŒÙˆÙ‡Ø§ÛŒÛŒ Ú©Ù‡ **Ø®Ø±ÙˆØ¬ÛŒ ÛŒÚ©Ù†ÙˆØ§Ø®Øª Ùˆ Ù¾Ø§ÛŒØ¯Ø§Ø± (Stable Outflow Rate)** Ù†ÛŒØ§Ø² Ø¯Ø§Ø±Ù†Ø¯ØŒ Ø¨Ø³ÛŒØ§Ø± Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø§Ø´Ø¯.

---

### ðŸ‘ˆ Ù†Ø­ÙˆÙ‡ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Leaking Bucket:

* Ø§ÛŒÙ† Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ÛŒÚ© **ØµÙ Ø¨Ù‡ ØµÙˆØ±Øª FIFO (First-In-First-Out)** Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
* Ø²Ù…Ø§Ù†ÛŒ Ú©Ù‡ ÛŒÚ© Ø¯Ø±Ø®ÙˆØ§Ø³Øª ÙˆØ§Ø±Ø¯ Ø³ÛŒØ³ØªÙ… Ù…ÛŒâ€ŒØ´ÙˆØ¯:

  * Ø§Ú¯Ø± **ØµÙ Ù¾Ø± Ù†Ø¨Ø§Ø´Ø¯**ØŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ù‡ **ØµÙ Ø§ÙØ²ÙˆØ¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯**.
  * Ø§Ú¯Ø± **ØµÙ Ù¾Ø± Ø¨Ø§Ø´Ø¯**ØŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øª **Ø±Ø¯ (drop)** Ù…ÛŒâ€ŒØ´ÙˆØ¯.
* Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø§Ø² ØµÙ Ø¨Ø§ ÛŒÚ© **Ù†Ø±Ø® Ø®Ø±ÙˆØ¬ Ø«Ø§Ø¨Øª (Outflow Rate)** Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.

![](./Pictures/4-7.png)
---

### ðŸ”¢ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…:

1. **Bucket Size (Ø¸Ø±ÙÛŒØª Ø³Ø·Ù„)**
   Ù‡Ù…Ø§Ù† Ø§Ù†Ø¯Ø§Ø²Ù‡ ØµÙ Ø§Ø³Øª Ùˆ Ù…Ø´Ø®Øµ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ú†Ù†Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø¨Ø§Ø´Ù†Ø¯.

2. **Outflow Rate (Ù†Ø±Ø® Ø®Ø±ÙˆØ¬)**
   ØªØ¹ÛŒÛŒÙ† Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ú†Ù†Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø± ÛŒÚ© Ø¨Ø§Ø²Ù‡ Ø²Ù…Ø§Ù†ÛŒ Ù…Ø´Ø®Øµ (Ù…Ø«Ù„Ø§Ù‹ Ø¯Ø± Ù‡Ø± Ø«Ø§Ù†ÛŒÙ‡) Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø§Ø² ØµÙ Ø®Ø§Ø±Ø¬ Ùˆ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø´ÙˆÙ†Ø¯.

---

### ðŸ›’ Ù…Ø«Ø§Ù„ ÙˆØ§Ù‚Ø¹ÛŒ:

Ø´Ø±Ú©Øª ØªØ¬Ø§Ø±Øª Ø§Ù„Ú©ØªØ±ÙˆÙ†ÛŒÚ© **Shopify** Ø§Ø² Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… **Leaking Bucket** Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ **Rate Limiting** Ø¯Ø± Ø²ÛŒØ±Ø³Ø§Ø®Øªâ€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
ðŸ“š Ù…Ù†Ø¨Ø¹: \[7] Shopify Rate Limits â€“ [https://shopify.dev/docs/api/usage/rate-limits](https://shopify.dev/docs/api/usage/rate-limits)

---

### âœ… Ù…Ø²Ø§ÛŒØ§ (Pros):

* **Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¨Ù‡ÛŒÙ†Ù‡ Ø§Ø² Ø­Ø§ÙØ¸Ù‡** Ø¨Ù‡â€ŒØ¯Ù„ÛŒÙ„ ØµÙ Ø¨Ø§ Ø§Ù†Ø¯Ø§Ø²Ù‡ Ù…Ø­Ø¯ÙˆØ¯.
* **Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù¾Ø§ÛŒØ¯Ø§Ø±** Ùˆ ÛŒÚ©Ù†ÙˆØ§Ø®Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ØŒ Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ø§ÛŒ Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ù†ÛŒØ§Ø² Ø¨Ù‡ **Ø®Ø±ÙˆØ¬ÛŒ Ø¨Ø§ Ù†Ø±Ø® Ù…Ø´Ø®Øµ** Ø¯Ø§Ø±Ù†Ø¯ØŒ Ù…Ø«Ù„ Ù¾Ø±Ø¯Ø§Ø²Ø´ ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ø§Ù„ÛŒ ÛŒØ§ Ù„Ø§Ú¯ Ø³Ø±ÙˆØ±Ù‡Ø§.

---

### âŒ Ù…Ø¹Ø§ÛŒØ¨ (Cons):

* Ø¯Ø± Ø´Ø±Ø§ÛŒØ· **ØªØ±Ø§ÙÛŒÚ© Ø§Ù†ÙØ¬Ø§Ø±ÛŒ (Burst Traffic)**ØŒ ØµÙ Ø³Ø±ÛŒØ¹ Ù¾Ø± Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ Ø¯Ø± ØµÙ Ø¨Ø§Ù‚ÛŒ Ù…ÛŒâ€ŒÙ…Ø§Ù†Ù†Ø¯Ø› Ø¯Ø± Ù†ØªÛŒØ¬Ù‡ØŒ **Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ØªØ± Ù†ÛŒØ² Ø±Ø¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯** Ø­ØªÛŒ Ø§Ú¯Ø± Ù…Ù†Ø·Ù‚ÛŒâ€ŒØªØ± Ø¨Ø§Ø´Ù†Ø¯.
* Ù…Ø§Ù†Ù†Ø¯ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Token BucketØŒ **ØªÙ†Ø¸ÛŒÙ… Ø¯Ù‚ÛŒÙ‚ Ø¯Ùˆ Ù¾Ø§Ø±Ø§Ù…ØªØ± Ø§ØµÙ„ÛŒ** (Ø§Ù†Ø¯Ø§Ø²Ù‡ Ø³Ø·Ù„ Ùˆ Ù†Ø±Ø® Ø®Ø±ÙˆØ¬) Ù…Ù…Ú©Ù† Ø§Ø³Øª Ú†Ø§Ù„Ø´â€ŒØ¨Ø±Ø§Ù†Ú¯ÛŒØ² Ø¨Ø§Ø´Ø¯.

---

### ðŸ” Ù†Ú©ØªÙ‡ ØªÚ©Ù…ÛŒÙ„ÛŒ:

Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Leaking Bucket Ø¨Ø±Ø®Ù„Ø§Ù Token Bucket **Ø§Ø¬Ø§Ø²Ù‡ ØªØ±Ø§ÙÛŒÚ© Ø§Ù†ÙØ¬Ø§Ø±ÛŒ (burst)** Ø±Ø§ Ù†Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ùˆ Ù‡Ù…ÙˆØ§Ø±Ù‡ ØªÙ„Ø§Ø´ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ **Ø®Ø±ÙˆØ¬ÛŒ ÛŒÚ©Ù†ÙˆØ§Ø®ØªÛŒ** Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯. Ø¨Ù†Ø§Ø¨Ø±Ø§ÛŒÙ†ØŒ Ø§Ú¯Ø± Ø³ÛŒØ³ØªÙ…ÛŒ Ø¯Ø§Ø±ÛŒØ¯ Ú©Ù‡ Ø¸Ø±ÙÛŒØª Ù…Ø­Ø¯ÙˆØ¯ÛŒ Ø¨Ø±Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù‡Ù…â€ŒØ²Ù…Ø§Ù† Ø¯Ø§Ø±Ø¯ØŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Leaky Bucket Ø§Ù†ØªØ®Ø§Ø¨ Ø¨Ù‡ØªØ±ÛŒ Ù†Ø³Ø¨Øª Ø¨Ù‡ Token Bucket Ø®ÙˆØ§Ù‡Ø¯ Ø¨ÙˆØ¯.

---

ðŸ“š Ù…Ù†Ø§Ø¨Ø¹:

* \[7] Shopify API Rate Limits: [https://shopify.dev/docs/api/usage/rate-limits](https://shopify.dev/docs/api/usage/rate-limits)
* [Designing Scalable Rate Limiting â€“ Cloudflare Engineering Blog](https://blog.cloudflare.com/counting-things-a-lot-of-different-things/)
* [Rate Limiting Algorithms â€“ Stripe Docs](https://stripe.com/docs/rate-limits)

---

ðŸ“ Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø³Ø±ÛŒØ¹:

| ÙˆÛŒÚ˜Ú¯ÛŒ              | Token Bucket      | Leaking Bucket             |
| ------------------ | ----------------- | -------------------------- |
| Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Burst  | Ø¯Ø§Ø±Ø¯ âœ…            | Ù†Ø¯Ø§Ø±Ø¯ âŒ                    |
| Ù†Ø±Ø® Ø®Ø±ÙˆØ¬ÛŒ          | Ø§Ù†Ø¹Ø·Ø§Ùâ€ŒÙ¾Ø°ÛŒØ±       | Ø«Ø§Ø¨Øª                       |
| Ù¾ÛŒÚ†ÛŒØ¯Ú¯ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ | Ù¾Ø§ÛŒÛŒÙ†             | Ù…ØªÙˆØ³Ø·                      |
| Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ø§ÛŒ         | API Ø¨Ø§ Ø§Ù†Ø¹Ø·Ø§Ù Ù†Ø±Ø® | Ù¾Ø±Ø¯Ø§Ø²Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ø­Ø¯ÙˆØ¯ Ùˆ ÛŒÚ©Ù†ÙˆØ§Ø®Øª |

---
Ø¯Ø± Ø§Ø¯Ø§Ù…Ù‡ Ú©Ø¯ Ú©Ø§Ù…Ù„ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… **Leaking Bucket** Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Redis Ùˆ Ø²Ø¨Ø§Ù† Python Ø¢ÙˆØ±Ø¯Ù‡ Ø´Ø¯Ù‡ Ø§Ø³Øª. Ø§ÛŒÙ† Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø± Ù¾Ø§ÛŒÙ‡ ÛŒÚ© **ØµÙ (FIFO queue)** Ø¨Ø±Ø§ÛŒ Ù†Ú¯Ù‡â€ŒØ¯Ø§Ø±ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ùˆ Ø²Ù…Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø¢Ù†â€ŒÙ‡Ø§ Ø¯Ø± Redis Ø§Ø³Øª. Ø³Ù¾Ø³ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø¨Ø§ Ù†Ø±Ø® Ø«Ø§Ø¨Øª Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.

---

### ðŸ“Œ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§ÛŒÙ† Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ:

* Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Redis Ù„ÛŒØ³Øª (List) Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ ØµÙ.
* Ù†Ø±Ø® Ø®Ø±ÙˆØ¬ÛŒ (outflow rate) Ø«Ø§Ø¨Øª Ø§Ø³Øª.
* Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø¯Ø± ØµÙˆØ±Øª Ù¾Ø± Ø¨ÙˆØ¯Ù† ØµÙ Ø±Ø¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.

---

### ðŸ§± Ù¾ÛŒØ´â€ŒÙ†ÛŒØ§Ø²

```bash
pip install redis
```

---

### ðŸ“„ ÙØ§ÛŒÙ„: `leaky_bucket.py`

```python
import redis
import time

class LeakyBucketRateLimiter:
    def __init__(self, redis_client, bucket_key: str, capacity: int, outflow_rate_per_sec: float):
        self.redis = redis_client
        self.bucket_key = bucket_key         # Ú©Ù„ÛŒØ¯ bucket Ø¯Ø± Redis
        self.capacity = capacity             # Ø¸Ø±ÙÛŒØª ØµÙ
        self.outflow_rate = outflow_rate_per_sec  # Ù†Ø±Ø® Ø®Ø±ÙˆØ¬ Ø¨Ø± Ø­Ø³Ø¨ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø± Ø«Ø§Ù†ÛŒÙ‡
        self.last_drip_key = f"{bucket_key}:last_drip"

    def _drip(self):
        # Ø­Ø°Ù Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†Ø±Ø® Ø®Ø±ÙˆØ¬
        now = time.time()
        last_drip = self.redis.get(self.last_drip_key)
        last_drip = float(last_drip) if last_drip else now

        elapsed = now - last_drip
        leak_count = int(elapsed * self.outflow_rate)

        if leak_count > 0:
            for _ in range(leak_count):
                self.redis.lpop(self.bucket_key)
            self.redis.set(self.last_drip_key, now)

    def allow_request(self) -> bool:
        self._drip()

        current_length = self.redis.llen(self.bucket_key)
        if current_length < self.capacity:
            self.redis.rpush(self.bucket_key, time.time())
            return True
        else:
            return False
```

---

### ðŸ§ª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Rate Limiter

```python
if __name__ == "__main__":
    r = redis.Redis(host='localhost', port=6379, db=0)
    
    # Ø¸Ø±ÙÛŒØª 10ØŒ Ù†Ø±Ø® Ø®Ø±ÙˆØ¬ 2 Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø± Ø«Ø§Ù†ÛŒÙ‡
    limiter = LeakyBucketRateLimiter(
        redis_client=r,
        bucket_key="leaky:bucket:ip:192.168.1.100",
        capacity=10,
        outflow_rate_per_sec=2
    )

    for i in range(20):
        allowed = limiter.allow_request()
        print(f"Request {i+1} allowed: {allowed}")
        time.sleep(0.2)  # Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø³Ø±ÛŒØ¹â€ŒØªØ± Ø§Ø² Ù†Ø±Ø® Ø®Ø±ÙˆØ¬
```

---

### ðŸ§  Ù†Ú©Ø§Øª ÙÙ†ÛŒ Ùˆ Ù…Ø²Ø§ÛŒØ§:

| Ù…ÙˆØ±Ø¯          | ØªÙˆØ¶ÛŒØ­                                                                          |
| ------------- | ------------------------------------------------------------------------------ |
| ØµÙ FIFO       | Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯Ù‡ Ø¨Ø§ Redis List (`rpush` Ùˆ `lpop`)                                |
| Ù†Ø±Ø® Ø«Ø§Ø¨Øª Ø®Ø±ÙˆØ¬ | Ø§Ø² Ø±ÙˆÛŒ Ø§Ø®ØªÙ„Ø§Ù Ø²Ù…Ø§Ù†ÛŒ Ø¨ÛŒÙ† `last_drip` Ùˆ `now` Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯                      |
| Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ø§ÛŒ    | Ø³Ù†Ø§Ø±ÛŒÙˆÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¨Ø§ Ù†Ø±Ø® ÛŒÚ©Ù†ÙˆØ§Ø®Øª Ø¯Ø§Ø±Ù†Ø¯ (Ù…Ø«Ù„ ØµÙ Ø§ÛŒÙ…ÛŒÙ„ØŒ Ú†Ø§Ù¾ØŒ API Ú©Ù†Ø¯) |

---

### ðŸ“š Ù…Ù†Ø§Ø¨Ø¹ Ù…Ø¹ØªØ¨Ø± Ø¨Ø±Ø§ÛŒ Ø¯Ø±Ú© Ø¹Ù…ÛŒÙ‚â€ŒØªØ±:

* [Redis Data Structures](https://redis.io/docs/data-types/)
* Ú©ØªØ§Ø¨ Designing Data-Intensive Applications (Martin Kleppmann) â€” ÙØµÙ„ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Rate Limiting
* Ù…Ù‚Ø§Ù„Ù‡ Ø±Ø³Ù…ÛŒ Shopify: [Rate Limiting at Shopify](https://engineering.shopify.com/blogs/engineering/rate-limiting-shopify)

---

Ø§Ú¯Ø± Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù†Ø³Ø®Ù‡ **Distributed** ÛŒØ§ Ø¨Ø§ **Token TTL Ø³ÙØ§Ø±Ø´ÛŒ** Ø¯Ø§Ø±ÛŒ ÛŒØ§ Ø¨Ø®ÙˆØ§Ù‡ÛŒ Ø¨Ø§ **Lua Script** Ø¨Ø±Ø§ÛŒ Ø§ØªÙ…ÛŒÚ© Ø¨ÙˆØ¯Ù† Ø¨Ù‡ØªØ± Ú©Ø§Ø± Ú©Ù†ÛŒØŒ Ø§Ø·Ù„Ø§Ø¹ Ø¨Ø¯Ù‡ ØªØ§ Ù†Ø³Ø®Ù‡ Ù¾ÛŒØ´Ø±ÙØªÙ‡â€ŒØªØ± Ù†ÛŒØ² Ø§Ø±Ø§Ø¦Ù‡ Ø´ÙˆØ¯.


## Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Fixed Window Counter (Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡â€ŒÛŒ Ù¾Ù†Ø¬Ø±Ù‡â€ŒÛŒ Ø«Ø§Ø¨Øª)

Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… **Fixed Window Counter** ÛŒÚ©ÛŒ Ø§Ø² Ø³Ø§Ø¯Ù‡â€ŒØªØ±ÛŒÙ† Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ **Rate Limiting** Ø§Ø³Øª Ú©Ù‡ Ø§Ø² Ø·Ø±ÛŒÙ‚ ØªÙ‚Ø³ÛŒÙ… Ø¨Ø§Ø²Ù‡ Ø²Ù…Ø§Ù†ÛŒ Ø¨Ù‡ **Ù¾Ù†Ø¬Ø±Ù‡â€ŒÙ‡Ø§ÛŒ Ø²Ù…Ø§Ù†ÛŒ Ø«Ø§Ø¨Øª** Ùˆ Ø´Ù…Ø§Ø±Ø´ ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø¯Ø± Ù‡Ø± Ù¾Ù†Ø¬Ø±Ù‡ØŒ Ù†Ø±Ø® Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø±Ø§ Ú©Ù†ØªØ±Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

---

### ðŸ‘ˆ Ù†Ø­ÙˆÙ‡ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…:

* Ø®Ø· Ø²Ù…Ø§Ù†ÛŒ Ø¨Ù‡ **Ø¨Ø§Ø²Ù‡â€ŒÙ‡Ø§ÛŒ Ø²Ù…Ø§Ù†ÛŒ Ø¨Ø§ Ø·ÙˆÙ„ Ø«Ø§Ø¨Øª** (Ù…Ø«Ù„Ø§Ù‹ Û± Ø«Ø§Ù†ÛŒÙ‡ØŒ Û± Ø¯Ù‚ÛŒÙ‚Ù‡) ØªÙ‚Ø³ÛŒÙ… Ù…ÛŒâ€ŒØ´ÙˆØ¯.
* Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ù¾Ù†Ø¬Ø±Ù‡â€ŒÛŒ Ø²Ù…Ø§Ù†ÛŒØŒ ÛŒÚ© **Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡** Ø¯Ø± Ù†Ø¸Ø± Ú¯Ø±ÙØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
* **Ù‡Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø±ÛŒØ§ÙØªÛŒØŒ Ù…Ù‚Ø¯Ø§Ø± Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡â€ŒÛŒ Ø¢Ù† Ù¾Ù†Ø¬Ø±Ù‡ Ø±Ø§ ÛŒÚ© ÙˆØ§Ø­Ø¯ Ø§ÙØ²Ø§ÛŒØ´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.**
* Ø§Ú¯Ø± Ù…Ù‚Ø¯Ø§Ø± Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø¨Ù‡ Ø¢Ø³ØªØ§Ù†Ù‡ ØªØ¹ÛŒÛŒÙ†â€ŒØ´Ø¯Ù‡ (threshold) Ø¨Ø±Ø³Ø¯ØŒ **Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ ØªØ§ Ø¢ØºØ§Ø² Ù¾Ù†Ø¬Ø±Ù‡ Ø¨Ø¹Ø¯ÛŒ Ø±Ø¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.**

---

### ðŸ”¢ Ù…Ø«Ø§Ù„ Ù…Ù„Ù…ÙˆØ³:

ÙØ±Ø¶ Ú©Ù†ÛŒØ¯ Ø³ÛŒØ³ØªÙ… Ø­Ø¯Ø§Ú©Ø«Ø± Ø§Ø¬Ø§Ø²Ù‡â€ŒÛŒ Û³ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø± Ù‡Ø± Ø«Ø§Ù†ÛŒÙ‡ Ø±Ø§ Ø¯Ø§Ø±Ø¯. Ø¯Ø± Ù‡Ø± Ù¾Ù†Ø¬Ø±Ù‡â€ŒÛŒ ÛŒÚ©â€ŒØ«Ø§Ù†ÛŒÙ‡â€ŒØ§ÛŒØŒ ØªÙ†Ù‡Ø§ Û³ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…Ø¬Ø§Ø² Ø§Ø³Øª. Ø§Ú¯Ø± Ø¨ÛŒØ´ØªØ± Ø§Ø² Û³ Ø¯Ø±Ø®ÙˆØ§Ø³Øª ÙˆØ§Ø±Ø¯ Ø´ÙˆØ¯ØŒ Ù…Ø§Ø¨Ù‚ÛŒ **Ø±Ø¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯**.

![](./Pictures/4-8.png)

---

### âš ï¸ Ù…Ø³Ø¦Ù„Ù‡ Ù…Ù‡Ù…: Ù„Ø¨Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾Ù†Ø¬Ø±Ù‡ (Edge Effect)

ÛŒÚ©ÛŒ Ø§Ø² Ù…Ø´Ú©Ù„Ø§Øª Ø§ØµÙ„ÛŒ Ø§ÛŒÙ† Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…ØŒ **ØªØ±Ø§ÙÛŒÚ© Ø§Ù†ÙØ¬Ø§Ø±ÛŒ (Burst Traffic)** Ø¯Ø± Ù„Ø¨Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾Ù†Ø¬Ø±Ù‡â€ŒÙ‡Ø§ÛŒ Ø²Ù…Ø§Ù†ÛŒ Ø§Ø³Øª. Ø¯Ø± Ø§ÛŒÙ† Ø­Ø§Ù„ØªØŒ ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø§Ø² Ø³ÛŒØ³ØªÙ… Ø¹Ø¨ÙˆØ± Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯ Ù…Ù…Ú©Ù† Ø§Ø³Øª **Ø¨ÛŒØ´ØªØ± Ø§Ø² Ø¸Ø±ÙÛŒØª Ù…Ø¬Ø§Ø²** Ø¨Ø§Ø´Ø¯.

ðŸ” Ù…Ø«Ø§Ù„:

ÙØ±Ø¶ Ú©Ù†ÛŒØ¯ Ø­Ø¯Ø§Ú©Ø«Ø± Ûµ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø± Ù‡Ø± Ø¯Ù‚ÛŒÙ‚Ù‡ Ù…Ø¬Ø§Ø² Ø§Ø³Øª. Ø¯Ø± Ø´Ú©Ù„ **Figure 4-9**:

* Ø¨ÛŒÙ† Ø³Ø§Ø¹Øª Û²:Û°Û°:Û°Û° ØªØ§ Û²:Û°Û±:Û°Û°ØŒ Ù¾Ù†Ø¬ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯.
* Ø¨ÛŒÙ† Û²:Û°Û±:Û°Û° ØªØ§ Û²:Û°Û²:Û°Û°ØŒ Ù¾Ù†Ø¬ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯ÛŒÚ¯Ø± Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯.

Ø§Ù…Ø§ Ø¯Ø± Ø¨Ø§Ø²Ù‡â€ŒÛŒ ØªØ±Ú©ÛŒØ¨ÛŒ **Û²:Û°Û°:Û³Û° ØªØ§ Û²:Û°Û±:Û³Û°**ØŒ Ø¹Ù…Ù„Ø§Ù‹ **Û±Û° Ø¯Ø±Ø®ÙˆØ§Ø³Øª** Ø¹Ø¨ÙˆØ± Ú©Ø±Ø¯Ù‡â€ŒØ§Ù†Ø¯ØŒ Ú©Ù‡ **Ø¯Ùˆ Ø¨Ø±Ø§Ø¨Ø± Ø­Ø¯ Ù…Ø¬Ø§Ø²** Ø§Ø³Øª. Ø§ÛŒÙ† Ø§ØªÙØ§Ù‚ Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ ØªÙ†Ø¸ÛŒÙ… Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¯Ù‚ÛŒÙ‚Ù‡â€ŒÙ‡Ø§ÛŒ Ú¯Ø±Ø¯ (Ù…Ø§Ù†Ù†Ø¯ `HH:MM:00`) Ø±Ø® Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ùˆ Ø¨Ù‡ Ø¢Ù† **Edge Effect** Ú¯ÙØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.


![](./Pictures/4-9.png)
---

### âœ… Ù…Ø²Ø§ÛŒØ§ (Pros):

* **Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø³Ø§Ø¯Ù‡** Ùˆ **Ø¯Ø±Ú© Ø¢Ø³Ø§Ù†**.
* **Ù…ØµØ±Ù Ú©Ù… Ø­Ø§ÙØ¸Ù‡**ØŒ Ø²ÛŒØ±Ø§ ØªÙ†Ù‡Ø§ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù†Ú¯Ù‡â€ŒØ¯Ø§Ø´ØªÙ† Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ù¾Ù†Ø¬Ø±Ù‡â€ŒÛŒ Ø²Ù…Ø§Ù†ÛŒ Ø¯Ø§Ø±ÛŒÙ….
* **Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ§Ø±Ø¯ÛŒ Ú©Ù‡ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø²Ù…Ø§Ù†ÛŒ Ø¯Ù‚ÛŒÙ‚** (Ù…Ø«Ù„Ø§Ù‹ Û± Ø¯Ù‚ÛŒÙ‚Ù‡â€ŒØ§ÛŒ ÛŒØ§ Û± Ø³Ø§Ø¹ØªÙ‡) Ù†ÛŒØ§Ø² Ø§Ø³Øª Ùˆ **ØªØºÛŒÛŒØ±Ø§Øª Ù†Ø±Ø® Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø®ÛŒÙ„ÛŒ Ù…Ù‡Ù… Ù†ÛŒØ³Øª**.

---

### âŒ Ù…Ø¹Ø§ÛŒØ¨ (Cons):

* Ø¯Ø± Ù„Ø¨Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾Ù†Ø¬Ø±Ù‡ØŒ Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø³ÛŒØ³ØªÙ… **Ø¨ÛŒØ´ Ø§Ø² Ø­Ø¯ Ù…Ø¬Ø§Ø² Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø±Ø§ Ø¨Ù¾Ø°ÛŒØ±Ø¯** (Edge Effect).
* **Ø¹Ø¯Ù… ØªØ­Ù…Ù„ Ø§Ù†ÙØ¬Ø§Ø± ØªØ±Ø§ÙÛŒÚ©ÛŒ Ø¯Ø± Ø²Ù…Ø§Ù† Ú©ÙˆØªØ§Ù‡**.

---

### ðŸ“Œ Ù†Ú©ØªÙ‡ ØªÚ©Ù…ÛŒÙ„ÛŒ:

Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… **Fixed Window** Ø²Ù…Ø§Ù†ÛŒ Ù…ÙÛŒØ¯ Ø§Ø³Øª Ú©Ù‡:

* Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ù¾Ø±Ø§Ú©Ù†Ø¯Ú¯ÛŒ ÛŒÚ©Ù†ÙˆØ§Ø®Øª Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù†Ø¯.
* Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø¯Ù‚ÛŒÙ‚ Ùˆ Ø³Ø§Ø¯Ù‡ (Ù…Ø«Ù„Ø§Ù‹ "Ûµ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø± Ø¯Ù‚ÛŒÙ‚Ù‡") Ù…Ù‡Ù…â€ŒØªØ± Ø§Ø² Ú©Ù†ØªØ±Ù„ Ø¯Ù‚ÛŒÙ‚ Ø¨Ø§Ø± Ø¯Ø± Ù‡Ø± Ù„Ø­Ø¸Ù‡ Ø¨Ø§Ø´Ø¯.

Ø¯Ø± ØºÛŒØ± Ø§ÛŒÙ†â€ŒØµÙˆØ±ØªØŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒÛŒ Ù…Ø«Ù„ **Sliding Window** ÛŒØ§ **Token Bucket** Ø¨Ø±Ø§ÛŒ Ú©Ù†ØªØ±Ù„ Ø¨Ù‡ØªØ± Ø¨Ø§Ø± Ùˆ Ú©Ø§Ù‡Ø´ Ù…Ø´Ú©Ù„Ø§Øª Ù„Ø¨Ù‡â€ŒØ§ÛŒ ØªÙˆØµÛŒÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.

---

ðŸ“š Ù…Ù†Ø§Ø¨Ø¹:

* [Rate Limiting Strategies and Algorithms - Cloudflare](https://blog.cloudflare.com/counting-things-a-lot-of-different-things/)
* [API Rate Limiting â€“ Stripe](https://stripe.com/docs/rate-limits)
* [YouTube Engineering â€“ Throttle Requests at Scale](https://youtubeeng.blogspot.com/2017/07/how-youtube-scales-rate-limiting.html)

---
Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… **Sliding Window Log** ÛŒÚ©ÛŒ Ø§Ø² Ø¯Ù‚ÛŒÙ‚â€ŒØªØ±ÛŒÙ† Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Rate Limiting Ø§Ø³Øª Ú©Ù‡ Ù…Ø´Ú©Ù„ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… **Fixed Window Counter** Ø±Ø§ Ø­Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø¯Ø± Ø§Ø¯Ø§Ù…Ù‡ Ø§ÛŒÙ† Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ø±Ø§ Ù…Ø±Ø­Ù„Ù‡â€ŒØ¨Ù‡â€ŒÙ…Ø±Ø­Ù„Ù‡ Ùˆ Ø¨Ø§ Ø¬Ø²Ø¦ÛŒØ§Øª Ú©Ø§Ù…Ù„ Ø¨Ø±Ø§ÛŒØª ØªÙˆØ¶ÛŒØ­ Ù…ÛŒâ€ŒØ¯Ù‡Ù…:


---
## Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Sliding Window Log (Ø«Ø¨Øª Ø²Ù…Ø§Ù†ÛŒ Ù¾Ù†Ø¬Ø±Ù‡â€Œ Ù„ØºØ²Ø§Ù†)

Ù‡Ù…Ø§Ù†â€ŒØ·ÙˆØ± Ú©Ù‡ Ù¾ÛŒØ´â€ŒØªØ± Ø¨Ø­Ø« Ø´Ø¯ØŒ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… **Fixed Window Counter** (Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡â€Œ Ù¾Ù†Ø¬Ø±Ù‡â€ŒÛŒ Ø«Ø§Ø¨Øª) ÛŒÚ© Ù…Ø´Ú©Ù„ Ø§Ø³Ø§Ø³ÛŒ Ø¯Ø§Ø±Ø¯: Ø§ÛŒÙ† Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ø§Ø¬Ø§Ø²Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ ØªØ¹Ø¯Ø§Ø¯ Ø¨ÛŒØ´ØªØ±ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø± Ù†Ù‚Ø§Ø· Ù…Ø±Ø²ÛŒ Ø¨ÛŒÙ† Ø¯Ùˆ Ù¾Ù†Ø¬Ø±Ù‡ Ø²Ù…Ø§Ù†ÛŒ Ø¹Ø¨ÙˆØ± Ú©Ù†Ù†Ø¯.
Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… **Sliding Window Log** (Ø«Ø¨Øª Ø²Ù…Ø§Ù†ÛŒ Ø¯Ø± Ù¾Ù†Ø¬Ø±Ù‡â€Œ Ù„ØºØ²Ø§Ù†) Ø§ÛŒÙ† Ù…Ø´Ú©Ù„ Ø±Ø§ Ø¨Ø±Ø·Ø±Ù Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

Ù†Ø­ÙˆÙ‡ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ø¨Ù‡ Ø§ÛŒÙ† ØµÙˆØ±Øª Ø§Ø³Øª:

* Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… ØªÙ…Ø§Ù… **timestamp**â€ŒÙ‡Ø§ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ (Ø¨Ø±Ú†Ø³Ø¨â€ŒÙ‡Ø§ÛŒ Ø²Ù…Ø§Ù†ÛŒ) Ø±Ø§ Ù†Ú¯Ù‡â€Œ Ù…ÛŒâ€ŒØ¯Ø§Ø±Ø¯. Ø§ÛŒÙ† Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ø¯Ø± **cache** (Ø­Ø§ÙØ¸Ù‡ Ù†Ù‡Ø§Ù†) Ù†Ú¯Ù‡â€ŒØ¯Ø§Ø±ÛŒ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ØŒ Ù…Ø§Ù†Ù†Ø¯ **Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø±ØªØ¨ (Sorted Set)** Ø¯Ø± **Redis** \[Ù…Ù†Ø¨Ø¹: Redis Documentation, [https://redis.io/docs/latest/data-types/sorted-sets/](https://redis.io/docs/latest/data-types/sorted-sets/)].

* ÙˆÙ‚ØªÛŒ ÛŒÚ© Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¬Ø¯ÛŒØ¯ ÙˆØ§Ø±Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŒ ØªÙ…Ø§Ù… **timestamp**Ù‡Ø§ÛŒ Ù…Ù†Ù‚Ø¶ÛŒâ€ŒØ´Ø¯Ù‡ (Ù‚Ø¯ÛŒÙ…ÛŒâ€ŒØªØ± Ø§Ø² Ø§Ø¨ØªØ¯Ø§ÛŒ Ù¾Ù†Ø¬Ø±Ù‡ Ø²Ù…Ø§Ù†ÛŒ Ø¬Ø§Ø±ÛŒ) Ø§Ø² log Ø­Ø°Ù Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.

* Ø¨Ø±Ú†Ø³Ø¨ Ø²Ù…Ø§Ù†ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¬Ø¯ÛŒØ¯ Ø¨Ù‡ log Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.

* Ø§Ú¯Ø± Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÛŒ log Ø¨Ø±Ø§Ø¨Ø± ÛŒØ§ Ú©Ù…ØªØ± Ø§Ø² Ø­Ø¯ Ù…Ø¬Ø§Ø² Ø¨Ø§Ø´Ø¯ØŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù¾Ø°ÛŒØ±ÙØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ø¯Ø± ØºÛŒØ± Ø§ÛŒÙ† ØµÙˆØ±ØªØŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø±Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯.

---
## ðŸ“Š Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ ÙˆØ±ÙˆØ¯ÛŒ:

| Ù¾Ø§Ø±Ø§Ù…ØªØ±           | ØªÙˆØ¶ÛŒØ­                                               |
| ----------------- | --------------------------------------------------- |
| `max_requests`    | Ø­Ø¯Ø§Ú©Ø«Ø± ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…Ø¬Ø§Ø² Ø¯Ø± Ø¨Ø§Ø²Ù‡ Ø²Ù…Ø§Ù†ÛŒ Ù…Ø´Ø®Øµ        |
| `time_window_sec` | Ù…Ø¯Øª Ø²Ù…Ø§Ù† Ù¾Ù†Ø¬Ø±Ù‡ Ù„ØºØ²Ø§Ù† (Ù…Ø«Ù„Ø§Ù‹ Û¶Û° Ø«Ø§Ù†ÛŒÙ‡ Ø¨Ø±Ø§ÛŒ ÛŒÚ© Ø¯Ù‚ÛŒÙ‚Ù‡) |

---


#### Ù…Ø«Ø§Ù„ (Ù…Ø·Ø§Ø¨Ù‚ Ø¨Ø§ ØªØµÙˆÛŒØ± Ø´Ú©Ù„ Û´-Û±Û°)

ÙØ±Ø¶ Ú©Ù†ÛŒÙ… Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ù†Ø±Ø® Ù…Ø§ Ø¨Ù‡ Ø§ÛŒÙ† ØµÙˆØ±Øª Ø§Ø³Øª: ÙÙ‚Ø· **Û² Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø± Ù‡Ø± Ø¯Ù‚ÛŒÙ‚Ù‡** Ù…Ø¬Ø§Ø² Ø§Ø³Øª.
Ø§Ú¯Ø±Ú†Ù‡ Ø¯Ø± ÙˆØ§Ù‚Ø¹ÛŒØªØŒ timestampÙ‡Ø§ Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ø¯Ø± Ù‚Ø§Ù„Ø¨ ÛŒÙˆÙ†ÛŒÚ©Ø³ (Unix timestamp) Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ØŒ Ø§Ù…Ø§ Ø¨Ø±Ø§ÛŒ Ø®ÙˆØ§Ù†Ø§ÛŒÛŒ Ø¨Ù‡ØªØ±ØŒ Ø§Ø² Ø²Ù…Ø§Ù† Ù‚Ø§Ø¨Ù„â€ŒØ®ÙˆØ§Ù†Ø¯Ù† Ø§Ù†Ø³Ø§Ù†ÛŒ Ø¯Ø± Ù…Ø«Ø§Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…:

* Ø¯Ø± Ø³Ø§Ø¹Øª **Û±:Û°Û°:Û°Û±**ØŒ log Ø®Ø§Ù„ÛŒ Ø§Ø³ØªØŒ Ø¨Ù†Ø§Ø¨Ø±Ø§ÛŒÙ† Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù¾Ø°ÛŒØ±ÙØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.

* Ø¯Ø± Ø³Ø§Ø¹Øª **Û±:Û°Û°:Û³Û°**ØŒ Ø²Ù…Ø§Ù† Û±:Û°Û°:Û³Û° Ø¨Ù‡ log Ø§ÙØ²ÙˆØ¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ø§Ú©Ù†ÙˆÙ† log Ø¯Ø§Ø±Ø§ÛŒ Û² timestamp Ø§Ø³ØªØŒ Ú©Ù‡ Ú©Ù…ØªØ± ÛŒØ§ Ø¨Ø±Ø§Ø¨Ø± Ø¨Ø§ Ø­Ø¯ Ù…Ø¬Ø§Ø² Ø§Ø³Øª. Ø¨Ù†Ø§Ø¨Ø±Ø§ÛŒÙ† Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù¾Ø°ÛŒØ±ÙØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.

* Ø¯Ø± Ø³Ø§Ø¹Øª **Û±:Û°Û°:ÛµÛ°**ØŒ ÛŒÚ© timestamp Ø¬Ø¯ÛŒØ¯ Ø¨Ù‡ log Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ø§Ù†Ø¯Ø§Ø²Ù‡ log Ø¨Ù‡ Û³ Ù…ÛŒâ€ŒØ±Ø³Ø¯ØŒ Ú©Ù‡ Ø§Ø² Ø­Ø¯ Ù…Ø¬Ø§Ø² Ø¨ÛŒØ´ØªØ± Ø§Ø³Øª. Ø¨Ù†Ø§Ø¨Ø±Ø§ÛŒÙ† Ø§ÛŒÙ† Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø±Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŒ Ø§Ú¯Ø±Ú†Ù‡ timestamp Ø¢Ù† Ù‡Ù…Ú†Ù†Ø§Ù† Ø¯Ø± log Ø¨Ø§Ù‚ÛŒ Ù…ÛŒâ€ŒÙ…Ø§Ù†Ø¯.

* Ø¯Ø± Ø³Ø§Ø¹Øª **Û±:Û°Û±:Û´Û°**ØŒ ÙÙ‚Ø· timestampÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø¯Ø± Ø¨Ø§Ø²Ù‡ \[Û±:Û°Û°:Û´Û° ØªØ§ Û±:Û°Û±:Û´Û°) Ù‡Ø³ØªÙ†Ø¯ Ù…Ø¹ØªØ¨Ø± Ù…Ø­Ø³ÙˆØ¨ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯. Ø¯Ø± Ù†ØªÛŒØ¬Ù‡ØŒ timestampÙ‡Ø§ÛŒ Û±:Û°Û°:Û°Û± Ùˆ Û±:Û°Û°:Û³Û° Ù…Ù†Ù‚Ø¶ÛŒ Ù‡Ø³ØªÙ†Ø¯ Ùˆ Ø§Ø² log Ø­Ø°Ù Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯. Ù¾Ø³ Ø§Ø² Ø§ÛŒÙ† Ø­Ø°ÙØŒ Ø§Ù†Ø¯Ø§Ø²Ù‡ log Ø¨Ø±Ø§Ø¨Ø± Ø¨Ø§ Û² Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¬Ø¯ÛŒØ¯ Ù¾Ø°ÛŒØ±ÙØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.


##### ÙØ±Ø¶: Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Û² Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø± Ù‡Ø± Û¶Û° Ø«Ø§Ù†ÛŒÙ‡

![](./Pictures/4-10.png)

| Ø²Ù…Ø§Ù† Ø¯Ø±Ø®ÙˆØ§Ø³Øª | ÙˆØ¶Ø¹ÛŒØª Ù„Ø§Ú¯ (timestamps)            | Ù†ØªÛŒØ¬Ù‡  |
| ------------ | --------------------------------- | ------ |
| 1:00:01      | \[1:00:01]                        | âœ… Ù…Ø¬Ø§Ø² |
| 1:00:30      | \[1:00:01, 1:00:30]               | âœ… Ù…Ø¬Ø§Ø² |
| 1:00:50      | \[1:00:01, 1:00:30, 1:00:50]      | âŒ Ø±Ø¯   |
| 1:01:40      | \[1:00:50, 1:01:40] â† Ø­Ø°Ùâ€ŒÙ‡Ø§ÛŒ Ù‚Ø¨Ù„ | âœ… Ù…Ø¬Ø§Ø² |



---

### Ù…Ø²Ø§ÛŒØ§ (Pros):

* Ù…Ø­Ø¯ÙˆØ¯Ø³Ø§Ø²ÛŒ Ù†Ø±Ø® ØªÙˆØ³Ø· Ø§ÛŒÙ† Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… **Ø¯Ù‚ÛŒÙ‚â€ŒØªØ±ÛŒÙ†** Ù†ÙˆØ¹ Ø§Ø³Øª. Ø¯Ø± Ù‡Ø± Ù¾Ù†Ø¬Ø±Ù‡â€Œ Ø²Ù…Ø§Ù†ÛŒ Ù…ØªØ­Ø±Ú© (rolling window)ØŒ ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ù‡Ø±Ú¯Ø² Ø§Ø² Ø­Ø¯ Ù…Ø¬Ø§Ø² ØªØ¬Ø§ÙˆØ² Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

* Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ø¨Ø±Ø§ÛŒ Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒÛŒ Ø¨Ø§ Ù†ÛŒØ§Ø² Ø¨Ù‡ **Ø¯Ù‚Øª Ø¨Ø§Ù„Ø§ Ø¯Ø± Ù†Ø±Ø® Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§** Ø¨Ø³ÛŒØ§Ø± Ù…Ù†Ø§Ø³Ø¨ Ø§Ø³ØªØŒ Ø¨Ù‡â€ŒØ®ØµÙˆØµ Ø¯Ø± Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø²ÛŒØ§Ø¯ÛŒ Ø¯Ø§Ø±Ù†Ø¯ Ùˆ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ù…Ù†Ø§Ø¨Ø¹ Ø­ÛŒØ§ØªÛŒ Ø§Ø³Øª.

---

### Ù…Ø¹Ø§ÛŒØ¨ (Cons):

* Ø§ÛŒÙ† Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ù…Ù‚Ø¯Ø§Ø± Ø²ÛŒØ§Ø¯ÛŒ Ø­Ø§ÙØ¸Ù‡ Ù…ØµØ±Ù Ù…ÛŒâ€ŒÚ©Ù†Ø¯ØŒ Ú†ÙˆÙ† Ø­ØªÛŒ Ø§Ú¯Ø± ÛŒÚ© Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø±Ø¯ Ø´ÙˆØ¯ØŒ Ù…Ù…Ú©Ù† Ø§Ø³Øª **timestamp** Ø¢Ù† Ù‡Ù…Ú†Ù†Ø§Ù† Ø¯Ø± Ø­Ø§ÙØ¸Ù‡ Ø¨Ø§Ù‚ÛŒ Ø¨Ù…Ø§Ù†Ø¯.

* Ø¯Ø± Ù…Ù‚ÛŒØ§Ø³ Ø¨Ø§Ù„Ø§ØŒ Ù…Ø¯ÛŒØ±ÛŒØª logÙ‡Ø§ÛŒ Ø²Ù…Ø§Ù†ÛŒ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ú©Ø§Ø±Ø¨Ø± Ùˆ Ù‡Ø± endpoint Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ù‡Ø²ÛŒÙ†Ù‡â€ŒØ¨Ø± Ø¨Ø§Ø´Ø¯ Ùˆ Ù†ÛŒØ§Ø² Ø¨Ù‡ **Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ùˆ Ø­Ø°Ù Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§** Ø¯Ø§Ø±Ø¯.

---

### Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ:

| Ø§Ø¨Ø²Ø§Ø±                                   | Ú©Ø§Ø±Ø¨Ø±Ø¯ Ø¯Ø± Sliding Window Log                                   | Ù…Ø²Ø§ÛŒØ§                                                      |
| --------------------------------------- | -------------------------------------------------------------- | ---------------------------------------------------------- |
| **Redis Sorted Set**                    | Ø°Ø®ÛŒØ±Ù‡ Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª timestamp Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§                            | Ø³Ø±ÛŒØ¹ØŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² TTL Ùˆ Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø±                    |
| **Nginx + Lua module**                  | Ù‚Ø±Ø§Ø± Ø¯Ø§Ø¯Ù† Ù…Ù†Ø·Ù‚ rate limit Ø¯Ø± reverse proxy                     | Ø¨Ø³ÛŒØ§Ø± Ø³Ø±ÛŒØ¹ Ùˆ Ø³Ø¨Ú© Ø¨Ø±Ø§ÛŒ edge level                           |
| **Envoy Proxy**                         | Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ rate limiting Ø¨Ø§ integration Ø¯Ø± Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ gRPC/REST | Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ø§ÛŒ Ù…Ø¹Ù…Ø§Ø±ÛŒ microservices                            |
| **Kong Gateway + Rate Limiting Plugin** | Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø³Ø·Ø­ Ø¨Ø§Ù„Ø§ Ø¨Ø±Ø§ÛŒ Ù…Ø­Ø¯ÙˆØ¯Ø³Ø§Ø²ÛŒ API                         | Ù‚Ø§Ø¨Ù„ ØªÙ†Ø¸ÛŒÙ… Ø¨Ø±Ø§ÛŒ Ú†Ù†Ø¯ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…ØŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Redis Ùˆ database |

## ðŸ“¦ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ:

| Ø§Ø¨Ø²Ø§Ø±           | Ù‚Ø§Ø¨Ù„ÛŒØª Ù…Ø±ØªØ¨Ø·                                                       |
| --------------- | ------------------------------------------------------------------ |
| **Redis**       | Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø³Ø§Ø®ØªØ§Ø± Ø¯Ø§Ø¯Ù‡ `Sorted Set` Ø¨Ø±Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ timestamps Ù…Ø±ØªØ¨â€ŒØ´Ø¯Ù‡ |
| **Nginx + Lua** | Ù…ÛŒâ€ŒØªÙˆØ§Ù† Sliding Window Log Ø±Ø§ Ø¨Ø§ Lua Ø±ÙˆÛŒ Nginx Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ú©Ø±Ø¯      |
| **Envoy**       | Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø¯Ø§Ø®Ù„ÛŒ Ø§Ø² Rate Limiting Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± sliding window            |

---

## ðŸ’¡ Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø³Ø±ÛŒØ¹ Ø¨Ø§ Ø³Ø§ÛŒØ± Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§:

| Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…               | Ø¯Ù‚Øª   | Ø­Ø§ÙØ¸Ù‡    | Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² burst | Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ø§ÛŒ     |
| ---------------------- | ----- | -------- | ----------------- | -------------- |
| Token Bucket           | Ù…ØªÙˆØ³Ø· | Ú©Ù…       | Ø¨Ù„Ù‡               | Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¹Ù…ÙˆÙ…ÛŒ  |
| Leaking Bucket         | Ù¾Ø§ÛŒÛŒÙ† | Ú©Ù…       | Ø®ÛŒØ±               | Ù†Ø±Ø® Ø®Ø±ÙˆØ¬ÛŒ Ø«Ø§Ø¨Øª |
| Fixed Window Counter   | Ù¾Ø§ÛŒÛŒÙ† | Ø¨Ø³ÛŒØ§Ø± Ú©Ù… | Ø®ÛŒØ±               | Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø¯Ù‡ |
| **Sliding Window Log** | Ø¨Ø§Ù„Ø§  | Ø¨Ø§Ù„Ø§     | Ù…Ø­Ø¯ÙˆØ¯             | Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ Ø­Ø³Ø§Ø³ |
### Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…Ù‡Ù†Ø¯Ø³ÛŒ Ø¨Ø±Ø§ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ù‚ÛŒØ§Ø³â€ŒÙ¾Ø°ÛŒØ±:

Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒÛŒ Ø¨Ø§ Ø¨Ø§Ø± Ø¨Ø§Ù„Ø§ØŒ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Sliding Window Log Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ø¨Ø§ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ **Ø´Ù…Ø§Ø±Ø´ Ø²Ù…Ø§Ù†â€ŒØ¯Ø§Ø± (time-series)** Ù…Ø§Ù†Ù†Ø¯ **InfluxDB** ÛŒØ§ **Redis TimeSeries Module** ØªØ±Ú©ÛŒØ¨ Ù…ÛŒâ€ŒØ´ÙˆØ¯ ØªØ§ Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ùˆ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØªØ±ÛŒ ØµÙˆØ±Øª Ú¯ÛŒØ±Ø¯ (Ù…Ù†Ø¨Ø¹: [RedisTimeSeries Documentation](https://redis.io/docs/latest/stack/timeseries/)).

Ù‡Ù…Ú†Ù†ÛŒÙ† Ø¯Ø± Ù¾Ù„ØªÙØ±Ù…â€ŒÙ‡Ø§ÛŒ Ø§Ø¨Ø±ÛŒ Ù…Ø§Ù†Ù†Ø¯ **AWS API Gateway**ØŒ Ø¨Ù‡â€ŒØµÙˆØ±Øª native Ø§Ù…Ú©Ø§Ù† ØªÙ†Ø¸ÛŒÙ… sliding window rate limits Ø¨Ø§ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒÛŒ Ù…Ø§Ù†Ù†Ø¯ WAF ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯.

Ø§Ù„Ø§Ù† Ù…Ù‚Ø§Ù„Ù‡â€ŒÛŒ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø´Ù…Ø§ Ø§Ø² **Medium** Ø¨Ø§ Ø¹Ù†ÙˆØ§Ù† **"Rate Limiting: The Sliding Window Algorithm"** Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ø±Ø¯Ù… ([medium.com][1]). Ø¯Ø± Ø§Ø¯Ø§Ù…Ù‡ØŒ ØªÙˆØ¶ÛŒØ­Ø§Øª Ø¯Ù‚ÛŒÙ‚ Ùˆ Ø³Ø§Ø²Ù…Ø§Ù†â€ŒÛŒØ§ÙØªÙ‡â€ŒØ§ÛŒ Ù‡Ù…Ø±Ø§Ù‡ Ø¨Ø§ Ù…Ø«Ø§Ù„ØŒ Ù…Ø²Ø§ÛŒØ§/Ù…Ø¹Ø§ÛŒØ¨ØŒ Ùˆ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ø¹Ù…Ù„ÛŒ Ø§Ø±Ø§Ø¦Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ù…:

---

#### ðŸ§­ Ù…Ø±ÙˆØ±ÛŒ Ø¨Ø± Ù…Ù‚Ø§Ù„Ù‡

* Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡ (Mohamed Elâ€‘Bably) Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… **Sliding Window** Ø±Ø§ Ù…Ø¹Ø±ÙÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ú©Ù‡ Ù‡Ø¯Ù Ø¢Ù† **Ù…Ø¯ÛŒØ±ÛŒØª Ù†Ø±Ø® Ø¯Ø±Ø®ÙˆØ§Ø³Øª** (Rate Limiting) Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø¨Ø§Ø²Ù‡ Ø²Ù…Ø§Ù†ÛŒ Ù…ØªØ­Ø±Ú© (Sliding Window) Ø§Ø³Øª. ([medium.com][1])
* Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ø¨Ø§ **ÛŒØ§Ø¯Ø¯Ø§Ø´Øª timestamp Ù‡Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øª** Ùˆ **Ø­Ø°Ù timestampÙ‡Ø§ÛŒ Ø®Ø§Ø±Ø¬â€ŒØ´Ø¯Ù‡ Ø§Ø² Ù¾Ù†Ø¬Ø±Ù‡**ØŒ ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø®ÛŒØ± Ø±Ø§ Ø´Ù…Ø§Ø±Ø´ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
* Ø§Ú¯Ø± ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø¯Ø± Ù¾Ù†Ø¬Ø±Ù‡ Ø§Ø² Ø­Ø¯ Ù…Ø¬Ø§Ø² Ø¨ÛŒØ´ØªØ± Ø¨Ø§Ø´Ø¯ØŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¬Ø¯ÛŒØ¯ **Ø±Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯**Ø› Ø¯Ø± ØºÛŒØ± Ø§ÛŒÙ†â€ŒØµÙˆØ±Øª **Ù¾Ø°ÛŒØ±ÙØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯**. ([stackoverflow.com][2])

---

![](./Pictures/The%20Sliding%20Window%20Algorithm.png)

### # ðŸ›  Ú¯Ø§Ù…â€ŒÙ‡Ø§ÛŒ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ø¯Ø± ÛŒÚ© Ù†Ú¯Ø§Ù‡:

1. **Time Window Ø«Ø§Ø¨Øª** Ù…Ø´Ø®Øµ Ù…ÛŒâ€ŒØ´ÙˆØ¯ (Ù…Ø«Ù„Ø§Ù‹ Û¶Û° Ø«Ø§Ù†ÛŒÙ‡).
2. **Counter** ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø¯Ø± Ø¨Ø§Ø²Ù‡Ù” Ú©Ù†ÙˆÙ†ÛŒ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
3. **Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ** timestampÙ‡Ø§ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø¯Ø± Redis ÛŒØ§ Ø¯ÛŒØªØ§Ø³ØªÙˆØ±ÛŒ Ø¨Ø§ Ù‚Ø§Ø¨Ù„ÛŒØªâ€Œ ØªØ±Ø§Ú©Ù†Ø´.
4. Ø¯Ø± Ù‡Ù†Ú¯Ø§Ù… Ù‡Ø±Ø¨Ø§Ø± Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø±Ø®ÙˆØ§Ø³Øª:

   * timestampÙ‡Ø§ÛŒ Ø®Ø§Ø±Ø¬ Ø§Ø² Ø¨Ø§Ø²Ù‡ Ø²Ù…Ø§Ù†ÛŒ Ø­Ø°Ù Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.
   * timestamp Ø¬Ø¯ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
   * ØªØ¹Ø¯Ø§Ø¯ timestampÙ‡Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯Ø› Ø§Ú¯Ø± Ú©Ù…ØªØ± Ø§Ø² Ø­Ø¯ Ù…Ø¬Ø§Ø² Ø¨Ø§Ø´Ø¯ØŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù¾Ø°ÛŒØ±ÙØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŒ ÙˆÚ¯Ø±Ù†Ù‡ Ø±Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯.&#x20;

---

### # âœ… Ù…Ø²Ø§ÛŒØ§ (Benefits)

* Ú©Ù†ØªØ±Ù„ Ø¯Ù‚ÛŒÙ‚ Ù†Ø±Ø® Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ù‡â€ŒØµÙˆØ±Øª Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒØ› ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ **Ù‡ÛŒÚ†â€ŒÚ¯Ø§Ù‡ Ø§Ø² Ø­Ø¯ Ù…Ø¬Ø§Ø² Ø¨ÛŒØ´ØªØ± Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯**.
* **Ø¹Ø¯Ù… Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø±ÛŒØ³Øª Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡**ØŒ Ø²ÛŒØ±Ø§ window Ø¨Ù‡â€ŒØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø­Ø±Ú©Øª Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
* Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² **ØªØ±Ø§ÙÛŒÚ© Ø§Ù†ÙØ¬Ø§Ø±ÛŒ** Ùˆ **Ø­Ù…Ù„Ø§Øª DDoS ÛŒØ§ brute force**. ([rdiachenko.com][3], [medium.com][1])

---

####  âš ï¸ Ù…Ø¹Ø§ÛŒØ¨ (Drawbacks)

* Ù…ØµØ±Ù Ø¨Ø§Ù„Ø§ÛŒ Ø­Ø§ÙØ¸Ù‡ Ø¨Ø±Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ timestampÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ú©Ù„Ø§ÛŒÙ†Øª ÛŒØ§ key.
* Ù†ÛŒØ§Ø² Ø¨Ù‡ **Ù¾Ø§Ú©â€ŒØ³Ø§Ø²ÛŒ Ù…Ø¯Ø§ÙˆÙ…** Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ú©Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¨Ø§Ø± Ø§Ø¶Ø§ÙÛŒ Ø±ÙˆÛŒ Ø¯ÛŒØªØ§Ø³ØªÙˆØ± Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†Ø¯.
* Ø¨Ø§ Ø§ÙØ²Ø§ÛŒØ´ ØªØ¹Ø¯Ø§Ø¯ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†/endpointÙ‡Ø§ØŒ **Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ ØªÙˆØ²ÛŒØ¹â€ŒØ´Ø¯Ù‡ Ø¢Ù† Ù¾ÛŒÚ†ÛŒØ¯Ù‡â€ŒØªØ±** Ù…ÛŒâ€ŒØ´ÙˆØ¯. ([databox.com][4])

---

#### ðŸ“Œ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ â€“ Ù…Ø«Ø§Ù„ Slide Limiter

Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡ Ù…Ù‚Ø§Ù„Ù‡â€ŒØ§ÛŒ Ø¯ÛŒÚ¯Ø± Ø®ÙˆØ¯ Ø¨Ù‡ Ù†Ø§Ù… **"Rate Limiting: A Dynamic Distributed Rate Limiting with Redis"** Ø§Ø´Ø§Ø±Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ú©Ù‡ Ø¯Ø± Ø¢Ù† ÛŒÚ© Ù¾Ø±ÙˆÚ˜Ù‡ open-source Ø¨Ø§ Ù†Ø§Ù… **Slide Limiter** Ù…Ø¹Ø±ÙÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª ([medium.com][5]):

* Ø§ÛŒÙ† Ù¾Ø±ÙˆÚ˜Ù‡ Ø¨Ø§ **TypeScript** Ùˆ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² **RedisStore** (Ø¨Ø±Ø§ÛŒ Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ ØªÙˆØ²ÛŒØ¹â€ŒØ´Ø¯Ù‡) Ùˆ **MemoryStore** (Ø¨Ø±Ø§ÛŒ ØªØ³Øª ÛŒØ§ Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ ØªÚ©â€ŒÙ†ÙˆØ¯Ù‡) Ø§Ø³Øª.
* ØªÙˆØ§Ø¨Ø¹ `hit(bucket, key)` Ø¨Ø±Ø§ÛŒ Ø«Ø¨Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ùˆ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…Ø§Ù†Ø¯Ù‡â€ŒÛŒ quota Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.
* Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø§ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª LUA Ø§Ø³Øª ØªØ§ Ø¹Ù…Ù„ÛŒØ§Øª Ø¨Ù‡â€ŒØµÙˆØ±Øª **Ø§ØªÙ…ÛŒÚ©** Ø¯Ø± Redis Ø§Ù†Ø¬Ø§Ù… Ø´ÙˆØ¯ Ùˆ race condition Ù¾ÛŒØ´ Ù†ÛŒØ§ÛŒØ¯. ([medium.com][5])

---

####  ðŸ§® Ø§Ø³Ú©Ø±ÛŒÙ¾Øª LUA Ø¯Ø± Redis

LUA Script Ù†Ù…ÙˆÙ†Ù‡ Ù†Ø­ÙˆÙ‡â€ŒÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ Rate Limiting Ø±Ø§ Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯:

* Ø²Ù…Ø§Ù† Ø¬Ø§Ø±ÛŒ Ú¯Ø±ÙØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
* Timestampâ€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ Ø­Ø°Ù Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.
* ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø¯.
* Ø§Ú¯Ø± Ú©Ù…ØªØ± Ø§Ø² limit Ø¨Ø§Ø´Ø¯ØŒ timestamp Ø¬Ø¯ÛŒØ¯ Ø§ÙØ²ÙˆØ¯Ù‡ Ø´Ø¯Ù‡ Ùˆ Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡ quota Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŒ Ø¯Ø± ØºÛŒØ± Ø§ÛŒÙ†â€ŒØµÙˆØ±Øª Û° Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯. ([medium.com][5], [nalashaa.com][6], [stackoverflow.com][2])

---

####  ðŸŒ Ú©Ø§Ø±Ø¨Ø±Ø¯Ù‡Ø§ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ Ùˆ Ù…Ù†Ø¨Ø¹â€ŒÙ‡Ø§ÛŒ Ø¬Ù‡Ø§Ù†ÛŒ

1. **Cloudflare** Ø§Ø² Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Sliding Window Ø¨Ø±Ø§ÛŒ Ú©Ù†ØªØ±Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ API Ø¯Ø± edge Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ ØªØ§ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø­Ù…Ù„Ø§Øª Ù„Ø§ÛŒÙ‡ Û· Ø´ÙˆØ¯ ([blog.cloudflare.com][7]).
2. **Dev & Engineering Blogs** Ù…Ø§Ù†Ù†Ø¯ Databox Ùˆ Ø³Ø§ÛŒØªâ€ŒÙ‡Ø§ÛŒÛŒ Ù…Ø«Ù„ Arpit Bhayani Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§ Ùˆ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒâ€ŒÙ‡Ø§ÛŒÛŒ Ø¨Ø±Ø§ÛŒ Sliding Window Ø¨ÛŒØ§Ù† Ú©Ø±Ø¯Ù‡â€ŒØ§Ù†Ø¯ ([databox.com][4]).
3. Ø¯Ø± Ø¬Ø§Ù…Ø¹Ù‡ Ú¯ÛŒØªâ€ŒÙ‡Ø§Ø¨ Ùˆ npmØŒ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒÛŒ Ù…Ø§Ù†Ù†Ø¯ **slide-limiter** ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ù†Ø¯ Ú©Ù‡ Ø¨Ø§ Redis Ùˆ TypeScript Rate Limiting ØªÙˆØ²ÛŒØ¹â€ŒØ´Ø¯Ù‡ ÙØ±Ø§Ù‡Ù… Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯. ([medium.com][5])

---

####  ðŸ’¡ Ø¬Ù…Ø¹â€ŒØ¨Ù†Ø¯ÛŒ Ùˆ ØªÙˆØµÛŒÙ‡â€ŒÙ‡Ø§

| ÙˆÛŒÚ˜Ú¯ÛŒ          | ØªÙˆØ¶ÛŒØ­                                       |
| -------------- | ------------------------------------------- |
| ðŸŽ¯ Ø¯Ù‚Øª Ú©Ù†ØªØ±Ù„   | Ø¨Ø³ÛŒØ§Ø± Ø¨Ø§Ù„Ø§ØŒ Ø¨Ø¯ÙˆÙ† Ø¹Ø¨ÙˆØ± Ø§Ø² Ø­Ø¯ Ø¯Ø± window Ù…ØªØ­Ø±Ú© |
| ðŸ’¾ Ø­Ø§ÙØ¸Ù‡ Ù…ØµØ±ÙÛŒ | Ø¨Ø§Ù„Ø§ (Ø°Ø®ÛŒØ±Ù‡ timestamp)                      |
| ðŸ›¡ Ú©Ø§Ø±Ø¨Ø±Ø¯      | Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² ØªÙ‡Ø¯ÛŒØ¯Ø§Øª Ùˆ ØªØ±Ø§ÙÛŒÚ© Ø§Ù†ÙØ¬Ø§Ø±ÛŒ         |
| âœ… Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ø§ÛŒ   | APIÙ‡Ø§ÛŒÛŒ Ø¨Ø§ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¯Ù‚Øª Ù†Ø±Ø® Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ          |

---

####  âœ… Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§

* Ø§Ú¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡ Ø´Ù…Ø§ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ú©Ù†ØªØ±Ù„ Ø¯Ù‚ÛŒÙ‚ Ùˆ ØªÙˆØ²ÛŒØ¹ Ø´Ø¯Ù‡ Ø¯Ø§Ø±Ø¯ØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² **Slide Limiter** Ø§Ø³ØªÙØ§Ø¯Ù‡ ÛŒØ§ Ù†Ø³Ø®Ù‡ Ù…Ø´Ø§Ø¨Ù‡ Ø¢Ù† Ø±Ø§ Ø¯Ø± Ø²Ø¨Ø§Ù† Ù…ÙˆØ±Ø¯ Ø§Ø³ØªÙØ§Ø¯Ù‡â€ŒØªØ§Ù† (Ù…Ø«Ù„Ø§Ù‹ Python, Go) Ù¾ÛŒØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.
* Ù‡Ù…Ú†Ù†ÛŒÙ† Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² **Lua script Ø¯Ø± Redis** Ø¨Ø±Ø§ÛŒ Ø§Ø¬Ø±Ø§ÛŒ Ø§ØªÙ…ÛŒÚ© Ø§ÛŒÙ† Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ø¨Ù‡Ø±Ù‡ Ø¨Ø¨Ø±ÛŒØ¯.

---

[1]: https://medium.com/%40m-elbably/rate-limiting-the-sliding-window-algorithm-daa1d91e6196?utm_source=chatgpt.com "Rate Limiting: The Sliding Window Algorithm | by Mohamed El-Bably"
[2]: https://stackoverflow.com/questions/69161879/sliding-window-algorithm-for-rate-limiting-requests-per-second-windows?utm_source=chatgpt.com "Sliding window algorithm for rate limiting requests per second ..."
[3]: https://rdiachenko.com/posts/arch/rate-limiting/sliding-window-algorithm/?utm_source=chatgpt.com "Sliding Window Rate Limiting and its Memory-Optimized Variant"
[4]: https://databox.com/understanding-rate-limiting-strategies-and-solutions?utm_source=chatgpt.com "Understanding Rate Limiting: Strategies and Solutions - Databox"
[5]: https://medium.com/%40m-elbably/rate-limiting-a-dynamic-distributed-rate-limiting-with-redis-339f9504200f?utm_source=chatgpt.com "Rate Limiting: A Dynamic Distributed Rate Limiting with Redis"
[6]: https://www.nalashaa.com/api-performance-optimization/?utm_source=chatgpt.com "Solving API Rate Limiting Issues with Efficient Throttling Algorithms"
[7]: https://blog.cloudflare.com/counting-things-a-lot-of-different-things/?utm_source=chatgpt.com "How we built rate limiting capable of scaling to millions of domains"

ØªØ±Ø¬Ù…Ù‡ Ú©Ø§Ù…Ù„ ØªØ®ØµØµÛŒ Ø¨Ø®Ø´ **Sliding Window Counter Algorithm** Ø¨Ø§ Ø­ÙØ¸ Ø³Ø§Ø®ØªØ§Ø± Ø§ØµÙ„ÛŒØŒ ØªÙˆØ¶ÛŒØ­ Ø§ØµØ·Ù„Ø§Ø­Ø§Øª ÙÙ†ÛŒØŒ Ø§Ø¶Ø§ÙÙ‡â€ŒÚ©Ø±Ø¯Ù† Ø¯Ø§Ù†Ø´ Ù…Ø¹ØªØ¨Ø± Ùˆ Ù…Ø´Ø®Øµâ€ŒÚ©Ø±Ø¯Ù† Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ Ø¨Ù‡ Ø´Ø±Ø­ Ø²ÛŒØ± Ø§Ø³Øª:

---

## Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ù¾Ù†Ø¬Ø±Ù‡ Ù„ØºØ²Ø§Ù† (Sliding Window Counter Algorithm)

Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Sliding Window Counter ÛŒÚ© Ø±ÙˆÛŒÚ©Ø±Ø¯ **ØªØ±Ú©ÛŒØ¨ÛŒ (hybrid)** Ø§Ø³Øª Ú©Ù‡ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ **Fixed Window Counter** (Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ù¾Ù†Ø¬Ø±Ù‡ Ø«Ø§Ø¨Øª) Ùˆ **Sliding Window Log** (Ø«Ø¨Øª Ù¾Ù†Ø¬Ø±Ù‡ Ù„ØºØ²Ø§Ù†) Ø±Ø§ Ø¨Ø§ ÛŒÚ©Ø¯ÛŒÚ¯Ø± ØªØ±Ú©ÛŒØ¨ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

Ø§ÛŒÙ† Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ø±Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø¨Ù‡ **Ø¯Ùˆ Ø±ÙˆØ´ Ù…ØªÙØ§ÙˆØª** Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ú©Ø±Ø¯. Ø¯Ø± Ø§ÛŒÙ† Ø¨Ø®Ø´ØŒ ÛŒÚ©ÛŒ Ø§Ø² Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒâ€ŒÙ‡Ø§ ØªÙˆØ¶ÛŒØ­ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ù…Ø±Ø¬Ø¹ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯ÙˆÙ… Ø¯Ø± Ø§Ù†ØªÙ‡Ø§ÛŒ Ø¨Ø®Ø´ Ù…Ø¹Ø±ÙÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª.

![](./Pictures/4-11.png)
---

### ðŸ’¡ Ù…Ø«Ø§Ù„ Ø¹Ù…Ù„ÛŒ Ø§Ø² Ù†Ø­ÙˆÙ‡ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…

ÙØ±Ø¶ Ú©Ù†ÛŒØ¯ Ù†Ø±Ø® Ù…Ø¬Ø§Ø² Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ (rate limiter) **Û· Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø± Ø¯Ù‚ÛŒÙ‚Ù‡** Ø§Ø³Øª.

Ø¯Ø± Ø§ÛŒÙ† Ù…Ø«Ø§Ù„:

* Ø¯Ø± Ø¯Ù‚ÛŒÙ‚Ù‡â€ŒÛŒ Ù‚Ø¨Ù„ÛŒØŒ Ûµ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø«Ø¨Øª Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯.
* Ø¯Ø± Ø¯Ù‚ÛŒÙ‚Ù‡â€ŒÛŒ ÙØ¹Ù„ÛŒØŒ Û³ Ø¯Ø±Ø®ÙˆØ§Ø³Øª ØªØ§Ú©Ù†ÙˆÙ† Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯.
* Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¬Ø¯ÛŒØ¯ Ø¯Ø± **Û³Û°Ùª Ø§ÙˆÙ„ Ø¯Ù‚ÛŒÙ‚Ù‡ Ø¬Ø§Ø±ÛŒ** ÙˆØ§Ø±Ø¯ Ø³ÛŒØ³ØªÙ… Ø´Ø¯Ù‡ Ø§Ø³Øª.

Ø¨Ø±Ø§ÛŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø¯Ø± Ù¾Ù†Ø¬Ø±Ù‡â€ŒÛŒ Ø¬Ø§Ø±ÛŒ (Rolling Window)ØŒ Ø§Ø² ÙØ±Ù…ÙˆÙ„ Ø²ÛŒØ± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯:

```plaintext
ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ = Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¬Ø§Ø±ÛŒ + (Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¯Ù‚ÛŒÙ‚Ù‡â€ŒÛŒ Ù‚Ø¨Ù„ Ã— Ø¯Ø±ØµØ¯ Ù‡Ù…â€ŒÙ¾ÙˆØ´Ø§Ù†ÛŒ)
```

ÛŒØ¹Ù†ÛŒ:

```plaintext
ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ = Û³ + (Ûµ Ã— Û°Ù«Û·) = Û¶Ù«Ûµ
```

Ø¨Ø³ØªÙ‡ Ø¨Ù‡ Ù†ÙˆØ¹ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒØŒ Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø¹Ø¯Ø¯ Û¶Ù«Ûµ **Ú¯Ø±Ø¯ Ø¨Ù‡ Ù¾Ø§ÛŒÛŒÙ† (Û¶)** ÛŒØ§ **Ø¨Ø§Ù„Ø§ (Û·)** Ø´ÙˆØ¯.

Ø¯Ø± Ø§ÛŒÙ† Ù…Ø«Ø§Ù„ØŒ Ø¹Ø¯Ø¯ Ú¯Ø±Ø¯ Ø¨Ù‡ Ù¾Ø§ÛŒÛŒÙ† Ø´Ø¯Ù‡ Ùˆ Ø¨Ø±Ø§Ø¨Ø± Û¶ Ø¯Ø± Ù†Ø¸Ø± Ú¯Ø±ÙØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.

Ø¨Ù†Ø§Ø¨Ø±Ø§ÛŒÙ†:

* Ø¯Ø±Ø®ÙˆØ§Ø³Øª ÙØ¹Ù„ÛŒ **Ù…Ø¬Ø§Ø² Ø§Ø³Øª**.
* Ø§Ù…Ø§ Ø§Ú¯Ø± ÛŒÚ© Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯ÛŒÚ¯Ø± ÙˆØ§Ø±Ø¯ Ø´ÙˆØ¯ØŒ Ø¨Ù‡ Ø³Ù‚Ù Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø®ÙˆØ§Ù‡Ø¯ Ø±Ø³ÛŒØ¯.

---

### âœ… Ù…Ø²Ø§ÛŒØ§ (Pros)

* **Ú©Ø§Ù‡Ø´ Ù†ÙˆØ³Ø§Ù†Ø§Øª Ù†Ø§Ú¯Ù‡Ø§Ù†ÛŒ ØªØ±Ø§ÙÛŒÚ©**: Ú†ÙˆÙ† Ù†Ø±Ø® Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø¨Ø§Ø²Ù‡ Ù‚Ø¨Ù„ÛŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŒ Ø§Ø² Ø¬Ù‡Ø´ Ù†Ø§Ú¯Ù‡Ø§Ù†ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
* **Ú©Ø§Ø±Ø¢Ù…Ø¯ Ø§Ø² Ù†Ø¸Ø± Ù…ØµØ±Ù Ø­Ø§ÙØ¸Ù‡** (memory efficient): Ù†ÛŒØ§Ø²ÛŒ Ø¨Ù‡ Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¬Ø²Ø¦ÛŒØ§Øª Ø²Ù…Ø§Ù†ÛŒ Ø¯Ù‚ÛŒÙ‚ Ù‡Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù†ÛŒØ³Øª.

---

### âŒ Ù…Ø¹Ø§ÛŒØ¨ (Cons)

* ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ **Ø¨Ø§Ø²Ù‡â€ŒÙ‡Ø§ÛŒ Ø²Ù…Ø§Ù†ÛŒ Ú©Ù…ØªØ± Ø³Ø®Øªâ€ŒÚ¯ÛŒØ±Ø§Ù†Ù‡ (not-so-strict lookback window)** Ù…Ù†Ø§Ø³Ø¨ Ø§Ø³Øª.
* **ÛŒÚ© ØªØ®Ù…ÛŒÙ† Ø§Ø² Ù†Ø±Ø® ÙˆØ§Ù‚Ø¹ÛŒ Ø§Ø³Øª**: Ú†Ø±Ø§ Ú©Ù‡ ÙØ±Ø¶ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¯Ù‚ÛŒÙ‚Ù‡â€ŒÛŒ Ù‚Ø¨Ù„ÛŒ Ø¨Ù‡â€ŒØ·ÙˆØ± **ÛŒÚ©Ù†ÙˆØ§Ø®Øª ØªÙˆØ²ÛŒØ¹ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯**. Ø§Ù…Ø§ Ø¯Ø± Ø¹Ù…Ù„ Ø§ÛŒÙ†â€ŒÚ¯ÙˆÙ†Ù‡ Ù†ÛŒØ³Øª.

ðŸ“Œ **Ù…Ù‡Ù…**: Ø§ÛŒÙ† Ù…Ø³Ø¦Ù„Ù‡ Ø¨Ù‡ Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒØ§ÛŒ Ú©Ù‡ Ø¨Ù‡â€ŒÙ†Ø¸Ø± Ù…ÛŒâ€ŒØ±Ø³Ø¯ Ø¨Ø¯ Ù†ÛŒØ³Øª.
Ø¨Ø±Ø§Ø³Ø§Ø³ Ø¢Ø²Ù…Ø§ÛŒØ´â€ŒÙ‡Ø§ÛŒ Ø´Ø±Ú©Øª **Cloudflare** (Ù…Ø±Ø¬Ø¹ \[10]) Ø¯Ø± Ù…ÛŒØ§Ù† **Û´Û°Û° Ù…ÛŒÙ„ÛŒÙˆÙ† Ø¯Ø±Ø®ÙˆØ§Ø³Øª**:

> ØªÙ†Ù‡Ø§ **Û°Ù«Û°Û°Û³Ùª** Ø§Ø² Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø¨Ù‡â€ŒØ§Ø´ØªØ¨Ø§Ù‡ Ù…Ø¬Ø§Ø² ÛŒØ§ Ù…Ø­Ø¯ÙˆØ¯ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯.

Ù…Ù†Ø¨Ø¹:

* Cloudflare blog â€“ [source](https://blog.cloudflare.com/counting-things-a-lot-of-different-things)

---

### ðŸ“˜ ÛŒØ§Ø¯Ø¯Ø§Ø´Øª ØªÚ©Ù…ÛŒÙ„ÛŒ

#### Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø¨Ø§ Sliding Window Log:

| ÙˆÛŒÚ˜Ú¯ÛŒ              | Sliding Window Counter          | Sliding Window Log                |
| ------------------ | ------------------------------- | --------------------------------- |
| Ø¯Ù‚Øª                | Ù…ØªÙˆØ³Ø·                           | Ø¨Ø§Ù„Ø§                              |
| Ø­Ø§ÙØ¸Ù‡ Ù…ØµØ±ÙÛŒ        | Ú©Ù…                              | Ø²ÛŒØ§Ø¯                              |
| Ù¾ÛŒÚ†ÛŒØ¯Ú¯ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ | Ù…ØªÙˆØ³Ø·                           | Ø¨Ø§Ù„Ø§                              |
| Ø³Ø±Ø¹Øª               | Ø¨Ø§Ù„Ø§                            | Ù…ØªÙˆØ³Ø·                             |
| Ú©Ø§Ø±Ø¨Ø±Ø¯ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ    | Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ Ø¹Ù…ÙˆÙ…ÛŒ Ø¨Ø§ ØªØ±Ø§ÙÛŒÚ© Ù…ØªÙˆØ³Ø· | APIÙ‡Ø§ÛŒ Ø¯Ù‚ÛŒÙ‚ Ø¨Ø§ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ú©Ù†ØªØ±Ù„ Ø´Ø¯ÛŒØ¯ |

---

### ðŸ”§ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ

| Ø§Ø¨Ø²Ø§Ø±                        | ØªÙˆØ¶ÛŒØ­                                                                                 |
| ---------------------------- | ------------------------------------------------------------------------------------- |
| **Redis + Lua script**       | Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Sliding Counter Ø¨Ø§ Ø°Ø®ÛŒØ±Ù‡â€ŒÛŒ ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø± Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ time-based        |
| **Envoy Proxy**              | Ø¯Ø§Ø±Ø§ÛŒ Ù…Ø§Ú˜ÙˆÙ„ `RateLimitService` Ø¨Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Sliding Window Counter                  |
| **Amazon API Gateway**       | Ø§Ø² Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ ØªØ±Ú©ÛŒØ¨ÛŒ Ù…Ø´Ø§Ø¨Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯                                           |
| **NGINX + Limit Conn / Req** | Ø¨Ù‡ Ú©Ù…Ú© Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ø¬Ø§Ù†Ø¨ÛŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Sliding Counter Ø±Ø§ Ø¯Ø± reverse proxy Ø§Ø¹Ù…Ø§Ù„ Ú©Ø±Ø¯ |

---

### ðŸ“š Ù…Ø±Ø¬Ø¹ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯ÙˆÙ… (Ø¨Ø±Ø§ÛŒ Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯Ø§Ù†)

Ø¯Ø± Ù…ØªÙ† Ø°Ú©Ø± Ø´Ø¯Ù‡ Ú©Ù‡ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯ÙˆÙ… Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª ÙØ¶Ø§ Ø´Ø±Ø­ Ø¯Ø§Ø¯Ù‡ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ø¢Ù†ØŒ Ø¨Ù‡ Ù…Ù†Ø¨Ø¹ \[9] Ú©Ù‡ Ø¯Ø± Ø§Ù†ØªÙ‡Ø§ÛŒ ÙØµÙ„ Ø¢Ù…Ø¯Ù‡ Ø§Ø³ØªØŒ Ù…Ø±Ø§Ø¬Ø¹Ù‡ ÙØ±Ù…Ø§ÛŒÛŒØ¯. Ø¯Ø± Ù†Ø³Ø®Ù‡ Ø§ØµÙ„ÛŒ Ú©ØªØ§Ø¨ Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ø§ÛŒÙ† Ø§Ø±Ø¬Ø§Ø¹ Ø¨Ù‡ Ù…Ù‚Ø§Ù„Ù‡â€ŒØ§ÛŒ Ø¯Ø± Cloudflare ÛŒØ§ GitHub Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ú©Ù‡ Ø´Ø§Ù…Ù„ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ø¨Ø§ Ø¬Ø²Ø¦ÛŒØ§Øª Ø±ÛŒØ§Ø¶ÛŒ Ùˆ Ú©Ø¯ Ø§Ø³Øª.

Ø¯Ø± Ø§Ø¯Ø§Ù…Ù‡ ØªÙˆØ¶ÛŒØ­ Ú©Ø§Ù…Ù„ Ùˆ Ø¯Ù‚ÛŒÙ‚ Ù…Ù‚Ø§Ù„Ù‡ **â€œSystem Design â€” Rate limiter and Data modellingâ€** Ù†ÙˆØ´ØªÙ‡ Sai Sandeepâ€¯Mopuri Ø¯Ø± Medium Ø±Ø§ Ø§Ø±Ø§Ø¦Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ù…. Ø§ÛŒÙ† ØªÙˆØ¶ÛŒØ­Ø§Øª Ø´Ø§Ù…Ù„ Ø¨Ø®Ø´â€ŒÙ‡Ø§ÛŒ Ø·Ø±Ø§Ø­ÛŒ Ú©Ù„ÛŒØŒ Ù…Ø¯Ù„ Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒØŒ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ØŒ Ù…Ø²Ø§ÛŒØ§/Ù…Ø¹Ø§ÛŒØ¨ØŒ Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§ Ùˆ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯â€”Ø¨Ø¯ÙˆÙ† Ø®Ù„Ø§ØµÙ‡â€ŒØ³Ø§Ø²ÛŒ Ùˆ Ø¨Ø§ Ø­ÙØ¸ ÙˆØ§Ú˜Ú¯Ø§Ù† ØªØ®ØµØµÛŒ Ø¨Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ Ø¯Ø± Ø§ÙˆÙ„ÛŒÙ† Ø¨Ø§Ø± Ø§Ø³ØªÙØ§Ø¯Ù‡ (Ø¨Ø§ Ù…Ø¹Ø§Ø¯Ù„ ÙØ§Ø±Ø³ÛŒ Ø¯Ø± Ù¾Ø±Ø§Ù†ØªØ²).

---

## Ø·Ø±Ø§Ø­ÛŒ Ø³ÛŒØ³ØªÙ… Rate Limiter Ùˆ Ù…Ø¯Ù„ Ø¯Ø§Ø¯Ù‡â€Œ (Rate Limiter and Data Modelling)

### ðŸŽ¯ ØªØ¹Ø±ÛŒÙ Ù…Ø³Ø¦Ù„Ù‡:

Rate limiter Ø§Ø¨Ø²Ø§Ø±ÛŒ Ø§Ø³Øª Ú©Ù‡ **ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø±Ø§ Ø¯Ø± ÛŒÚ© Ø¨Ø§Ø²Ù‡ Ø²Ù…Ø§Ù†ÛŒ (time window)** Ú©Ù†ØªØ±Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø§Ú¯Ø± ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø§Ø² Ø­Ø¯ Ù…Ø¬Ø§Ø² ÙØ±Ø§ØªØ± Ø±ÙˆØ¯ØŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ Ù…Ø³Ø¯ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ (Ù…Ø«Ù„Ø§Ù‹ Ø¨Ø§ Ù¾Ø±ØªØ§Ø¨ exception). Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø§Ù†Ø³Ø§Ù† ÛŒØ§ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ Ø¯ÛŒÚ¯Ø± Ø¨Ø§Ø´Ù†Ø¯ (Ù…Ø«Ù„Ø§Ù‹ Ø¯Ø± Ù…Ø¹Ù…Ø§Ø±ÛŒ Ù…ÛŒÚ©Ø±ÙˆØ³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§). ([medium.com][1])

#### Ù…Ø«Ø§Ù„:

* ÛŒÚ© Ø¯Ø³ØªÚ¯Ø§Ù‡ Ø¨Ø§ IP Ù…Ø´Ø®Øµ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ **Û±Û° Ø±Ø²Ø±Ùˆ Ø¨Ù„ÛŒØ· Ø¯Ø± Ø¯Ù‚ÛŒÙ‚Ù‡** Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡Ø¯.
* Ø³Ø±ÙˆÛŒØ³ A Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¨ÛŒØ´ Ø§Ø² **ÛµÛ°Û° Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø± Ø«Ø§Ù†ÛŒÙ‡** Ø¨Ù‡ Ø³Ø±ÙˆÛŒØ³ B Ø§Ø±Ø³Ø§Ù„ Ú©Ù†Ø¯.
  ØªÙ…Ø§Ù… Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ Ø±Ø¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.&#x20;

---

### ðŸ’¾ Ú†Ø±Ø§ **MySQL ÛŒØ§ Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡â€Œ Ø¯ÛŒØ³Ú©ÛŒ** Ù…Ù†Ø§Ø³Ø¨ Ù†ÛŒØ³ØªØŸ

* Ø²Ù…Ø§Ù† Ø¬Ø³ØªØ¬ÙˆÛŒ Ø¯ÛŒØ³Ú©ÛŒ (disk seek) Ø¨Ø§Ù„Ø§ Ø¨ÙˆØ¯Ù‡ Ùˆ **ØªØ±Ø§Ú©Ù… (granularity)** Ø±Ø§ Ú©Ø§Ù‡Ø´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.
* Redis ÛŒØ§ in-memory cache Ø­Ø¯ÙˆØ¯ **Û±Û°^7 Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø± Ø«Ø§Ù†ÛŒÙ‡** Ø¨Ø§ ØªØ§Ø®ÛŒØ± \~Û±Û°Û° Ù†Ø§Ù†ÙˆØ«Ø§Ù†ÛŒÙ‡ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯Ø› Ø¯Ø± Ø­Ø§Ù„ÛŒ Ú©Ù‡ MySQL Ø­Ø¯ÙˆØ¯ Û±Û°Û°Û° req/sec Ø§Ø³Øª. ([medium.com][1])

---

## Ø³Ø·ÙˆØ­ Ø·Ø±Ø§Ø­ÛŒ Rate Limiter (Various Levels)

1. Single machine, single-threaded
2. Single machine, multi-threaded (race conditions)
3. **Distributed** Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Cache ØªÙˆØ²ÛŒØ¹â€ŒØ´Ø¯Ù‡ Ù…Ø§Ù†Ù†Ø¯ Redis
4. Rate limiter Ø¯Ø± **Ø³Ù…Øª Ú©Ø§Ø±Ø¨Ø± (client-side)** Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø§Ø±Ø³Ø§Ù„ Ø§Ø¶Ø§ÙÛŒ
   ([medium.com][1])

---

## Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€Œâ€ŽÙ‡Ø§ÛŒ ØºØ§Ù„Ø¨ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ (Rate Limiting Designs)

Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ± ØªÙˆØµÛŒÙ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯:

* Fixed Window Counters
* Sliding Window Logs
* Sliding Window Counters
  (Ùˆ Ø¯ÛŒÚ¯Ø± Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ Ù…Ø§Ù†Ù†Ø¯ Token BucketØŒ Leaky Bucket) ([medium.com][1], [dilipkumar.medium.com][2])

### Fixed Window Counters:

* ÛŒÚ© Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ù¾Ù†Ø¬Ø±Ù‡ Ø²Ù…Ø§Ù†ÛŒ Ø«Ø§Ø¨Øª ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯.
* ÙØ¶Ø§ÛŒ O(1)ØŒ Ù¾ÛŒÚ†ÛŒØ¯Ú¯ÛŒ Ø²Ù…Ø§Ù† O(1).
* Ø³Ø§Ø¯Ù‡ØŒ Ø§Ù…Ø§ Ø¨Ø§ Ù…Ø´Ú©Ù„ burst Ø¯Ø± Ù„Ø¨Ù‡â€ŒÛŒ Ù¾Ù†Ø¬Ø±Ù‡ Ù…ÙˆØ§Ø¬Ù‡ Ø§Ø³Øª. Ù…Ø«Ø§Ù„: Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø¹Øª Û±:Û³Û° ØªØ§ Û²:Û³Û° Ù…Ø¬Ù…ÙˆØ¹Ø§Ù‹ Ø¨Ø§Ù„Ø§ØªØ± Ø§Ø² Ø­Ø¯ Ù…Ø¬Ø§Ø² Ù…ÛŒâ€ŒØ´ÙˆØ¯. ([medium.com][1])

### Sliding Window Logs:

* Ø°Ø®ÛŒØ±Ù‡ timestamp Ù‡Ù…Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø± Ø¯Ø§Ø®Ù„ Ù¾Ù†Ø¬Ø±Ù‡ Ø²Ù…Ø§Ù†.
* Ø­Ø§ÙØ¸Ù‡ wysokoØŒ Ù¾ÛŒÚ†ÛŒØ¯Ú¯ÛŒ Ø­Ø°Ù O(n).
* Ø¯Ù‚ÛŒÙ‚ Ø§Ù…Ø§ Ù¾Ø±Ù‡Ø²ÛŒÙ†Ù‡ Ø§Ø² Ù†Ø¸Ø± Ù…Ù†Ø§Ø¨Ø¹.&#x20;

### Sliding Window Counters:

* Ù¾Ù†Ø¬Ø±Ù‡ Ø²Ù…Ø§Ù†ÛŒ Ø¨Ù‡ Ú†Ù†Ø¯ Ø³Ø·Ù„ Ú©ÙˆÚ†Ú©â€ŒØªØ± ØªÙ‚Ø³ÛŒÙ… Ù…ÛŒâ€ŒØ´ÙˆØ¯.
* Ù‡Ø± Ø³Ø·Ù„ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ù…Ø¬Ø²Ø§ Ø¯Ø§Ø±Ø¯. Ù…Ø¬Ù…ÙˆØ¹ Ø¨Ø§ Ù…Ø­Ø§Ø³Ø¨Ù‡ ÙˆØ²Ù† Ù‡Ù…â€ŒÙ¾ÙˆØ´Ø§Ù†ÛŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
* ÙØ¶Ø§ÛŒ O(n buckets). ØªÙ‚Ø±ÛŒØ¨ Ø®ÙˆØ¨ÛŒ Ø§Ø±Ø§Ø¦Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯. Ù…Ø«Ø§Ù„: ØªÙ‚Ø³ÛŒÙ… Ø³Ø§Ø¹Øª Ø¨Ù‡ Ø³Ù‡ Ø¨Ø§Ø²Ù‡ Û²Û° Ø¯Ù‚ÛŒÙ‚Ù‡â€ŒØ§ÛŒØŒ Ø¬Ù…Ø¹ Ø´Ù…Ø§Ø±Ø´â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ù†Ø±Ø®â€ŒÚ¯ÛŒØ±ÛŒ.&#x20;

---

## ðŸ“Š Ù…Ø¯Ù„ Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ (Redis-based)

### Ø¨Ø±Ø§ÛŒ Sliding Window Logs:

* Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² **Redis pipeline** ÛŒØ§ **Lua scripting** Ø¨Ø±Ø§ÛŒ Ø­Ø°Ù atomically timestampÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒØŒ Ø´Ù…Ø§Ø±Ø´ØŒ Ø§ÙØ²ÙˆØ¯Ù† timestamp Ø¬Ø¯ÛŒØ¯ Ùˆ ØªÙ†Ø¸ÛŒÙ… TTL.
* Ø§Ø¬Ø±Ø§ÛŒ ØªØ±Ø§Ú©Ù†Ø´ Ø§ØªÙ…ÛŒÚ© Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² race condition Ø¶Ø±ÙˆØ±ÛŒ Ø§Ø³Øª. ([medium.com][3])

### Ø¨Ø±Ø§ÛŒ Sliding Window Counters:

* Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡â€ŒÙ‡Ø§ Ø¨Ù‡â€ŒØ§Ø²Ø§ÛŒ Ù‡Ø± bucket Ø¯Ø± Redis.
* Ø¬Ù…Ø¹â€ŒØ²Ø¯Ù† Ù‡Ù…â€ŒÙ¾ÙˆØ´Ø§Ù†ÛŒØŒ Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ bucket ÙØ¹Ù„ÛŒØŒ Ø­Ø°Ù bucketÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ Ø¨Ø§ expiration.&#x20;

---

## âœ… Ù…Ø²Ø§ÛŒØ§ Ùˆ Ù…Ø¹Ø§ÛŒØ¨

| Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…        | Ø¯Ù‚Øª        | Ù…ØµØ±Ù Ø­Ø§ÙØ¸Ù‡ | Ù¾ÛŒÚ†ÛŒØ¯Ú¯ÛŒ    | Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ø§ÛŒ                  |
| --------------- | ---------- | ---------- | ---------- | --------------------------- |
| Fixed Window    | Ù¾Ø§ÛŒÛŒÙ†      | Ø¨Ø³ÛŒØ§Ø± Ú©Ù…   | Ø³Ø§Ø¯Ù‡       | Ù†ÛŒØ§Ø²Ù‡Ø§ÛŒ Ù¾Ø§ÛŒÙ‡â€ŒØ§ÛŒ             |
| Sliding Log     | Ø¨Ø§Ù„Ø§       | Ø²ÛŒØ§Ø¯       | Ù…ØªÙˆØ³Ø·-Ø¨Ø§Ù„Ø§ | Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒÛŒ Ø¨Ø§ Ù†ÛŒØ§Ø² Ø¯Ù‚Øª Ø¨Ø§Ù„Ø§ |
| Sliding Counter | Ù…ØªÙˆØ³Ø·-Ø¨Ø§Ù„Ø§ | Ù…ØªÙˆØ³Ø·      | Ù…ØªÙˆØ³Ø·      | ØªØ¹Ø§Ø¯Ù„ Ø¨ÛŒÙ† Ù…Ù‚Ø¯Ø§Ø± Ùˆ Ù…Ù†Ø§Ø¨Ø¹     |

* Fixed Window: Ø³Ø§Ø¯Ù‡ ÙˆÙ„ÛŒ Ù…Ø´Ú©Ù„ burst Ø¯Ø§Ø±Ø¯.
* Sliding Log: Ø¯Ù‚ÛŒÙ‚ ÙˆÙ„ÛŒ Ø­Ø§ÙØ¸Ù‡â€ŒØ¨Ø± Ùˆ Ù¾ÛŒÚ†ÛŒØ¯Ù‡.
* Sliding Counter: ØªØ¹Ø§Ø¯Ù„ Ø¯Ù‚ÛŒÙ‚ Ùˆ Ø³Ø¨Ú©â€ŒØªØ±. ([medium.com][1], [geeksforgeeks.org][4])

---

## ðŸ”§ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ

* **Redis (Sorted Set + Lua scripts)**: Ø°Ø®ÛŒØ±Ù‡ Ùˆ Ø­Ø°Ù timestamp Ø¨Ù‡â€ŒØµÙˆØ±Øª atomically Ø¯Ø± Sliding Log. ([medium.com][3])
* **Envoy Proxy RateLimitService**: Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Sliding Window Counter ØªÙˆØ²ÛŒØ¹â€ŒØ´Ø¯Ù‡.
* **Amazon API Gateway**: Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù‚ÙˆØ§Ø¹Ø¯ rate limiting Ùˆ throttle Ù‚ÙˆØ§Ù†ÛŒÙ†.
* **Nginx + Lua / Kong Gateway**: Ù‚Ø§Ø¨Ù„ÛŒØª Ø§Ø¹Ù…Ø§Ù„ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ ØªØ±Ú©ÛŒØ¨ÛŒ ÛŒØ§ Ù…Ø³ØªÙ‚Ù„ Ø¯Ø± Edge/perimeter. ([codesmith.io][5], [dilipkumar.medium.com][2])

---

## ðŸ§  Ù†Ù…ÙˆÙ†Ù‡ ÙˆØ§Ù‚Ø¹ÛŒ (Circles.Life / Shopify)

* Ø´Ø±Ú©Øª Circles.Life Ø¯Ø± Ù…Ø«Ø§Ù„ Ø³ÛŒØ³ØªÙ… Ù¾Ø±Ø¯Ø§Ø®Øª Ø®ÙˆØ¯ Ø¨Ø±Ø§ÛŒ APIÙ‡Ø§ÛŒ Ø«Ø§Ù„Ø«ØŒ Ø§Ø² **Sliding Log** Ù‡Ù…Ø±Ø§Ù‡ Lua + Redis Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯:

  * Ø§ÙØ²ÙˆØ¯Ù† timestamp Ø¨Ø§ `ZADD`
  * Ø­Ø°Ù Ø²Ù…Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ù…Ù†Ù‚Ø¶ÛŒ Ø¨Ø§ `ZREMRANGEBYSCORE`
  * Ø´Ù…Ø§Ø±Ø´ `ZCARD`
  * ØªÙ†Ø¸ÛŒÙ… TTL Ø¨Ø§ `EXPIRE`
  * Ø§Ø¬Ø±Ø§ÛŒ atomic Ø¨Ø§ Lua script ÛŒØ§ MULTI/EXEC ([medium.com][3], [geeksforgeeks.org][4])

* Shopify Ù†ÛŒØ² Ø§Ø² Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ù…Ø´Ø§Ø¨Ù‡ÛŒ Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¨Ø±ÙˆØ² overload Ø¯Ø± endpointÙ‡Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.&#x20;

---

## ðŸ§© Ø¬Ù…Ø¹â€ŒØ¨Ù†Ø¯ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡ Ø´Ù…Ø§

* Ø§Ú¯Ø± Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¯Ù‚Øª Ø¨Ø§Ù„Ø§ Ø¯Ø§Ø±ÛŒØ¯ Ùˆ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø­Ø§ÙØ¸Ù‡ Ú©Ø§ÙÛŒ ØªØ®ØµÛŒØµ Ø¯Ù‡ÛŒØ¯ â†’ Ø§Ø² **Sliding Window Log** Ø¨Ø§ Redis Ø¨Ø®Ø±ÛŒØ¯ Ùˆ Ø§Ø² Lua Ø¨Ø±Ø§ÛŒ Ø§ØªÙ…ÛŒÚ©â€ŒØ³Ø§Ø²ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.
* Ø§Ú¯Ø± Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ ØªØ¹Ø§Ø¯Ù„ÛŒ Ø¨ÛŒÙ† Ø¯Ù‚Øª Ùˆ Ù…ØµØ±Ù Ø­Ø§ÙØ¸Ù‡ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯ â†’ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… **Sliding Window Counter** Ù…Ù†Ø§Ø³Ø¨ Ø§Ø³Øª.
* Ø¨Ø±Ø§ÛŒ ÙˆØ§Ø³Ø· API Gateway ÛŒØ§ Edge server â†’ Ø§Ø² Envoy ÛŒØ§ Kong ÛŒØ§ Nginx Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯ Ùˆ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ù…Ø·Ù„ÙˆØ¨ Ø±Ø§ Ù…Ø·Ø§Ø¨Ù‚ Ø¨Ø§ Ù†ÛŒØ§Ø² Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ù…Ø§ÛŒÛŒØ¯.

---

[1]: https://medium.com/%40saisandeepmopuri/system-design-rate-limiter-and-data-modelling-9304b0d18250?utm_source=chatgpt.com "System Design â€” Rate limiter and Data modelling - Medium"
[2]: https://dilipkumar.medium.com/rate-limiter-system-design-c67f74e78771?utm_source=chatgpt.com "Rate limiter system design - Dilip Kumar"
[3]: https://medium.com/circleslife/implementing-a-sliding-log-rate-limiter-with-redis-go-d59c6765db80?utm_source=chatgpt.com "Implementing a sliding log rate limiter with redis & go | by Circles.Life"
[4]: https://www.geeksforgeeks.org/system-design/how-to-design-a-rate-limiter-api-learn-system-design/?utm_source=chatgpt.com "How to Design a Rate Limiter API | Learn System Design"
[5]: https://www.codesmith.io/blog/diagramming-system-design-rate-limiters?utm_source=chatgpt.com "Diagramming System Design: Rate Limiters - Codesmith"

## Ù…Ø¹Ù…Ø§Ø±ÛŒ Ø³Ø·Ø­ Ø¨Ø§Ù„Ø§ (High-level architecture)

Ø§ÛŒØ¯Ù‡â€ŒÛŒ Ù¾Ø§ÛŒÙ‡ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ù…Ø­Ø¯ÙˆØ¯Ø³Ø§Ø²ÛŒ Ù†Ø±Ø® (Rate Limiting) Ø³Ø§Ø¯Ù‡ Ø§Ø³Øª. Ø¯Ø± Ø³Ø·Ø­ Ø¨Ø§Ù„Ø§ØŒ Ù…Ø§ Ø¨Ù‡ ÛŒÚ© **Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ (counter)** Ù†ÛŒØ§Ø² Ø¯Ø§Ø±ÛŒÙ… ØªØ§ Ø¨ØªÙˆØ§Ù†ÛŒÙ… ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø§Ø² ÛŒÚ© Ú©Ø§Ø±Ø¨Ø± Ø®Ø§ØµØŒ Ø¢Ø¯Ø±Ø³ IP Ù…Ø´Ø®ØµØŒ ÛŒØ§ Ù‡Ø± Ù‡ÙˆÛŒØª Ø¯ÛŒÚ¯Ø± Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯ Ø±Ø§ Ù¾ÛŒÚ¯ÛŒØ±ÛŒ Ú©Ù†ÛŒÙ…. Ø§Ú¯Ø± Ù…Ù‚Ø¯Ø§Ø± Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø¨ÛŒØ´ØªØ± Ø§Ø² Ø­Ø¯ Ù…Ø¬Ø§Ø² Ø¨Ø§Ø´Ø¯ØŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø±Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯.

### Ù…Ø­Ù„ Ø°Ø®ÛŒØ±Ù‡ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡â€ŒÙ‡Ø§ Ú©Ø¬Ø§Ø³ØªØŸ

Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² **Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡ Ø¯ÛŒØ³Ú©ÛŒ** (Ù…Ø«Ù„ MySQL ÛŒØ§ PostgreSQL) Ø§ÛŒØ¯Ù‡â€ŒÛŒ Ø®ÙˆØ¨ÛŒ Ù†ÛŒØ³ØªØŒ Ú†Ø±Ø§ Ú©Ù‡ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø¯ÛŒØ³Ú© Ú©Ù†Ø¯ Ø§Ø³Øª Ùˆ Ø¨Ø§Ø¹Ø« Ø§ÙØ²Ø§ÛŒØ´ ØªØ£Ø®ÛŒØ± (latency) Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ø¨Ù‡ Ø¬Ø§ÛŒ Ø¢Ù†ØŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² **Ú©Ø´ Ø¯Ø±ÙˆÙ†â€ŒØ­Ø§ÙØ¸Ù‡â€ŒØ§ÛŒ (in-memory cache)** Ù…Ø§Ù†Ù†Ø¯ **Redis** Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ú†Ø±Ø§ØŸ

Ø²ÛŒØ±Ø§ Redis:

* Ø³Ø±Ø¹Øª Ø¨Ø§Ù„Ø§ Ø¯Ø§Ø±Ø¯ (ØªØ§ Ù…ÛŒÙ„ÛŒÙˆÙ†â€ŒÙ‡Ø§ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø± Ø«Ø§Ù†ÛŒÙ‡)
* Ø§Ø² **Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ Ø§Ù†Ù‚Ø¶Ø§ÛŒ Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Ø²Ù…Ø§Ù†** (Time-based expiration) Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯

### Redis Ú†Ù‡ Ø¯Ø³ØªÙˆØ±Ø§Øª Ú©Ù„ÛŒØ¯ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ú©Ø§Ø± Ø¯Ø§Ø±Ø¯ØŸ

* `INCR`: Ù…Ù‚Ø¯Ø§Ø± Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø±Ø§ ÛŒÚ© ÙˆØ§Ø­Ø¯ Ø§ÙØ²Ø§ÛŒØ´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.
* `EXPIRE`: Ø²Ù…Ø§Ù† Ø§Ù†Ù‚Ø¶Ø§ Ø¨Ø±Ø§ÛŒ Ú©Ù„ÛŒØ¯ ØªØ¹ÛŒÛŒÙ† Ù…ÛŒâ€ŒÚ©Ù†Ø¯Ø› Ù¾Ø³ Ø§Ø² Ø§Ù†Ù‚Ø¶Ø§ØŒ Ú©Ù„ÛŒØ¯ (Ùˆ Ù…Ù‚Ø¯Ø§Ø± Ø¢Ù†) Ø¨Ù‡â€ŒØ·ÙˆØ± Ø®ÙˆØ¯Ú©Ø§Ø± Ø§Ø² Ø¨ÛŒÙ† Ù…ÛŒâ€ŒØ±ÙˆØ¯.

---

### Ù…Ø±Ø§Ø­Ù„ Ø§Ø¬Ø±Ø§ÛŒ Rate Limiting Ø¯Ø± Ø³Ø·Ø­ Ø¨Ø§Ù„Ø§:

![](./Pictures/4-12.png
)
1. **Ú©Ù„Ø§ÛŒÙ†Øª (Client)** ÛŒÚ© Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ù‡ Ø³ÛŒØ³ØªÙ… Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
2. Ø§ÛŒÙ† Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ù‡ **Ù…ÛŒØ§Ù†â€ŒØ§ÙØ²Ø§Ø± Ù…Ø­Ø¯ÙˆØ¯Ø³Ø§Ø²ÛŒ Ù†Ø±Ø® (Rate Limiting Middleware)** Ù…ÛŒâ€ŒØ±Ø³Ø¯.
3. Ù…ÛŒØ§Ù†â€ŒØ§ÙØ²Ø§Ø±ØŒ Ù…Ù‚Ø¯Ø§Ø± Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø±Ø§ Ø§Ø² **Bucket** Ù…ØªÙ†Ø§Ø¸Ø± Ø¯Ø± Redis Ø¯Ø±ÛŒØ§ÙØª Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ø¢ÛŒØ§ Ø¨Ù‡ Ø­Ø¯ Ù…Ø¬Ø§Ø² Ø±Ø³ÛŒØ¯Ù‡ ÛŒØ§ Ù†Ù‡.
4. Ø§Ú¯Ø± Ø­Ø¯ Ù…Ø¬Ø§Ø² **Ø±Ø³ÛŒØ¯Ù‡ Ø¨Ø§Ø´Ø¯**ØŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø±Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
5. Ø§Ú¯Ø± Ø­Ø¯ Ù…Ø¬Ø§Ø² **Ù†Ø±Ø³ÛŒØ¯Ù‡ Ø¨Ø§Ø´Ø¯**:

   * Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ù‡ Ø³Ù…Øª Ø³Ø±ÙˆØ±Ù‡Ø§ÛŒ API ÙØ±Ø³ØªØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
   * Ù‡Ù…â€ŒØ²Ù…Ø§Ù†ØŒ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø¯Ø± Redis **ÛŒÚ© ÙˆØ§Ø­Ø¯ Ø§ÙØ²Ø§ÛŒØ´** Ù…ÛŒâ€ŒÛŒØ§Ø¨Ø¯ Ùˆ **Ù…Ø¬Ø¯Ø¯Ø§Ù‹ Ø°Ø®ÛŒØ±Ù‡** Ù…ÛŒâ€ŒØ´ÙˆØ¯.

---

### Ù…Ø«Ø§Ù„ ÙˆØ§Ù‚Ø¹ÛŒ:

ÙØ±Ø¶ Ú©Ù†ÛŒØ¯ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¨Ø§ IP `192.168.1.1` Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø­Ø¯Ø§Ú©Ø«Ø± **Û±Û° Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø± Ø¯Ù‚ÛŒÙ‚Ù‡** Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯:

* Ø¯Ø± Ø§ÙˆÙ„ÛŒÙ† Ø¯Ø±Ø®ÙˆØ§Ø³ØªØŒ Redis Ù…Ù‚Ø¯Ø§Ø± `counter:192.168.1.1` Ø±Ø§ Ø§Ø² 0 Ø¨Ù‡ 1 Ø§ÙØ²Ø§ÛŒØ´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ùˆ `EXPIRE` Ø±Ø§ Ø±ÙˆÛŒ 60 Ø«Ø§Ù†ÛŒÙ‡ ØªÙ†Ø¸ÛŒÙ… Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
* Ø¨Ø§ Ù‡Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø¹Ø¯ÛŒØŒ Ù…Ù‚Ø¯Ø§Ø± Ø§ÛŒÙ† Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø§ÙØ²Ø§ÛŒØ´ Ù…ÛŒâ€ŒÛŒØ§Ø¨Ø¯.
* Ø§Ú¯Ø± Ù…Ù‚Ø¯Ø§Ø± Ø¨Ù‡ 11 Ø¨Ø±Ø³Ø¯ØŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø±Ø¯ Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯ ØªØ§ Ø²Ù…Ø§Ù†ÛŒ Ú©Ù‡ Ø§Ù†Ù‚Ø¶Ø§ Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· `EXPIRE` Ø§ØªÙØ§Ù‚ Ø¨ÛŒÙØªØ¯ Ùˆ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø­Ø°Ù Ø´ÙˆØ¯.

---

### Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø§ÛŒÙ† Ù…Ø¹Ù…Ø§Ø±ÛŒ:

| Ø§Ø¨Ø²Ø§Ø±                                    | ØªÙˆØ¶ÛŒØ­                                                                        |
| ---------------------------------------- | ---------------------------------------------------------------------------- |
| **Redis**                                | Ù…Ø­Ø¨ÙˆØ¨â€ŒØªØ±ÛŒÙ† Ú©Ø´ Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Rate Limiter Ø¨Ø§ `INCR`, `EXPIRE`, `Lua Script` |
| **Kong API Gateway**                     | Ø¯Ø§Ø±Ø§ÛŒ Ù¾Ù„Ø§Ú¯ÛŒÙ† rate-limiting Ø¨Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Redis backend                         |
| **Envoy Proxy**                          | Ø¯Ø§Ø±Ø§ÛŒ Ø³Ø±ÙˆÛŒØ³ RateLimitService Ú©Ù‡ Ø§Ø² Ú¯ÛŒØªâ€ŒÙˆÛŒ Ù…Ø±Ú©Ø²ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯              |
| **NGINX + Lua**                          | Ø§Ù…Ú©Ø§Ù† Ø§Ø¬Ø±Ø§ÛŒ Ù…Ø­Ø¯ÙˆØ¯Ø³Ø§Ø²ÛŒ Ù†Ø±Ø® Ø¨Ù‡ ØµÙˆØ±Øª edge Ø¨Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Redis                     |
| **Cloudflare Workers / AWS API Gateway** | Ø¨Ø±Ø§ÛŒ Ù…Ø­Ø¯ÙˆØ¯Ø³Ø§Ø²ÛŒ Ù†Ø±Ø® Ø¯Ø± Ø³Ø·Ø­ CDN Ùˆ ÙØ§ÛŒØ±ÙˆØ§Ù„ API Ú©Ø§Ø±Ø¨Ø±Ø¯ Ø¯Ø§Ø±Ø¯                      |

---

### Ù…Ù†Ø§Ø¨Ø¹ Ù…Ø¹ØªØ¨Ø± ØªÚ©Ù…ÛŒÙ„ÛŒ:

* [Redis Rate Limiting](https://redis.io/docs/interact/ratelimit/)
* [Kong Rate Limiting Plugin](https://docs.konghq.com/hub/kong-inc/rate-limiting/)
* [Envoy RateLimitService Design](https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/other_features/global_rate_limiting)

---

Ø¯Ø± Ø§Ø¯Ø§Ù…Ù‡ ÛŒÚ© Ù†Ù…ÙˆÙ†Ù‡ Ø³Ø§Ø¯Ù‡ Ø§Ø² Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ **Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Fixed Window Counter** Ø¨Ø±Ø§ÛŒ Rate Limiting Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Redis Ùˆ Ø²Ø¨Ø§Ù† Python Ø¢Ù…Ø¯Ù‡ Ø§Ø³Øª. Ø§ÛŒÙ† Ù…Ø«Ø§Ù„ Ø¨Ù‡ Ø§Ø²Ø§ÛŒ Ù‡Ø± Ú©Ø§Ø±Ø¨Ø± (Ù…Ø«Ù„Ø§Ù‹ IP ÛŒØ§ user\_id)ØŒ Ø­Ø¯Ø§Ú©Ø«Ø± ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø± ÛŒÚ© Ù¾Ù†Ø¬Ø±Ù‡ Ø²Ù…Ø§Ù†ÛŒ (Ù…Ø«Ù„Ø§Ù‹ ÛŒÚ© Ø¯Ù‚ÛŒÙ‚Ù‡) Ø±Ø§ Ù…Ø­Ø¯ÙˆØ¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

> Ù¾ÛŒØ´â€ŒÙ†ÛŒØ§Ø²: Ù†ØµØ¨ Redis Ùˆ Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ `redis-py`

```bash
pip install redis
```

---

### ðŸ“„ ÙØ§ÛŒÙ„: `rate_limiter.py`

```python
import time
import redis

class FixedWindowRateLimiter:
    def __init__(self, redis_client, limit: int, window_seconds: int):
        self.redis = redis_client
        self.limit = limit
        self.window = window_seconds

    def _get_redis_key(self, identifier: str) -> str:
        # Ú©Ù„ÛŒØ¯ Redis Ø´Ø§Ù…Ù„ Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø± Ùˆ timestamp Ø±Ù†Ø¯Ø´Ø¯Ù‡ Ø¨Ù‡ Ø§Ø¨ØªØ¯Ø§ÛŒ Ù¾Ù†Ø¬Ø±Ù‡ Ø²Ù…Ø§Ù†ÛŒ Ø§Ø³Øª
        window_start = int(time.time()) // self.window
        return f"rate:{identifier}:{window_start}"

    def allow_request(self, identifier: str) -> bool:
        key = self._get_redis_key(identifier)
        current_count = self.redis.get(key)

        if current_count is None:
            # Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø§ÙˆÙ„ Ø¯Ø± Ø§ÛŒÙ† Ù¾Ù†Ø¬Ø±Ù‡ Ø²Ù…Ø§Ù†ÛŒ
            self.redis.set(key, 1, ex=self.window)
            return True

        if int(current_count) < self.limit:
            self.redis.incr(key)
            return True
        else:
            return False
```

---

### ðŸ§ª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Rate Limiter

```python
if __name__ == "__main__":
    r = redis.Redis(host='localhost', port=6379, db=0)
    limiter = FixedWindowRateLimiter(redis_client=r, limit=5, window_seconds=60)

    user_id = "192.168.1.10"
    for i in range(10):
        allowed = limiter.allow_request(user_id)
        print(f"Request {i+1} allowed: {allowed}")
        time.sleep(5)
```

---

### ðŸ›  ØªÙˆØ¶ÛŒØ­ Ø¹Ù…Ù„Ú©Ø±Ø¯:

* Ø§Ú¯Ø± Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± ÛŒÚ© Ø¨Ø§Ø²Ù‡â€ŒÛŒ Û¶Û° Ø«Ø§Ù†ÛŒÙ‡â€ŒØ§ÛŒ Ú©Ù…ØªØ± Ø§Ø² Ûµ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø§Ø±Ø³Ø§Ù„ Ú©Ù†Ø¯ØŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ù…Ø¬Ø§Ø² Ø®ÙˆØ§Ù‡Ù†Ø¯ Ø¨ÙˆØ¯.
* Redis Ú©Ù„ÛŒØ¯ Ø±Ø§ Ø¨Ø§ Ù†Ø§Ù…ÛŒ Ù…Ø§Ù†Ù†Ø¯ `rate:192.168.1.10:28930123` Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
* Ø¨Ø§ Ø§ÙˆÙ„ÛŒÙ† Ø¯Ø±Ø®ÙˆØ§Ø³ØªØŒ Ú©Ù„ÛŒØ¯ Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ `expire` Ø±ÙˆÛŒ Û¶Û° Ø«Ø§Ù†ÛŒÙ‡ ØªÙ†Ø¸ÛŒÙ… Ù…ÛŒâ€ŒØ´ÙˆØ¯.
* Ø§Ú¯Ø± Ø´Ù…Ø§Ø±Ø´ Ø§Ø² Ûµ Ø¨Ú¯Ø°Ø±Ø¯ØŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø±Ø¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ ØªØ§ Ù¾Ø§ÛŒØ§Ù† Ù¾Ù†Ø¬Ø±Ù‡ Ø²Ù…Ø§Ù†ÛŒ.

---

### âœ… Ù…Ø²Ø§ÛŒØ§:

* Ø§ØªÙ…ÛŒÚ© Ø¨ÙˆØ¯Ù† Ø¹Ù…Ù„ÛŒØ§Øª `incr` Ø¯Ø± Redis
* Ù‚Ø§Ø¨Ù„ÛŒØª ØªÙ†Ø¸ÛŒÙ… Ø§Ù†Ù‚Ø¶Ø§ÛŒ Ú©Ù„ÛŒØ¯Ù‡Ø§ Ø¨Ù‡â€ŒØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø±
* Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ø§ÛŒ ØªÙˆØ²ÛŒØ¹â€ŒØ´Ø¯Ù‡ Ø¨ÙˆØ¯Ù† Ø¯Ø± Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ Ú†Ù†Ø¯ Ø³Ø±ÙˆØ±ÛŒ

---

### Ú¯Ø§Ù… Ø³ÙˆÙ… - Ø¨Ø±Ø±Ø³ÛŒ Ø¹Ù…ÛŒÙ‚ Ø·Ø±Ø§Ø­ÛŒ (Design Deep Dive)

Ø·Ø±Ø§Ø­ÛŒ Ø³Ø·Ø­ Ø¨Ø§Ù„Ø§ Ú©Ù‡ Ø¯Ø± **Ø´Ú©Ù„ 12-4** Ø§Ø±Ø§Ø¦Ù‡ Ø´Ø¯Ù‡ØŒ Ø¨Ù‡ Ø¨Ø±Ø®ÛŒ Ø§Ø² Ù¾Ø±Ø³Ø´â€ŒÙ‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ Ù¾Ø§Ø³Ø® Ù†Ù…ÛŒâ€ŒØ¯Ù‡Ø¯:

* Ù‚ÙˆØ§Ù†ÛŒÙ† **Ù†Ø±Ø®â€ŒØ¯Ù‡ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ (Rate Limiting Rules)** Ú†Ú¯ÙˆÙ†Ù‡ Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ØŸ Ø§ÛŒÙ† Ù‚ÙˆØ§Ù†ÛŒÙ† Ø¯Ø± Ú©Ø¬Ø§ Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ØŸ
* Ú†Ú¯ÙˆÙ†Ù‡ Ø¨Ø§ÛŒØ¯ Ø¨Ø§ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ ØªØ­Øª Ù†Ø±Ø®â€ŒØ¯Ù‡ÛŒ Ù…Ø­Ø¯ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ (Rate Limited Requests) Ø¨Ø±Ø®ÙˆØ±Ø¯ Ú©Ø±Ø¯ØŸ

Ø¯Ø± Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø§Ø¨ØªØ¯Ø§ Ø¨Ù‡ Ù¾Ø±Ø³Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ù‚ÙˆØ§Ù†ÛŒÙ† Ù†Ø±Ø®â€ŒØ¯Ù‡ÛŒ Ù¾Ø§Ø³Ø® Ù…ÛŒâ€ŒØ¯Ù‡ÛŒÙ…ØŒ Ø³Ù¾Ø³ Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ø­Ø¯ÙˆØ¯Ø´Ø¯Ù‡ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…. Ø¯Ø± Ù†Ù‡Ø§ÛŒØªØŒ Ø¨Ù‡ Ø·Ø±Ø§Ø­ÛŒ Ù†Ø±Ø®â€ŒØ¯Ù‡ÛŒ Ø¯Ø± Ù…Ø­ÛŒØ·â€ŒÙ‡Ø§ÛŒ ØªÙˆØ²ÛŒØ¹â€ŒØ´Ø¯Ù‡ØŒ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ùˆ Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ Ø®ÙˆØ§Ù‡ÛŒÙ… Ù¾Ø±Ø¯Ø§Ø®Øª.

---

## Ù‚ÙˆØ§Ù†ÛŒÙ† Ù†Ø±Ø®â€ŒØ¯Ù‡ÛŒ (Rate Limiting Rules)

Ø´Ø±Ú©Øª **Lyft** (Ø³Ø±ÙˆÛŒØ³ Ø­Ù…Ù„â€ŒÙˆÙ†Ù‚Ù„ Ø¢Ù†Ù„Ø§ÛŒÙ† Ø¯Ø± Ø¢Ù…Ø±ÛŒÚ©Ø§) ÛŒÚ© Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øª Ù…ØªÙ†â€ŒØ¨Ø§Ø² Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Rate Limiting Ø§Ø±Ø§Ø¦Ù‡ Ø¯Ø§Ø¯Ù‡ Ø§Ø³Øª \[12]. Ø§Ú©Ù†ÙˆÙ† Ù†Ú¯Ø§Ù‡ÛŒ Ø¨Ù‡ Ø³Ø§Ø®ØªØ§Ø± Ø¯Ø§Ø®Ù„ÛŒ Ø§ÛŒÙ† Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øª Ùˆ Ù†Ù…ÙˆÙ†Ù‡â€ŒØ§ÛŒ Ø§Ø² Ù‚ÙˆØ§Ù†ÛŒÙ† ØªØ¹Ø±ÛŒÙâ€ŒØ´Ø¯Ù‡ Ø¯Ø± Ø¢Ù† Ø®ÙˆØ§Ù‡ÛŒÙ… Ø¯Ø§Ø´Øª:

```yaml
domain: messaging
descriptors:
  - key: message_type
    value: marketing
rate_limit:
  unit: day
  requests_per_unit: 5
```

Ø¯Ø± Ù…Ø«Ø§Ù„ Ø¨Ø§Ù„Ø§ØŒ Ø³ÛŒØ³ØªÙ… Ø¨Ù‡â€ŒÚ¯ÙˆÙ†Ù‡â€ŒØ§ÛŒ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø´Ø¯Ù‡ Ú©Ù‡ ÙÙ‚Ø· **Ûµ Ù¾ÛŒØ§Ù… Ù…Ø§Ø±Ú©ØªÛŒÙ†Ú¯ Ø¯Ø± Ø±ÙˆØ²** Ù…Ø¬Ø§Ø² Ø§Ø³Øª. ÛŒØ¹Ù†ÛŒ Ø§Ú¯Ø± Ø¨ÛŒØ´ Ø§Ø² Ø§ÛŒÙ† ØªØ¹Ø¯Ø§Ø¯ Ù¾ÛŒØ§Ù… Ø§Ø±Ø³Ø§Ù„ Ø´ÙˆØ¯ØŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø±Ø¯ Ø®ÙˆØ§Ù‡Ù†Ø¯ Ø´Ø¯.

Ù…Ø«Ø§Ù„ Ø¯ÛŒÚ¯Ø±:

```yaml
domain: auth
descriptors:
  - key: auth_type
    value: login
rate_limit:
  unit: minute
  requests_per_unit: 5
```

Ø¯Ø± Ø§ÛŒÙ† Ù‚Ø§Ù†ÙˆÙ†ØŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù…Ø¬Ø§Ø² Ù†ÛŒØ³ØªÙ†Ø¯ Ø¨ÛŒØ´ Ø§Ø² **Ûµ Ø¨Ø§Ø± Ø¯Ø± Ù‡Ø± Ø¯Ù‚ÛŒÙ‚Ù‡ Ù„Ø§Ú¯ÛŒÙ†** Ú©Ù†Ù†Ø¯.

> ðŸ’¡ **ÙˆØ§Ú˜Ù‡â€ŒØªÙˆØ¶ÛŒØ­:**
>
> * `domain`: Ø¯Ø§Ù…Ù†Ù‡â€ŒØ§ÛŒ Ú©Ù‡ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø¯Ø± Ø¢Ù† Ø§Ø¹Ù…Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯ (Ù…Ø«Ù„Ø§Ù‹ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª ÛŒØ§ Ù¾ÛŒØ§Ù…â€ŒØ±Ø³Ø§Ù†ÛŒ).
> * `descriptors`: ØªÙˆØµÛŒÙâ€ŒÚ©Ù†Ù†Ø¯Ù‡ Ù†ÙˆØ¹ Ø¹Ù…Ù„ÛŒØ§Øª (Ù…Ø«Ù„Ø§Ù‹ Ù†ÙˆØ¹ Ù¾ÛŒØ§Ù… ÛŒØ§ Ù†ÙˆØ¹ Ù„Ø§Ú¯ÛŒÙ†).
> * `requests_per_unit`: ØªØ¹Ø¯Ø§Ø¯ Ù…Ø¬Ø§Ø² Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø± ÙˆØ§Ø­Ø¯ Ø²Ù…Ø§Ù†ÛŒ.
> * `unit`: ÙˆØ§Ø­Ø¯ Ø²Ù…Ø§Ù† (Ø«Ø§Ù†ÛŒÙ‡ØŒ Ø¯Ù‚ÛŒÙ‚Ù‡ØŒ Ø±ÙˆØ²ØŒ Ù…Ø§Ù‡ Ùˆ ...).

Ø§ÛŒÙ† Ù‚ÙˆØ§Ù†ÛŒÙ† Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ø¯Ø± ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ (Configuration Files) Ù†ÙˆØ´ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ Ùˆ Ø¯Ø± Ø¯ÛŒØ³Ú© Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ù†Ø¯.

---

## Ø¹Ø¨ÙˆØ± Ø§Ø² Ø­Ø¯ Ù…Ø¬Ø§Ø² Ù†Ø±Ø® (Exceeding the Rate Limit)

Ø§Ú¯Ø± ÛŒÚ© Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø§Ø² Ø­Ø¯ Ù…Ø¬Ø§Ø² ØªØ¹Ø±ÛŒÙâ€ŒØ´Ø¯Ù‡ ØªØ¬Ø§ÙˆØ² Ú©Ù†Ø¯ØŒ API Ù…Ø±Ø¨ÙˆØ·Ù‡ Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ Ú©Ù„Ø§ÛŒÙ†ØªØŒ Ú©Ø¯ Ù¾Ø§Ø³Ø® **HTTP 429** Ø§Ø±Ø³Ø§Ù„ Ú©Ù†Ø¯. Ø§ÛŒÙ† Ú©Ø¯ Ø¨Ù‡ Ù…Ø¹Ù†ÛŒ Â«Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨ÛŒØ´ Ø§Ø² Ø­Ø¯Â» (Too Many Requests) Ø§Ø³Øª.

Ø¯Ø± Ø¨Ø±Ø®ÛŒ Ø³Ù†Ø§Ø±ÛŒÙˆÙ‡Ø§ØŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ Ø¨Ø§Ø± Ø¨Ø§Ù„Ø§ Reject Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø¯Ø± ØµÙ Ù‚Ø±Ø§Ø± Ø¨Ú¯ÛŒØ±Ù†Ø¯ ØªØ§ Ø¨Ø¹Ø¯Ø§Ù‹ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø´ÙˆÙ†Ø¯.
Ù…Ø«Ù„Ø§Ù‹ Ø§Ú¯Ø± Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§ÛŒÛŒ (Orders) Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ Ø¨Ø§Ø± Ø¨ÛŒØ´ Ø§Ø² Ø­Ø¯ Ø±Ø¯ Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ù†Ø¯ØŒ Ø§ÛŒÙ† Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø¯Ø± ØµÙ Ù‚Ø±Ø§Ø± Ú¯ÛŒØ±Ù†Ø¯ Ùˆ Ù¾Ø³ Ø§Ø² Ú©Ø§Ù‡Ø´ Ø¨Ø§Ø± Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø´ÙˆÙ†Ø¯.

---

## Ù‡Ø¯Ø±Ù‡Ø§ÛŒ Rate Limiter Ø¯Ø± HTTP (Rate Limiter Headers)

Ø³Ø¤Ø§Ù„:
Ú†Ú¯ÙˆÙ†Ù‡ Ú©Ù„Ø§ÛŒÙ†Øª Ø¨ÙÙ‡Ù…Ø¯ Ú©Ù‡ ØªØ­Øª Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ù‚Ø±Ø§Ø± Ú¯Ø±ÙØªÙ‡ (Throttled) ÛŒØ§ Ú†Ù‚Ø¯Ø± Ù…Ø¬Ø§Ø² Ø¨Ù‡ Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨ÛŒØ´ØªØ± Ø§Ø³ØªØŸ

Ù¾Ø§Ø³Ø® Ø¯Ø± **HTTP Response Headers** Ù†Ù‡ÙØªÙ‡ Ø§Ø³Øª. Ø²Ù…Ø§Ù†ÛŒ Ú©Ù‡ Ù…Ø­Ø¯ÙˆØ¯Ú©Ù†Ù†Ø¯Ù‡ Ù†Ø±Ø® (Rate Limiter) Ù¾Ø§Ø³Ø® Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ØŒ Ù‡Ø¯Ø±Ù‡Ø§ÛŒ Ø²ÛŒØ± Ø±Ø§ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯:

| Ù‡Ø¯Ø±                       | ØªÙˆØ¶ÛŒØ­                                                                  |
| ------------------------- | ---------------------------------------------------------------------- |
| `X-Ratelimit-Remaining`   | ØªØ¹Ø¯Ø§Ø¯ Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ø¬Ø§Ø² Ø¯Ø± Ø¨Ø§Ø²Ù‡ Ø²Ù…Ø§Ù†ÛŒ ÙØ¹Ù„ÛŒ                   |
| `X-Ratelimit-Limit`       | Ø³Ù‚Ù ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ø¬Ø§Ø² Ø¯Ø± ÛŒÚ© Ø¨Ø§Ø²Ù‡ Ø²Ù…Ø§Ù†ÛŒ Ù…Ø´Ø®Øµ                       |
| `X-Ratelimit-Retry-After` | ØªØ¹Ø¯Ø§Ø¯ Ø«Ø§Ù†ÛŒÙ‡â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø¨Ø§ÛŒØ¯ ØµØ¨Ø± Ú©Ù†ÛŒØ¯ ØªØ§ Ø¨ØªÙˆØ§Ù†ÛŒØ¯ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯ |

> Ù…Ø«Ø§Ù„ Ù¾Ø§Ø³Ø® HTTP Ø¯Ø± ØµÙˆØ±Øª Ø¹Ø¨ÙˆØ± Ø§Ø² Ù…Ø­Ø¯ÙˆØ¯ÛŒØª:

```http
HTTP/1.1 429 Too Many Requests
X-Ratelimit-Limit: 5
X-Ratelimit-Remaining: 0
X-Ratelimit-Retry-After: 60
```

---

### ðŸ“Œ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÚ©Ù…ÛŒÙ„ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ:

* Ø¯Ø± **Redis** Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø§ÛŒÙ† Ù‚ÙˆØ§Ù†ÛŒÙ† Ø±Ø§ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø¯Ø³ØªÙˆØ±Ø§Øª `INCR`, `EXPIRE` Ùˆ ÛŒØ§ Ø§Ø³Ú©Ø±ÛŒÙ¾Øªâ€ŒÙ‡Ø§ÛŒ **Lua** (Ù…Ù†Ø¨Ø¹: [Redis Lua Scripting Docs](https://redis.io/docs/manual/programmability/eval-intro/)) Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ú©Ø±Ø¯.
* Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ù¾ÛŒØ´Ø±ÙØªÙ‡â€ŒØªØ± Ø¯Ø± Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒÚ†ÛŒØ¯Ù‡ØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø§Ø² Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒÛŒ Ù…Ø§Ù†Ù†Ø¯:

  * **Envoy Rate Limit Service**
  * **Gloo Gateway**
  * **Kong Gateway** (Ø¨Ø§ Ù¾Ù„Ø§Ú¯ÛŒÙ† Rate Limiting)
  * **AWS API Gateway Rate Limits**
  * **Istio QuotaSpec + Quota Enforcement Handler**
    Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ø±Ø¯.

---

### Ø·Ø±Ø§Ø­ÛŒ Ø¬Ø²Ø¦ÛŒ (Detailed Design)

**Ø´Ú©Ù„ 13-4**ØŒ ÛŒÚ© Ù†Ù…Ø§ÛŒ Ú©Ù„ÛŒ Ø§Ø² Ø·Ø±Ø§Ø­ÛŒ Ø¯Ù‚ÛŒÙ‚ Ø³ÛŒØ³ØªÙ… Ù…Ø­Ø¯ÙˆØ¯Ø³Ø§Ø²ÛŒ Ù†Ø±Ø® (Rate Limiting) Ø±Ø§ Ø§Ø±Ø§Ø¦Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯. Ø¯Ø± Ø§ÛŒÙ† Ø·Ø±Ø§Ø­ÛŒØŒ Ø§Ø¬Ø²Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø¨Ø§ ØªØ¹Ø§Ù…Ù„ Ø¨Ø§ ÛŒÚ©Ø¯ÛŒÚ¯Ø±ØŒ Ú©Ù†ØªØ±Ù„ Ø¯Ù‚ÛŒÙ‚ÛŒ Ø±ÙˆÛŒ ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ ÙˆØ±ÙˆØ¯ÛŒ Ø¨Ù‡ API Ø§Ø¹Ù…Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯.

![](./Pictures/4-13.png)

#### ÙØ±Ø¢ÛŒÙ†Ø¯ Ø·Ø±Ø§Ø­ÛŒ Ø¨Ù‡â€ŒØµÙˆØ±Øª Ú¯Ø§Ù…â€ŒØ¨Ù‡â€ŒÚ¯Ø§Ù…:

1. **Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù‚ÙˆØ§Ù†ÛŒÙ† Ø±ÙˆÛŒ Ø¯ÛŒØ³Ú©:**

   * Ù‚ÙˆØ§Ù†ÛŒÙ† Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ù†Ø±Ø®â€ŒØ¯Ù‡ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ (Rate Limiting Rules) Ø¨Ù‡â€ŒØµÙˆØ±Øª ÙØ§ÛŒÙ„ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø±ÙˆÛŒ Ø¯ÛŒØ³Ú© Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.
   * **Workers (Ú©Ø§Ø±Ú¯Ø±Ø§Ù† Ù¾Ø±Ø¯Ø§Ø²Ø´ÛŒ)** Ø¨Ù‡ ØµÙˆØ±Øª Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ Ø§ÛŒÙ† ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ø±Ø§ Ø§Ø² Ø¯ÛŒØ³Ú© Ø®ÙˆØ§Ù†Ø¯Ù‡ Ùˆ Ø¯Ø± Ú©Ø´ (Cache) Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯ ØªØ§ Ø¯Ø³ØªØ±Ø³ÛŒ Ø³Ø±ÛŒØ¹â€ŒØªØ±ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù†Ø¯.

2. **Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø§Ø² Ú©Ù„Ø§ÛŒÙ†Øª:**

   * ÙˆÙ‚ØªÛŒ ÛŒÚ© Ú©Ù„Ø§ÛŒÙ†Øª (Ù…Ø«Ù„Ø§Ù‹ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ù…ÙˆØ¨Ø§ÛŒÙ„ ÛŒØ§ Ø³Ø±ÙˆÛŒØ³ Ø¯ÛŒÚ¯Ø±) Ø¯Ø±Ø®ÙˆØ§Ø³ØªÛŒ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ØŒ Ø§ÛŒÙ† Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø§Ø¨ØªØ¯Ø§ Ø¨Ù‡ ÛŒÚ© **Middleware Ù…Ø®ØµÙˆØµ Rate Limiting** Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯.

3. **Ø®ÙˆØ§Ù†Ø¯Ù† Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø§Ø² Ú©Ø´ Ùˆ Redis:**

   * Ø§ÛŒÙ† Middleware Ø§Ø¨ØªØ¯Ø§ Ù‚ÙˆØ§Ù†ÛŒÙ† Ù…Ø­Ø¯ÙˆØ¯Ø³Ø§Ø²ÛŒ Ø±Ø§ Ø§Ø² Ú©Ø´ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
   * Ø³Ù¾Ø³ Ù…Ù‚Ø¯Ø§Ø± Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ (Counter) Ùˆ Ø¢Ø®Ø±ÛŒÙ† Ø²Ù…Ø§Ù† Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ú©Ø§Ø±Ø¨Ø± Ø±Ø§ Ø§Ø² **Ø­Ø§ÙØ¸Ù‡ Redis** ÙˆØ§Ú©Ø´ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

4. **ØªØµÙ…ÛŒÙ…â€ŒÚ¯ÛŒØ±ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§:**

   * Ø§Ú¯Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø§Ø±Ø³Ø§Ù„ÛŒ **Ø§Ø² Ø­Ø¯ Ù…Ø¬Ø§Ø² Ú©Ù…ØªØ± Ø¨Ø§Ø´Ø¯**:

     * Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ù‡ Ø³Ù…Øª Ø³Ø±ÙˆØ±Ù‡Ø§ÛŒ API Ù‡Ø¯Ø§ÛŒØª Ù…ÛŒâ€ŒØ´ÙˆØ¯.
   * Ø§Ú¯Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øª **Ø§Ø² Ø­Ø¯ Ù…Ø¬Ø§Ø² Ø¨ÛŒØ´ØªØ± Ø¨Ø§Ø´Ø¯**:

     * Ø¨Ù‡ Ú©Ù„Ø§ÛŒÙ†Øª Ú©Ø¯ **HTTP 429 (Too Many Requests)** Ø¨Ø§Ø²Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.
     * Ùˆ Ù‡Ù…â€ŒØ²Ù…Ø§Ù† Ù…Ù…Ú©Ù† Ø§Ø³Øª ÛŒÚ©ÛŒ Ø§Ø² Ø¯Ùˆ Ø­Ø§Ù„Øª Ø²ÛŒØ± Ø±Ø® Ø¯Ù‡Ø¯:

       * Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ù‡â€ŒØ·ÙˆØ± Ú©Ø§Ù…Ù„ **Ø¯ÙˆØ± Ø§Ù†Ø¯Ø§Ø®ØªÙ‡** (Dropped) Ø´ÙˆØ¯.
       * ÛŒØ§ Ø¯Ø± **ØµÙÛŒ (Queue)** Ù‚Ø±Ø§Ø± Ú¯ÛŒØ±Ø¯ ØªØ§ Ø¨Ø¹Ø¯Ø§Ù‹ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø´ÙˆØ¯.

---

### ðŸ“Œ Ù…ÙØ§Ù‡ÛŒÙ… Ù…Ù‡Ù… ÙÙ†ÛŒ:

| Ù…ÙˆÙ„ÙÙ‡                       | ØªÙˆØ¶ÛŒØ­                                                                                                                |
| --------------------------- | -------------------------------------------------------------------------------------------------------------------- |
| **Middleware Rate Limiter** | Ù„Ø§ÛŒÙ‡ Ù…ÛŒØ§Ù†ÛŒ Ú©Ù‡ Ù¾ÛŒØ´ Ø§Ø² Ø±Ø³ÛŒØ¯Ù† Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ù‡ APIØŒ Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ú©Ù‡ Ø¢ÛŒØ§ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…Ø¬Ø§Ø² Ø§Ø³Øª ÛŒØ§ Ø®ÛŒØ±.                              |
| **Cache**                   | Ø­Ø§ÙØ¸Ù‡ Ù…ÙˆÙ‚Øª (Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ø¯Ø± Ø­Ø§ÙØ¸Ù‡ RAM ÛŒØ§ Redis) Ø¨Ø±Ø§ÛŒ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ù‚ÙˆØ§Ù†ÛŒÙ† Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒâ€ŒØ´Ø¯Ù‡ Ø¨Ù‡â€ŒØµÙˆØ±Øª Ø³Ø±ÛŒØ¹.                            |
| **Redis**                   | Ø¨Ø±Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡â€ŒÙ‡Ø§ Ùˆ Ø²Ù…Ø§Ù† Ø¢Ø®Ø±ÛŒÙ† Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ø¨Ø³ÛŒØ§Ø± Ø³Ø±ÛŒØ¹ Ùˆ Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ø§ÛŒ Ù…Ø­ÛŒØ·â€ŒÙ‡Ø§ÛŒ real-time.       |
| **Queue (ØµÙ)**              | Ø§Ú¯Ø± Ø³ÛŒØ§Ø³Øª Ø³ÛŒØ³ØªÙ… Ø§Ø¬Ø§Ø²Ù‡ Ø¯Ù‡Ø¯ØŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ ÙØ¹Ù„Ø§Ù‹ Ø±Ø¯ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø¯Ø± ØµÙ Ù‚Ø±Ø§Ø± Ú¯ÛŒØ±Ù†Ø¯ ØªØ§ Ø¯Ø± Ø²Ù…Ø§Ù† Ù…Ù†Ø§Ø³Ø¨ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø´ÙˆÙ†Ø¯. |


---

## Ù…Ø­Ø¯ÙˆØ¯Ø³Ø§Ø² Ù†Ø±Ø® (Rate Limiter) Ø¯Ø± Ù…Ø­ÛŒØ· ØªÙˆØ²ÛŒØ¹â€ŒØ´Ø¯Ù‡

Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ ÛŒÚ© Ù…Ø­Ø¯ÙˆØ¯Ø³Ø§Ø² Ù†Ø±Ø® Ø¯Ø± Ù…Ø­ÛŒØ·ÛŒ Ú©Ù‡ ÙÙ‚Ø· ÛŒÚ© Ø³Ø±ÙˆØ± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯ Ù†Ø³Ø¨ØªØ§Ù‹ Ø¢Ø³Ø§Ù† Ø§Ø³Øª. Ø§Ù…Ø§ **Ú¯Ø³ØªØ±Ø´ Ø§ÛŒÙ† Ø³ÛŒØ³ØªÙ… Ø¨Ø±Ø§ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Ú†Ù†Ø¯ÛŒÙ† Ø³Ø±ÙˆØ± Ùˆ Ú†Ù†Ø¯ÛŒÙ† Thread Ù‡Ù…Ø²Ù…Ø§Ù†**ØŒ ÛŒÚ© Ù…ÙˆØ¶ÙˆØ¹ Ú©Ø§Ù…Ù„Ø§Ù‹ Ù…ØªÙØ§ÙˆØª Ùˆ Ù¾ÛŒÚ†ÛŒØ¯Ù‡ Ø§Ø³Øª.

### Ø¯Ùˆ Ú†Ø§Ù„Ø´ Ø§Ø³Ø§Ø³ÛŒ Ø¯Ø± Ù…Ø­ÛŒØ· ØªÙˆØ²ÛŒØ¹â€ŒØ´Ø¯Ù‡:

1. **Ø´Ø±Ø§ÛŒØ· Ø±Ù‚Ø§Ø¨ØªÛŒ (Race Condition)**
2. **Ù…Ø³Ø§Ø¦Ù„ Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ (Synchronization Issue)**

---

### ðŸ’¢ 1. Ø´Ø±Ø§ÛŒØ· Ø±Ù‚Ø§Ø¨ØªÛŒ (Race Condition)

Ù‡Ù…Ø§Ù†â€ŒØ·ÙˆØ± Ú©Ù‡ Ù‚Ø¨Ù„Ø§Ù‹ Ú¯ÙØªÙ‡ Ø´Ø¯ØŒ ÛŒÚ© Ù…Ø­Ø¯ÙˆØ¯Ø³Ø§Ø² Ù†Ø±Ø® Ø¯Ø± Ø³Ø·Ø­ Ø¨Ø§Ù„Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ø²ÛŒØ± Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯:

* Ù…Ù‚Ø¯Ø§Ø± Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ (Counter) Ø±Ø§ Ø§Ø² Redis Ù…ÛŒâ€ŒØ®ÙˆØ§Ù†Ø¯.
* Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ú©Ù‡ Ø¢ÛŒØ§ `(counter + 1)` Ø§Ø² Ø¢Ø³ØªØ§Ù†Ù‡ Ù…Ø¬Ø§Ø² Ø¨ÛŒØ´ØªØ± Ø§Ø³Øª ÛŒØ§ Ù†Ù‡.
* Ø§Ú¯Ø± Ø¨ÛŒØ´ØªØ± Ù†Ø¨Ø§Ø´Ø¯ØŒ Ù…Ù‚Ø¯Ø§Ø± Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø±Ø§ Ø¯Ø± Redis ÛŒÚ© ÙˆØ§Ø­Ø¯ Ø§ÙØ²Ø§ÛŒØ´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.

Ø§Ù…Ø§ Ø¯Ø± Ù…Ø­ÛŒØ·â€ŒÙ‡Ø§ÛŒ Ø¨Ø§ ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø§Ù„Ø§ (High Concurrency)ØŒ Ø§ÛŒÙ† Ù…Ù†Ø·Ù‚ Ø³Ø§Ø¯Ù‡ Ø¨Ø§Ø¹Ø« **Ø´Ø±Ø§ÛŒØ· Ø±Ù‚Ø§Ø¨ØªÛŒ** Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ø¨Ù‡ Ø´Ú©Ù„ Ø²ÛŒØ± Ø¯Ù‚Øª Ú©Ù†:


![](./Pictures/4-14.png)

ðŸ“Œ ÙØ±Ø¶ Ú©Ù† Ù…Ù‚Ø¯Ø§Ø± Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø¯Ø± Redis Ø¨Ø±Ø§Ø¨Ø± Û³ Ø§Ø³Øª. Ø¯Ùˆ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù‡Ù…Ø²Ù…Ø§Ù† ÙˆØ§Ø±Ø¯ Ø³ÛŒØ³ØªÙ… Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ Ùˆ Ù‡Ø± Ø¯Ùˆ Ù…Ù‚Ø¯Ø§Ø± Û³ Ø±Ø§ Ø§Ø² Redis Ù…ÛŒâ€ŒØ®ÙˆØ§Ù†Ù†Ø¯ØŒ Ø¨Ø¯ÙˆÙ† Ø§ÛŒÙ†Ú©Ù‡ Ø¨Ø¯Ø§Ù†Ù†Ø¯ Ø¯ÛŒÚ¯Ø±ÛŒ Ù‡Ù… Ù‡Ù…ÛŒÙ† Ú©Ø§Ø± Ø±Ø§ Ú©Ø±Ø¯Ù‡. Ø³Ù¾Ø³ Ù‡Ø± Ø¯Ùˆ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø±Ø§ Ø¨Ù‡ Û´ Ø§ÙØ²Ø§ÛŒØ´ Ù…ÛŒâ€ŒØ¯Ù‡Ù†Ø¯ Ùˆ Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯.

ðŸ”´ Ù†ØªÛŒØ¬Ù‡: Ù‡Ø± Ø¯Ùˆ Ø¯Ø±Ø®ÙˆØ§Ø³Øª ÙÚ©Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø¨Ø±Ø§Ø¨Ø± Û´ Ø´Ø¯Ù‡ØŒ Ø¯Ø± Ø­Ø§Ù„ÛŒâ€ŒÚ©Ù‡ Ø¨Ø§ÛŒØ¯ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ ÙˆØ§Ù‚Ø¹ÛŒ Ûµ Ø¨Ø§Ø´Ø¯.

#### âœ… Ø±Ø§Ù‡â€ŒØ­Ù„â€ŒÙ‡Ø§:

* Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² **Lock** Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø´Ø±Ø§ÛŒØ· Ø±Ù‚Ø§Ø¨ØªÛŒ Ø±Ø§ Ø§Ø² Ø¨ÛŒÙ† Ø¨Ø¨Ø±Ø¯ØŒ Ø§Ù…Ø§ Ø¨Ø§Ø¹Ø« Ú©Ø§Ù‡Ø´ Ø´Ø¯ÛŒØ¯ Ú©Ø§Ø±Ø§ÛŒÛŒ (Performance) Ø³ÛŒØ³ØªÙ… Ù…ÛŒâ€ŒØ´ÙˆØ¯.
* **Ø¯Ùˆ Ø±ÙˆØ´ Ø±Ø§ÛŒØ¬ Ùˆ Ø³Ø±ÛŒØ¹â€ŒØªØ±** Ø¨Ø±Ø§ÛŒ Ø­Ù„ Ø§ÛŒÙ† Ù…Ø´Ú©Ù„ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯:

  1. Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² **Lua Script Ø¯Ø± Redis**: Ø§Ø¬Ø±Ø§ÛŒ Ø¹Ù…Ù„ÛŒØ§Øª Ø§ØªÙ…ÛŒÚ© (Atomic) Ø¨Ù‡â€ŒØµÙˆØ±Øª Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ú©Ù‡ ØªÙ…Ø§Ù… Ù…Ø±Ø§Ø­Ù„ Ø±Ø§ Ø¯Ø± ÛŒÚ© Ø¨Ù„Ø§Ú© Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.
  2. Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø³Ø§Ø®ØªØ§Ø± Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ **Sorted Set Ø¯Ø± Redis**: Ø¨Ø±Ø§ÛŒ Ø«Ø¨Øª Ø¯Ù‚ÛŒÙ‚â€ŒØªØ± Ùˆ Ú©Ù†ØªØ±Ù„ Ù‡Ù…Ø²Ù…Ø§Ù†ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ timestamp ÛŒØ§ Ø´Ù†Ø§Ø³Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øª.

---

### ðŸ”„ 2. Ù…Ø³Ø§Ø¦Ù„ Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ (Synchronization Issue)

Ø¯Ø± Ù…Ù‚ÛŒØ§Ø³ Ø¨Ø§Ù„Ø§ Ùˆ Ø²Ù…Ø§Ù†ÛŒ Ú©Ù‡ Ø¨Ø§ÛŒØ¯ Ø§Ø² Ù…ÛŒÙ„ÛŒÙˆÙ†â€ŒÙ‡Ø§ Ú©Ø§Ø±Ø¨Ø± Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø´ÙˆØ¯ØŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ÛŒÚ© Ø³Ø±ÙˆØ± Ø¨Ø±Ø§ÛŒ Rate Limiting Ú©Ø§ÙÛŒ Ù†ÛŒØ³Øª. Ø¯Ø± Ø§ÛŒÙ† Ø­Ø§Ù„Øª Ø§Ø² Ú†Ù†Ø¯ÛŒÙ† Ø³Ø±ÙˆØ± Rate Limiter Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.

Ø§Ù…Ø§ Ø§ÛŒÙ† Ú©Ø§Ø± Ù…Ù†Ø¬Ø± Ø¨Ù‡ **Ù…Ø´Ú©Ù„ Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ (Sync)** Ø¨ÛŒÙ† Ø³Ø±ÙˆØ±Ù‡Ø§ Ù…ÛŒâ€ŒØ´ÙˆØ¯:

ðŸ“Œ Ù…Ø«Ø§Ù„:

* **Client 1** Ø¨Ù‡ **Rate Limiter 1** Ù…ØªØµÙ„ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ø¯Ø§Ø±Ø¯.
* **Client 2** Ø¨Ù‡ **Rate Limiter 2** Ù…ØªØµÙ„ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŒ Ú©Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§ØªÛŒ Ø§Ø² Client 1 Ù†Ø¯Ø§Ø±Ø¯.
* Ú†ÙˆÙ† Ù„Ø§ÛŒÙ‡ ÙˆØ¨ (Web Tier) **stateless** Ø§Ø³ØªØŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù‡ Ù‡Ø± Rate Limiter Ø§Ø±Ø³Ø§Ù„ Ú©Ù†Ù†Ø¯.
* Ø§Ú¯Ø± Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ Ø§Ù†Ø¬Ø§Ù… Ù†Ø´ÙˆØ¯ØŒ Rate LimiterÙ‡Ø§ ØªØµÙˆÛŒØ± Ù†Ø§Ù‚ØµÛŒ Ø§Ø² ÙˆØ¶Ø¹ÛŒØª ÙˆØ§Ù‚Ø¹ÛŒ Ø¯Ø§Ø±Ù†Ø¯ Ùˆ Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø¯Ø±Ø³Øª ØªØµÙ…ÛŒÙ… Ø¨Ú¯ÛŒØ±Ù†Ø¯.

![](./Pictures/4-15.png)


#### ðŸš« Ø±Ø§Ù‡â€ŒØ­Ù„ Ø§Ø´ØªØ¨Ø§Ù‡:

* Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² **Sticky Session** (Ø§Ø±Ø³Ø§Ù„ ØªÙ…Ø§Ù… Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ ÛŒÚ© Rate Limiter Ø®Ø§Øµ) Ù…Ù…Ú©Ù† Ø§Ø³Øª Ù…Ø´Ú©Ù„ Ø±Ø§ Ú©Ø§Ù‡Ø´ Ø¯Ù‡Ø¯.

  * Ø§Ù…Ø§ Ø§ÛŒÙ† Ø±ÙˆØ´ **Ù…Ù‚ÛŒØ§Ø³â€ŒÙ¾Ø°ÛŒØ± Ùˆ Ø§Ù†Ø¹Ø·Ø§Ùâ€ŒÙ¾Ø°ÛŒØ± Ù†ÛŒØ³Øª** Ùˆ Ø¯Ø± Ù…Ø­ÛŒØ·â€ŒÙ‡Ø§ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ ØªÙˆØµÛŒÙ‡ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯.

#### âœ… Ø±Ø§Ù‡â€ŒØ­Ù„ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ:

* Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ÛŒÚ© **Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø² Ù…Ø±Ú©Ø²ÛŒ (Ù…Ø«Ù„ Redis)** Ø¨Ø±Ø§ÛŒ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ù… Ú©Ø§Ø±Ø¨Ø±Ø§Ù†.
* Ø·Ø±Ø§Ø­ÛŒ Ù†Ù‡Ø§ÛŒÛŒ Ø¯Ø± **Ø´Ú©Ù„ 16-4** Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡ Ú©Ù‡ Ø¯Ø± Ø¢Ù† Ù‡Ù…Ù‡ Rate LimiterÙ‡Ø§ Ø¨Ø§ Redis Ø¨Ù‡â€ŒØ¹Ù†ÙˆØ§Ù† Ù…Ù†Ø¨Ø¹ Ø¯Ø§Ø¯Ù‡â€ŒÛŒ Ù…Ø´ØªØ±Ú© Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ù‡Ø³ØªÙ†Ø¯.

![](./Pictures/4-16.png)

---

### Ø¬Ù…Ø¹â€ŒØ¨Ù†Ø¯ÛŒ Ø·Ø±Ø§Ø­ÛŒ ØªÙˆØ²ÛŒØ¹â€ŒØ´Ø¯Ù‡:

| Ú†Ø§Ù„Ø´                      | Ø±Ø§Ù‡â€ŒØ­Ù„                                                      |
| ------------------------- | ----------------------------------------------------------- |
| Race Condition            | Ø§Ø¬Ø±Ø§ÛŒ Ø§ØªÙ…ÛŒÚ© Ø¹Ù…Ù„ÛŒØ§Øª Ø¨Ø§ Lua ÛŒØ§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Sorted Set Ø¯Ø± Redis |
| Sync Ø¨ÛŒÙ† Ú†Ù†Ø¯ Rate Limiter | Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Redis Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ù…Ù†Ø¨Ø¹ Ø¯Ø§Ø¯Ù‡ Ù…Ø±Ú©Ø²ÛŒ                   |

---

## ðŸŽ¯ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ (Performance Optimization)

Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ØŒ ÛŒÚ©ÛŒ Ø§Ø² Ù…ÙˆØ¶ÙˆØ¹Ø§Øª Ø±Ø§ÛŒØ¬ Ø¯Ø± Ù…ØµØ§Ø­Ø¨Ù‡â€ŒÙ‡Ø§ÛŒ Ø·Ø±Ø§Ø­ÛŒ Ø³ÛŒØ³ØªÙ… (System Design) Ø§Ø³Øª. Ø¯Ø± Ø§ÛŒÙ† Ø¨Ø®Ø´ØŒ Ø¯Ùˆ Ø­ÙˆØ²Ù‡ Ù…Ù‡Ù… Ø¨Ø±Ø§ÛŒ Ø¨Ù‡Ø¨ÙˆØ¯ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…:

### Û±. Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ú†Ù†Ø¯ Ø¯ÛŒØªØ§Ø³Ù†ØªØ± (Multi-Data Center Setup)

ÙˆØ¬ÙˆØ¯ Ø²ÛŒØ±Ø³Ø§Ø®Øª Ú†Ù†Ø¯ Ø¯ÛŒØªØ§Ø³Ù†ØªØ± Ø¨Ø±Ø§ÛŒ ÛŒÚ© Rate Limiter Ø¨Ø³ÛŒØ§Ø± Ø­ÛŒØ§ØªÛŒ Ø§Ø³ØªØŒ Ú†Ø±Ø§Ú©Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†Ù Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ Ø¯ÙˆØ± Ø§Ø² Ù…Ø±Ú©Ø² Ø¯Ø§Ø¯Ù‡ Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø¨Ø§ **Ø²Ù…Ø§Ù† Ù¾Ø§Ø³Ø® Ø¨Ø§Ù„Ø§ (Latency Ø²ÛŒØ§Ø¯)** Ù…ÙˆØ§Ø¬Ù‡ Ø´ÙˆÙ†Ø¯.

ðŸ”¹ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù‡Ø´ Ø§ÛŒÙ† ØªØ§Ø®ÛŒØ±ØŒ Ø§Ú©Ø«Ø± Ø§Ø±Ø§Ø¦Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ú¯Ø§Ù† Ø®Ø¯Ù…Ø§Øª Ø§Ø¨Ø±ÛŒ (Cloud Providers) Ø²ÛŒØ±Ø³Ø§Ø®ØªÛŒ Ø§Ø² **Ø³Ø±ÙˆØ±Ù‡Ø§ÛŒ Edge** Ø¯Ø± Ù†Ù‚Ø§Ø· Ù…Ø®ØªÙ„Ù Ø¬Ù‡Ø§Ù† Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø±Ø¯Ù‡â€ŒØ§Ù†Ø¯.

ðŸ“Œ Ø¨Ù‡â€ŒØ¹Ù†ÙˆØ§Ù† Ù…Ø«Ø§Ù„ØŒ ØªØ§ ØªØ§Ø±ÛŒØ® Û²Û° Ù…Ù‡ Û²Û°Û²Û°ØŒ Ø´Ø±Ú©Øª **Cloudflare** Ø¯Ø§Ø±Ø§ÛŒ **Û±Û¹Û´ Ø³Ø±ÙˆØ± Edge ØªÙˆØ²ÛŒØ¹â€ŒØ´Ø¯Ù‡ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ** Ø¯Ø± Ø³Ø±Ø§Ø³Ø± Ø¯Ù†ÛŒØ§ Ø¨ÙˆØ¯Ù‡ Ø§Ø³Øª \[14].

âž¡ï¸ **ØªØ±Ø§ÙÛŒÚ© Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¨Ù‡â€ŒØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ù‡ Ù†Ø²Ø¯ÛŒÚ©â€ŒØªØ±ÛŒÙ† Ø³Ø±ÙˆØ± Edge Ù‡Ø¯Ø§ÛŒØª Ù…ÛŒâ€ŒØ´ÙˆØ¯ ØªØ§ ØªØ§Ø®ÛŒØ± Ø¨Ù‡ Ø­Ø¯Ø§Ù‚Ù„ Ø¨Ø±Ø³Ø¯.**

![](./Pictures/4-17.png)

---

### Û². Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø§ Ù…Ø¯Ù„ Â«Ø§Ù†Ø³Ø¬Ø§Ù… Ù†Ù‡Ø§ÛŒÛŒÂ» (Eventually Consistent)

Ø¯Ø± Ù…Ø¹Ù…Ø§Ø±ÛŒâ€ŒÙ‡Ø§ÛŒ ØªÙˆØ²ÛŒØ¹â€ŒØ´Ø¯Ù‡ØŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù…Ø¯Ù„ **Consistency Ù†Ù‡Ø§ÛŒÛŒ (Eventually Consistent)** Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¨Ø³ÛŒØ§Ø± Ù…Ø¤Ø«Ø± Ø§Ø³Øª.

ðŸ“˜ Ø§Ú¯Ø± Ø¨Ø§ Ø§ÛŒÙ† Ù…Ø¯Ù„ Ø¢Ø´Ù†Ø§ÛŒÛŒ Ù†Ø¯Ø§Ø±ÛŒØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒ Ø¨Ù‡ Ø¨Ø®Ø´ "Consistency" Ø¯Ø± ÙØµÙ„ Û¶ Ø§Ø² Ú©ØªØ§Ø¨ Ø·Ø±Ø§Ø­ÛŒ Ø³ÛŒØ³ØªÙ… Ø¨Ø§ Ø¹Ù†ÙˆØ§Ù† â€œDesign a Key-Value Storeâ€ Ù…Ø±Ø§Ø¬Ø¹Ù‡ Ú©Ù†ÛŒ.

---

## ðŸ“Š Ù¾Ø§ÛŒØ´ (Monitoring)

Ù¾Ø³ Ø§Ø² Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Rate LimiterØŒ Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ­Ù„ÛŒÙ„ÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ø±Ø²ÛŒØ§Ø¨ÛŒ Ú©Ø§Ø±Ø§ÛŒÛŒ Ø¢Ù† Ø¨Ø³ÛŒØ§Ø± Ù…Ù‡Ù… Ø§Ø³Øª. Ø§ÛŒÙ† Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ú©Ù…Ú© Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯ ØªØ§ Ù…ØªÙˆØ¬Ù‡ Ø´ÙˆÛŒÙ…:

* Ø¢ÛŒØ§ **Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Rate Limiting Ø¨Ù‡â€ŒØ¯Ø±Ø³ØªÛŒ Ø¹Ù…Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ ÛŒØ§ Ø®ÛŒØ±ØŸ**
* Ø¢ÛŒØ§ **Ù‚ÙˆØ§Ù†ÛŒÙ† Rate Limiting Ù…Ø¤Ø«Ø± Ù‡Ø³ØªÙ†Ø¯ ÛŒØ§ Ø®ÛŒÙ„ÛŒ Ø³Ø®ØªÚ¯ÛŒØ±Ø§Ù†Ù‡ØŸ**

### Ø³Ù†Ø§Ø±ÛŒÙˆÙ‡Ø§ÛŒ Ù…Ø«Ø§Ù„:

#### ðŸ”´ Ø§Ú¯Ø± Ù‚ÙˆØ§Ù†ÛŒÙ† Rate Limiting Ø®ÛŒÙ„ÛŒ Ø³Ø®Øª Ø¨Ø§Ø´Ù†Ø¯:

Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø¨Ø³ÛŒØ§Ø±ÛŒ Ø§Ø² Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ø¹ØªØ¨Ø± Ø¨Ù‡â€ŒØ§Ø´ØªØ¨Ø§Ù‡ Ù…Ø³Ø¯ÙˆØ¯ Ø´ÙˆÙ†Ø¯.

âœ… Ø¯Ø± Ø§ÛŒÙ† Ø­Ø§Ù„ØªØŒ Ø¨Ø§ÛŒØ¯ **Ù‚ÙˆØ§Ù†ÛŒÙ† Ø±Ø§ Ú©Ù…ÛŒ Ø§Ù†Ø¹Ø·Ø§Ùâ€ŒÙ¾Ø°ÛŒØ±ØªØ±** ØªØ¹Ø±ÛŒÙ Ú©Ù†ÛŒÙ….

#### ðŸ”´ Ø§Ú¯Ø± Ø¯Ø± Ø²Ù…Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø®Ø§Øµ (Ù…Ø«Ù„ ÙØ±ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ / Flash Sale) Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ø¯ÛŒÚ¯Ø± Ù¾Ø§Ø³Ø®Ú¯Ùˆ Ù†ÛŒØ³Øª:

Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… ÙØ¹Ù„ÛŒ Ø¯Ø± Ø¨Ø±Ø§Ø¨Ø± Ø§ÙØ²Ø§ÛŒØ´ Ù†Ø§Ú¯Ù‡Ø§Ù†ÛŒ ØªØ±Ø§ÙÛŒÚ© **ØªÙˆØ§Ù†Ø§ÛŒÛŒ Ù…Ø¯ÛŒØ±ÛŒØª ØªØ±Ø§ÙÛŒÚ© Ø§Ù†ÙØ¬Ø§Ø±ÛŒ (Burst Traffic)** Ø±Ø§ Ù†Ø¯Ø§Ø±Ø¯.

âœ… Ø±Ø§Ù‡â€ŒØ­Ù„:

* ØªØ¹ÙˆÛŒØ¶ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… ÙØ¹Ù„ÛŒ Ø¨Ø§ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…ÛŒ Ú©Ù‡ Ø¨Ø±Ø§ÛŒ ØªØ±Ø§ÙÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø§Ù†ÙØ¬Ø§Ø±ÛŒ Ù…Ù†Ø§Ø³Ø¨â€ŒØªØ± Ø§Ø³Øª.
* **Token Bucket** ÛŒÚ©ÛŒ Ø§Ø² Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† ÙˆØ¶Ø¹ÛŒØª Ø§Ø³ØªØŒ Ú†ÙˆÙ† Ø§Ø¬Ø§Ø²Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ø¯Ø± Ø¨Ø§Ø²Ù‡â€ŒÙ‡Ø§ÛŒ Ø²Ù…Ø§Ù†ÛŒ Ø®Ø§ØµØŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¨ÛŒØ´ØªØ±ÛŒ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø´ÙˆÙ†Ø¯.

---

## âœ… Ø®Ù„Ø§ØµÙ‡

| Ø¨Ø®Ø´                     | ØªÙˆØµÛŒÙ‡                                          |
| ----------------------- | ---------------------------------------------- |
| Ø¯ÛŒØªØ§Ø³Ù†ØªØ±                | Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø³Ø±ÙˆØ±Ù‡Ø§ÛŒ Edge Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù‡Ø´ latency      |
| Ù‡Ù…Ø§Ù‡Ù†Ú¯ÛŒ Ø¯Ø§Ø¯Ù‡            | Ù…Ø¯Ù„ Eventually Consistent                      |
| Ù¾Ø§ÛŒØ´ Ø¹Ù…Ù„Ú©Ø±Ø¯             | Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø«Ø±Ø¨Ø®Ø´ÛŒ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ùˆ Ù‚ÙˆØ§Ù†ÛŒÙ†                |
| Ø¨Ù‡Ø¨ÙˆØ¯ Ø¨Ø±Ø§ÛŒ ØªØ±Ø§ÙÛŒÚ© Ø³Ù†Ú¯ÛŒÙ† | Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Token Bucket Ø¨Ø±Ø§ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² burst |

---
Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ ÙÙ‡Ø±Ø³ØªÛŒ Ø§Ø² **Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù…ØªÙ†â€ŒØ¨Ø§Ø² (Open Source)** Ø¨Ø±Ø§ÛŒ **Ù¾Ø§ÛŒØ´ Ùˆ Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ Rate Limiting** Ø¨Ù‡ Ù‡Ù…Ø±Ø§Ù‡ ØªÙˆØ¶ÛŒØ­Ø§Øª ÙÙ†ÛŒØŒ Ø³Ù†Ø§Ø±ÛŒÙˆÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø¯ Ùˆ Ù…Ø«Ø§Ù„ Ø¢ÙˆØ±Ø¯Ù‡ Ø´Ø¯Ù‡ Ø§Ø³Øª. Ø§ÛŒÙ† Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ Ø¯Ø± Ø³Ø·ÙˆØ­ Ù…Ø®ØªÙ„Ù Ø§Ø² **API Gateway**ØŒ **Redis**ØŒ **Nginx**, ØªØ§ **Ø³Ø·Ø­ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù†** Ù‚Ø§Ø¨Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡â€ŒØ§Ù†Ø¯.

---

## 1. **Kong Gateway + Prometheus + Grafana**

### ðŸ”§ ØªÙˆØ¶ÛŒØ­:

* **Kong** ÛŒÚ© API Gateway Ù…ØªÙ†â€ŒØ¨Ø§Ø² Ø¨Ø§ Ù‚Ø§Ø¨Ù„ÛŒØª Rate LimitingØŒ AuthenticationØŒ Caching Ùˆ Logging Ø§Ø³Øª.
* Ø§ÙØ²ÙˆÙ†Ù‡â€ŒÛŒ `rate-limiting` Ø¯Ø± Kong Ø§Ù…Ú©Ø§Ù† Ø´Ù…Ø§Ø±Ø´ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ùˆ Ù…Ø­Ø¯ÙˆØ¯Ø³Ø§Ø²ÛŒ Ø±Ø§ ÙØ±Ø§Ù‡Ù… Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
* **Prometheus** Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…ØªØ±ÛŒÚ© Ø±Ø§ Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
* **Grafana** Ø§ÛŒÙ† Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ Ø±Ø§ Ù…Ø§Ù†ÛŒØªÙˆØ± Ùˆ ØªØµÙˆÛŒØ±ÛŒâ€ŒØ³Ø§Ø²ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

### ðŸ§ª Ù…Ø«Ø§Ù„:

```bash
curl -i -X POST http://localhost:8001/plugins \
  --data "name=rate-limiting" \
  --data "config.minute=5" \
  --data "config.policy=local"
```

ðŸ“Š Ø³Ù¾Ø³ Ø¨Ø§ Prometheus Ùˆ Grafana Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø²ÛŒØ± Ø±Ø§ Ø³Ø§Ø®Øª:

* ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø±Ø¯ Ø´Ø¯Ù‡ (status=429)
* Ø²Ù…Ø§Ù† Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ Rate Limit
* Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ù…ÙˆÙÙ‚ vs. Ø±Ø¯ Ø´Ø¯Ù‡

---

## 2. **Envoy Proxy + Rate Limit Service + Statsd + Prometheus + Grafana**

### ðŸ”§ ØªÙˆØ¶ÛŒØ­:

* Envoy ÛŒÚ© **Service Proxy** Ø§Ø³Øª Ú©Ù‡ Ù‚Ø§Ø¨Ù„ÛŒØª **global rate limiting** Ø±Ø§ Ø§Ø² Ø·Ø±ÛŒÙ‚ gRPC ÙØ±Ø§Ù‡Ù… Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
* Ø³ÛŒØ³ØªÙ… `Rate Limit Service` Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡â€ŒØ§ÛŒ (Ù…Ø§Ù†Ù†Ø¯ [lyft/ratelimit](https://github.com/envoyproxy/ratelimit)) Ø±Ø§ Ù¾ÛŒØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
* Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ Ø§Ø² Ø·Ø±ÛŒÙ‚ StatsD ÛŒØ§ Prometheus Ø¨Ù‡ Grafana Ù…Ù†ØªÙ‚Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯.

### ðŸ“ Ø³Ø§Ø®ØªØ§Ø± Rate Limit Rule:

```yaml
domain: messaging
descriptors:
  - key: message_type
    value: marketing
    rate_limit:
      unit: day
      requests_per_unit: 100
```

### ðŸ“Š Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯:

* Ù†Ø±Ø® Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø±Ø¯ Ø´Ø¯Ù‡ Ø¯Ø± Ù‡Ø± domain
* Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¹Ø¨ÙˆØ±ÛŒ
* Ø²Ù…Ø§Ù† Ø§Ù†ØªØ¸Ø§Ø± ØªØ§ Ø±ÛŒØ³Øª Ø´Ø¯Ù† Limit

---

## 3. **Redis + Lua + Prometheus Exporter**

### ðŸ”§ ØªÙˆØ¶ÛŒØ­:

Ø§Ú¯Ø± Rate Limiting Ø±Ø§ Ø¨Ø§ Redis Ùˆ Lua Script Ù¾ÛŒØ§Ø¯Ù‡ Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯ (Ù…Ø«Ù„Ø§Ù‹ Token Bucket ÛŒØ§ Sliding Window)ØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ø§ [Redis Exporter for Prometheus](https://github.com/oliver006/redis_exporter) Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡ÛŒØ¯.

### ðŸ“¦ Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Redis Ù…Ø±ØªØ¨Ø· Ø¨Ø§ Rate Limiting:

* `redis_key_hits` â†’ Ù…ÙˆÙÙ‚ÛŒØª Ø¯Ø± Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ú©Ù„ÛŒØ¯
* `redis_key_expired_total`
* `rate_limit_reject_total` (Ø¨Ø§ Ø³ÙØ§Ø±Ø´ÛŒâ€ŒØ³Ø§Ø²ÛŒ Lua)

### ðŸ” Ù…Ø«Ø§Ù„ Ù…ØªØ±ÛŒÚ© Ø³ÙØ§Ø±Ø´ÛŒ:

```lua
local key = KEYS[1]
local limit = tonumber(ARGV[1])
local current = tonumber(redis.call("get", key) or "0")

if current + 1 > limit then
  return 0
else
  redis.call("INCR", key)
  redis.call("EXPIRE", key, 60)
  return 1
end
```

---

## 4. **API Umbrella**

### ðŸ”§ ØªÙˆØ¶ÛŒØ­:

API Umbrella ÛŒÚ© API Management Layer Ù…ØªÙ†â€ŒØ¨Ø§Ø² Ø§Ø³Øª Ú©Ù‡ Rate Limiting Ùˆ Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ Ø±Ø§ Ø¨Ø§ Elasticsearch + Kibana Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.

### ðŸ“Š ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§:

* Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Kibana Ø§Ø² requestÙ‡Ø§ Ùˆ limitÙ‡Ø§
* ØªØ¹Ø±ÛŒÙ rate limit Ø¨Ø± Ø§Ø³Ø§Ø³ IPØŒ API Key Ùˆ User
* Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù†Ù…ÙˆØ¯Ø§Ø± Ø®Ø·Ø§Ù‡Ø§ÛŒ 429

---

## 5. **Rate Limit Dashboard in NGINX + Grafana**

### ðŸ”§ ØªÙˆØ¶ÛŒØ­:

Ø¯Ø± ØµÙˆØ±ØªÛŒ Ú©Ù‡ Ø§Ø² NGINX Ø¨Ø§ `limit_req_zone` Ùˆ `limit_req` Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ NGINX Ø±Ø§ Ø¨Ù‡ Prometheus Ø§Ø±Ø³Ø§Ù„ Ú©Ø±Ø¯.

### âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª:

```nginx
limit_req_zone $binary_remote_addr zone=one:10m rate=5r/m;
limit_req zone=one burst=10;
```

### ðŸ“Š Ù…Ø§Ù†ÛŒØªÙˆØ± Ø¨Ø§:

* [NGINX Exporter for Prometheus](https://github.com/nginxinc/nginx-prometheus-exporter)
* Grafana Dashboard Ø¨Ø±Ø§ÛŒ:

  * Ù†Ø±Ø® Ø®Ø·Ø§Ù‡Ø§ÛŒ 429
  * Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ù¾Ø§Ø³Ø®â€ŒØ¯Ù‡ÛŒ
  * Burst traffic

---

## 6. **OpenResty + Lua + Prometheus**

Ø§Ú¯Ø± Ø§Ø² **OpenResty** (NGINX Ø¨Ø§ Lua) Ø¨Ø±Ø§ÛŒ Rate Limit Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ø§ Ù¾Ú©ÛŒØ¬ `lua-resty-limit-traffic` Ùˆ Ù…Ø§Ú˜ÙˆÙ„ `prometheus.lua` Ù…ØªØ±ÛŒÚ© ØªÙˆÙ„ÛŒØ¯ Ú©Ù†ÛŒØ¯.

---

## Ù…Ù‚Ø§ÛŒØ³Ù‡ Ú©Ù„ÛŒ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§

| Ø§Ø¨Ø²Ø§Ø±        | Ù„Ø§ÛŒÙ‡ Ø§Ø¹Ù…Ø§Ù„ Rate Limit | Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯             | Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø±Ø§ÛŒ                     |
| ------------ | --------------------- | ---------------------- | ------------------------------ |
| Kong         | API Gateway           | Prometheus, Grafana    | Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ API Ù…ØªÙ…Ø±Ú©Ø²           |
| Envoy        | Network Proxy         | StatsD, Prometheus     | Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ Ù…ÛŒÚ©Ø±ÙˆØ³Ø±ÙˆÛŒØ³ ØªÙˆØ²ÛŒØ¹â€ŒØ´Ø¯Ù‡ |
| Redis + Lua  | Application           | Redis Exporter         | Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ Ø³Ø¨Ú© ØªØ§ Ù…ØªÙˆØ³Ø·         |
| API Umbrella | API Management        | Kibana                 | ØªÛŒÙ…â€ŒÙ‡Ø§ÛŒÛŒ Ø¨Ø§ Ù†ÛŒØ§Ø² ØªØ­Ù„ÛŒÙ„ Ù¾ÛŒØ´Ø±ÙØªÙ‡ |
| NGINX        | L3/L7                 | NGINX logs, Prometheus | Ú©Ù†ØªØ±Ù„ Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± IP ÛŒØ§ Ù…Ø³ÛŒØ±      |
| OpenResty    | L7 Ø¨Ø§ Lua             | Prometheus             | Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ Ù‚Ø§Ø¨Ù„ ØªÙˆØ³Ø¹Ù‡ Ø¨Ø§ Lua    |

---

## Ù…Ø±Ø­Ù„Ù‡ Ú†Ù‡Ø§Ø±Ù… â€“ Ø¬Ù…Ø¹â€ŒØ¨Ù†Ø¯ÛŒ (Step 4 - Wrap up)

### Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ù…ÙˆØ±Ø¯ Ø¨Ø­Ø« Ù‚Ø±Ø§Ø± Ú¯Ø±ÙØªÙ†Ø¯:

1. **Ø³Ø·Ù„ ØªÙˆÚ©Ù† (Token Bucket)**
2. **Ø³Ø·Ù„ Ù†Ø´Øªâ€ŒÚ©Ù†Ù†Ø¯Ù‡ (Leaking Bucket)**
3. **Ù¾Ù†Ø¬Ø±Ù‡ Ø«Ø§Ø¨Øª (Fixed Window)**
4. **Ø«Ø¨Øª ÙˆÙ‚Ø§ÛŒØ¹ Ø¯Ø± Ù¾Ù†Ø¬Ø±Ù‡ Ù„ØºØ²Ø§Ù† (Sliding Window Log)**
5. **Ø´Ù…Ø§Ø±Ø´ Ø¯Ø± Ù¾Ù†Ø¬Ø±Ù‡ Ù„ØºØ²Ø§Ù† (Sliding Window Counter)**

Ø³Ù¾Ø³ Ù…Ø¹Ù…Ø§Ø±ÛŒ Ú©Ù„ÛŒ Ø³ÛŒØ³ØªÙ…ØŒ Ù…Ø­Ø¯ÙˆØ¯Ø³Ø§Ø²ÛŒ Ù†Ø±Ø® Ø¯Ø± Ù…Ø­ÛŒØ·â€ŒÙ‡Ø§ÛŒ ØªÙˆØ²ÛŒØ¹â€ŒØ´Ø¯Ù‡ØŒ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ùˆ Ù¾Ø§ÛŒØ´ Ø±Ø§ Ù…ÙˆØ±Ø¯ Ø¨Ø±Ø±Ø³ÛŒ Ù‚Ø±Ø§Ø± Ø¯Ø§Ø¯ÛŒÙ….

---

## Ù†Ú©Ø§Øª Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¨Ø±Ø§ÛŒ Ù…ØµØ§Ø­Ø¨Ù‡ Ø·Ø±Ø§Ø­ÛŒ Ø³ÛŒØ³ØªÙ… (Ø§Ú¯Ø± Ø²Ù…Ø§Ù† Ø§Ø¬Ø§Ø²Ù‡ Ø¯Ù‡Ø¯):

### ðŸ”¸ Ù…Ø­Ø¯ÙˆØ¯Ø³Ø§Ø²ÛŒ Ù†Ø±Ø® Ø³Ø®Øª Ø¯Ø± Ù…Ù‚Ø§Ø¨Ù„ Ù†Ø±Ù… (Hard vs Soft Rate Limiting):

| Ù†ÙˆØ¹      | ØªØ¹Ø±ÛŒÙ                                                                                                               |
| -------- | ------------------------------------------------------------------------------------------------------------------- |
| **Hard** | ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ ØªØ­Øª Ù‡ÛŒÚ† Ø´Ø±Ø§ÛŒØ·ÛŒ Ù†Ø¨Ø§ÛŒØ¯ Ø§Ø² Ø¢Ø³ØªØ§Ù†Ù‡ Ø¹Ø¨ÙˆØ± Ú©Ù†Ø¯. Ù‡Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø§Ø¶Ø§ÙÛŒ Ù…Ø³ØªÙ‚ÛŒÙ…Ø§Ù‹ Ø±Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯.                      |
| **Soft** | Ø§Ø¬Ø§Ø²Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ø¨Ø±Ø§ÛŒ Ù…Ø¯Øªâ€ŒØ²Ù…Ø§Ù† Ú©ÙˆØªØ§Ù‡ÛŒØŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø§Ø² Ø¢Ø³ØªØ§Ù†Ù‡ Ø¹Ø¨ÙˆØ± Ú©Ù†Ù†Ø¯. Ø§Ù…Ø§ Ø³ÛŒØ³ØªÙ… Ù¾Ø³ Ø§Ø² Ù…Ø¯ØªÛŒ Ø¨Ù‡ ÙˆØ¶Ø¹ÛŒØª Ù¾Ø§ÛŒØ¯Ø§Ø± Ø¨Ø§Ø²Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø¯. |

---

### ðŸ”¸ Ù…Ø­Ø¯ÙˆØ¯Ø³Ø§Ø²ÛŒ Ù†Ø±Ø® Ø¯Ø± Ù„Ø§ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø³ÛŒØ³ØªÙ… (Multi-Layer Rate Limiting):

Ø¯Ø± Ø§ÛŒÙ† ÙØµÙ„ØŒ ÙÙ‚Ø· Ø¯Ø±Ø¨Ø§Ø±Ù‡ Rate Limiting Ø¯Ø± **Ù„Ø§ÛŒÙ‡ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† (HTTP ÛŒØ§ Ù„Ø§ÛŒÙ‡ Û· Ù…Ø¯Ù„ OSI)** ØµØ­Ø¨Øª Ø´Ø¯.

Ø§Ù…Ø§ Rate Limiting Ø±Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø¯Ø± Ø³Ø§ÛŒØ± Ù„Ø§ÛŒÙ‡â€ŒÙ‡Ø§ Ù†ÛŒØ² Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ú©Ø±Ø¯ØŒ Ù…Ø«Ù„Ø§Ù‹:

* Ø¯Ø± **Ù„Ø§ÛŒÙ‡ Ø´Ø¨Ú©Ù‡ (Layer 3)** Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒÛŒ Ù…Ø§Ù†Ù†Ø¯ **iptables** Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø¨Ø± Ø§Ø³Ø§Ø³ IPØŒ Ù…Ø­Ø¯ÙˆØ¯Ø³Ø§Ø²ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø¯Ø§Ø¯.

ðŸ“š **Ù…Ø±Ø¬Ø¹ Ù…Ø¯Ù„ OSI** â€“ Ù…Ø¯Ù„ Ù…Ø±Ø¬Ø¹ Ø§ØªØµØ§Ù„ Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø² (Open Systems Interconnection Model):

| Ù„Ø§ÛŒÙ‡    | Ù†Ø§Ù…                               |
| ------- | --------------------------------- |
| Layer 1 | Ù„Ø§ÛŒÙ‡ ÙÛŒØ²ÛŒÚ©ÛŒ (Physical Layer)      |
| Layer 2 | Ù„Ø§ÛŒÙ‡ Ù¾ÛŒÙˆÙ†Ø¯ Ø¯Ø§Ø¯Ù‡ (Data Link Layer) |
| Layer 3 | Ù„Ø§ÛŒÙ‡ Ø´Ø¨Ú©Ù‡ (Network Layer)         |
| Layer 4 | Ù„Ø§ÛŒÙ‡ Ø§Ù†ØªÙ‚Ø§Ù„ (Transport Layer)     |
| Layer 5 | Ù„Ø§ÛŒÙ‡ Ù†Ø´Ø³Øª (Session Layer)         |
| Layer 6 | Ù„Ø§ÛŒÙ‡ Ù†Ù…Ø§ÛŒØ´ (Presentation Layer)   |
| Layer 7 | Ù„Ø§ÛŒÙ‡ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ (Application Layer)  |

---

## Ù†Ø­ÙˆÙ‡ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ù‚Ø±Ø§Ø± Ú¯Ø±ÙØªÙ† Ø¯Ø± Ù…Ø­Ø¯ÙˆØ¯Ø³Ø§Ø²ÛŒ Ù†Ø±Ø® (How to Avoid Being Rate Limited)

Ø§Ú¯Ø± Ø´Ù…Ø§ ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡â€ŒÛŒ Ø³Ù…Øª Ú©Ù„Ø§ÛŒÙ†Øª Ù‡Ø³ØªÛŒØ¯ØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ø§ Ø±Ø¹Ø§ÛŒØª Ø¨Ø±Ø®ÛŒ Ø§ØµÙˆÙ„ØŒ Ø§Ø² Ø¯Ø±ÛŒØ§ÙØª Ø®Ø·Ø§ÛŒ 429 Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ú©Ù†ÛŒØ¯:

### âœ… ØªÙˆØµÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ù…Ù‡Ù… Ø¨Ø±Ø§ÛŒ Ø·Ø±Ø§Ø­ÛŒ Ú©Ù„Ø§ÛŒÙ†Øª:

1. **Ø§Ø² Ú©Ø´ Ø³Ù…Øª Ú©Ù„Ø§ÛŒÙ†Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†**
   ØªØ§ Ù†ÛŒØ§Ø² Ø¨Ù‡ ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ Ù…Ú©Ø±Ø± API Ù†Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒ.

2. **Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø´Ù†Ø§Ø³ Ùˆ Ø±Ø¹Ø§ÛŒØª Ú©Ù†**
   Ø§Ø² Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ§Ø¯ Ø¯Ø± Ø¨Ø§Ø²Ù‡ Ø²Ù…Ø§Ù†ÛŒ Ú©ÙˆØªØ§Ù‡ Ù¾Ø±Ù‡ÛŒØ² Ú©Ù†.

3. **Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø³ØªØ«Ù†Ø§Ù‡Ø§ Ùˆ Ø®Ø·Ø§Ù‡Ø§ Ø±Ø§ Ø¯Ø± Ú©Ø¯ Ù„Ø­Ø§Ø¸ Ú©Ù†**
   Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ø¯Ø± ØµÙˆØ±Øª Ø¯Ø±ÛŒØ§ÙØª Ø®Ø·Ø§ÛŒ 429 ÛŒØ§ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø¯ÛŒÚ¯Ø±ØŒ Ú©Ù„Ø§ÛŒÙ†Øª Ø¯Ú†Ø§Ø± crash Ù†Ø´ÙˆØ¯.

4. **Ø§Ø² Ù…Ù†Ø·Ù‚ backoff Ø¯Ø± Ø±ÛŒâ€ŒØªØ±ÛŒâ€ŒÙ‡Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†**
   ÛŒØ¹Ù†ÛŒ Ø¯Ø± ØµÙˆØ±Øª Ø±Ø¯ Ø´Ø¯Ù† Ø¯Ø±Ø®ÙˆØ§Ø³ØªØŒ Ø¨Ø§ ÙØ§ØµÙ„Ù‡â€ŒÙ‡Ø§ÛŒ Ø§ÙØ²Ø§ÛŒØ´ÛŒ Ù…Ø¬Ø¯Ø¯ ØªÙ„Ø§Ø´ Ú©Ù† (Exponential Backoff).

---

## âœ… Ø®Ù„Ø§ØµÙ‡ Ù¾Ø§ÛŒØ§Ù†ÛŒ Ø¨Ø±Ø§ÛŒ Ù…Ù‡Ù†Ø¯Ø³ÛŒÙ† Ø·Ø±Ø§Ø­ÛŒ Ø³ÛŒØ³ØªÙ…:

| Ù…Ø­ÙˆØ±           | ØªÙˆØµÛŒÙ‡ Ú©Ù„ÛŒØ¯ÛŒ                                                                         |
| -------------- | ----------------------------------------------------------------------------------- |
| Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§    | Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø³Ù†Ø§Ø±ÛŒÙˆØŒ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ù…Ù†Ø§Ø³Ø¨ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù† (Ù…Ø«Ù„Ø§Ù‹ Token Bucket Ø¨Ø±Ø§ÛŒ burst traffic) |
| Ù…Ø¹Ù…Ø§Ø±ÛŒ         | Ø§Ø² Redis Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§Ø±Ø´ Ø³Ø±ÛŒØ¹ Ùˆ Ø¯Ù‚ÛŒÙ‚ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†                                          |
| Ù…Ø­ÛŒØ· ØªÙˆØ²ÛŒØ¹â€ŒØ´Ø¯Ù‡ | Ø§Ø² Lua Script Ùˆ Consistency Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ø§Ù‡Ù†Ú¯ÛŒ Ùˆ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Race Condition Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†     |
| Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ     | Ø§Ø² edge server Ùˆ eventual consistency Ø¨Ø±Ø§ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¨Ù‡ØªØ± Ø¨Ù‡Ø±Ù‡ Ø¨Ø¨Ø±                     |
| Ù†Ø¸Ø§Ø±Øª          | Ù‡Ù…ÛŒØ´Ù‡ effectiveness Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ùˆ RuleÙ‡Ø§ Ø±Ø§ Ù¾Ø§ÛŒØ´ Ú©Ù†                                    |
| Ø·Ø±Ø§Ø­ÛŒ Ú©Ù„Ø§ÛŒÙ†Øª   | Ø§Ø² Ú©Ø´ØŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§ØŒ backoff Ùˆ Ù…Ø­Ø¯ÙˆØ¯Ø³Ø§Ø²ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø¨Ù‡Ø±Ù‡ Ø¨Ú¯ÛŒØ±                         |

---

